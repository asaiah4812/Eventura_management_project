{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/connect/constants.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConnectorState = exports.CONNECT_JSONRPC_VER = exports.OKXCONNECTOR_MESSAGE_TTL = exports.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE = exports.OKXCONNECTOR_WS_URL_LIST = exports.OKXCONNECTOR_WS_URL_IDX_KEY = exports.OKXCONNECTOR_WS_URL_3 = exports.OKXCONNECTOR_WS_URL_2 = exports.OKXCONNECTOR_WS_URL_1 = exports.EVENT_EMITTER_MAX_LISTENERS = void 0;\nexports.EVENT_EMITTER_MAX_LISTENERS = 10;\nexports.OKXCONNECTOR_WS_URL_1 = \"wss://wsdexpri.okx.com/ws/v1/wallet-connect-relay\";\nexports.OKXCONNECTOR_WS_URL_2 = \"wss://wsdexpri.okx.ac/ws/v1/wallet-connect-relay\";\nexports.OKXCONNECTOR_WS_URL_3 = \"wss://wsdexpri.coinall.ltd/ws/v1/wallet-connect-relay\";\nexports.OKXCONNECTOR_WS_URL_IDX_KEY = \"wuik\";\nexports.OKXCONNECTOR_WS_URL_LIST = [\n    exports.OKXCONNECTOR_WS_URL_1,\n    exports.OKXCONNECTOR_WS_URL_2,\n    exports.OKXCONNECTOR_WS_URL_3,\n];\nexports.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE = {\n    TIME_OUT: 3990,\n    CANCELED: 3991,\n    FINISHED: 3992,\n};\nexports.OKXCONNECTOR_MESSAGE_TTL = 300000;\n// --------------- JSON RPC ---------------\nexports.CONNECT_JSONRPC_VER = \"2.0\";\nexports.ConnectorState = {\n    InitState: 0,\n    Connecting: 1,\n    Connected: 2,\n    Disconnected: 3,\n    OnError: 4,\n};\n"],"names":[],"mappings":"AAAA;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,cAAc,GAAG,QAAQ,mBAAmB,GAAG,QAAQ,wBAAwB,GAAG,QAAQ,sCAAsC,GAAG,QAAQ,wBAAwB,GAAG,QAAQ,2BAA2B,GAAG,QAAQ,qBAAqB,GAAG,QAAQ,qBAAqB,GAAG,QAAQ,qBAAqB,GAAG,QAAQ,2BAA2B,GAAG,KAAK;AAC/V,QAAQ,2BAA2B,GAAG;AACtC,QAAQ,qBAAqB,GAAG;AAChC,QAAQ,qBAAqB,GAAG;AAChC,QAAQ,qBAAqB,GAAG;AAChC,QAAQ,2BAA2B,GAAG;AACtC,QAAQ,wBAAwB,GAAG;IAC/B,QAAQ,qBAAqB;IAC7B,QAAQ,qBAAqB;IAC7B,QAAQ,qBAAqB;CAChC;AACD,QAAQ,sCAAsC,GAAG;IAC7C,UAAU;IACV,UAAU;IACV,UAAU;AACd;AACA,QAAQ,wBAAwB,GAAG;AACnC,2CAA2C;AAC3C,QAAQ,mBAAmB,GAAG;AAC9B,QAAQ,cAAc,GAAG;IACrB,WAAW;IACX,YAAY;IACZ,WAAW;IACX,cAAc;IACd,SAAS;AACb","ignoreList":[0]}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/connect/storageconstants.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OKXCONNECTOR_STORAGE_CIPHER_METHOD = exports.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV = exports.OKXCONNECTOR_STORAGER_CRYPTO_SALT = exports.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD = exports.OKXCONNECTOR_TON_KEY = exports.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE = exports.OKXCONNECTOR_TOKEN_CACHE = exports.OKXCONNECTOR_JWT_KEY = exports.OKXCONNECTOR_SESSION_PREFIX_KEY = exports.OKXCONNECTOR_CRYPTO_KEY = exports.OKXCONNECTOR_CACHE_KEY_DAPP = exports.OKXCONNECTOR_CACHE_KEY = void 0;\nexports.OKXCONNECTOR_CACHE_KEY = \"ck\";\nexports.OKXCONNECTOR_CACHE_KEY_DAPP = \"ck_dapp\";\nexports.OKXCONNECTOR_CRYPTO_KEY = \"cck_k\";\nexports.OKXCONNECTOR_SESSION_PREFIX_KEY = \"cspk_\";\nexports.OKXCONNECTOR_JWT_KEY = \"cjk_k\";\nexports.OKXCONNECTOR_TOKEN_CACHE = \"ct\";\nexports.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE = \"csp\";\nexports.OKXCONNECTOR_TON_KEY = \"OKXStorage_ctc\";\nexports.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD = \"scp\";\nexports.OKXCONNECTOR_STORAGER_CRYPTO_SALT = \"scs\";\nexports.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV = \"scpc\";\nexports.OKXCONNECTOR_STORAGE_CIPHER_METHOD = \"aes-256-cbc\";\n"],"names":[],"mappings":"AAAA;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,kCAAkC,GAAG,QAAQ,oCAAoC,GAAG,QAAQ,iCAAiC,GAAG,QAAQ,oCAAoC,GAAG,QAAQ,oBAAoB,GAAG,QAAQ,mCAAmC,GAAG,QAAQ,wBAAwB,GAAG,QAAQ,oBAAoB,GAAG,QAAQ,+BAA+B,GAAG,QAAQ,uBAAuB,GAAG,QAAQ,2BAA2B,GAAG,QAAQ,sBAAsB,GAAG,KAAK;AAC9d,QAAQ,sBAAsB,GAAG;AACjC,QAAQ,2BAA2B,GAAG;AACtC,QAAQ,uBAAuB,GAAG;AAClC,QAAQ,+BAA+B,GAAG;AAC1C,QAAQ,oBAAoB,GAAG;AAC/B,QAAQ,wBAAwB,GAAG;AACnC,QAAQ,mCAAmC,GAAG;AAC9C,QAAQ,oBAAoB,GAAG;AAC/B,QAAQ,oCAAoC,GAAG;AAC/C,QAAQ,iCAAiC,GAAG;AAC5C,QAAQ,oCAAoC,GAAG;AAC/C,QAAQ,kCAAkC,GAAG","ignoreList":[0]}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/protocol/error/okx-connect.error.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_ERROR = exports.STANDARD_ERROR_MAP = exports.SERVER_ERROR_CODE_RANGE = exports.RESERVED_ERROR_CODES = exports.SERVER_ERROR = exports.INTERNAL_ERROR = exports.INVALID_PARAMS = exports.METHOD_NOT_FOUND = exports.INVALID_REQUEST = exports.PARSE_ERROR = exports.OKX_CONNECT_ERROR_CODES = exports.OKXConnectError = void 0;\nclass OKXConnectError extends Error {\n    constructor(code, message) {\n        if (message == undefined) {\n            message = getDefaultMessageByCode(code);\n        }\n        super(message);\n        this.code = code;\n        this.message = `${OKXConnectError.prefix} ${message ? '\\n' + message : ''}`;\n        Object.setPrototypeOf(this, OKXConnectError.prototype);\n    }\n    toJSON() {\n        return {\n            message: this.message,\n            code: this.code\n        };\n    }\n}\nexports.OKXConnectError = OKXConnectError;\nOKXConnectError.prefix = '[OKX_CONNECT_SDK_ERROR]';\nfunction getDefaultMessageByCode(code) {\n    if (code == OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR) {\n        return \"unknown error\";\n    }\n    else if (code == OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR) {\n        return \"bad request error\";\n    }\n    else if (code == OKX_CONNECT_ERROR_CODES.ALREADY_CONNECTED_ERROR) {\n        return \"already connected error\";\n    }\n    else if (code == OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR) {\n        return \"not connected error\";\n    }\n    else if (code == OKX_CONNECT_ERROR_CODES.UNKNOWN_APP_ERROR) {\n        return \"unknown app error\";\n    }\n    else if (code == OKX_CONNECT_ERROR_CODES.USER_REJECTS_ERROR) {\n        return \"user rejects error\";\n    }\n    else if (code == OKX_CONNECT_ERROR_CODES.USER_REJECTS_ERROR_CAUSE_REGISTER) {\n        return \"wallet address are registering\";\n    }\n    else if (code == OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED) {\n        return \"method not supported\";\n    }\n    else if (code == OKX_CONNECT_ERROR_CODES.CONNECTION_ERROR) {\n        return \"connect error\";\n    }\n    else if (code == OKX_CONNECT_ERROR_CODES.CHAIN_NOT_SUPPORTED) {\n        return \"chain not supported\";\n    }\n    return \"unknown error\";\n}\nvar OKX_CONNECT_ERROR_CODES;\n(function (OKX_CONNECT_ERROR_CODES) {\n    OKX_CONNECT_ERROR_CODES[OKX_CONNECT_ERROR_CODES[\"UNKNOWN_ERROR\"] = 0] = \"UNKNOWN_ERROR\";\n    OKX_CONNECT_ERROR_CODES[OKX_CONNECT_ERROR_CODES[\"BAD_REQUEST_ERROR\"] = 1] = \"BAD_REQUEST_ERROR\";\n    OKX_CONNECT_ERROR_CODES[OKX_CONNECT_ERROR_CODES[\"ALREADY_CONNECTED_ERROR\"] = 11] = \"ALREADY_CONNECTED_ERROR\";\n    OKX_CONNECT_ERROR_CODES[OKX_CONNECT_ERROR_CODES[\"NOT_CONNECTED_ERROR\"] = 12] = \"NOT_CONNECTED_ERROR\";\n    OKX_CONNECT_ERROR_CODES[OKX_CONNECT_ERROR_CODES[\"UNKNOWN_APP_ERROR\"] = 100] = \"UNKNOWN_APP_ERROR\";\n    OKX_CONNECT_ERROR_CODES[OKX_CONNECT_ERROR_CODES[\"USER_REJECTS_ERROR\"] = 300] = \"USER_REJECTS_ERROR\";\n    OKX_CONNECT_ERROR_CODES[OKX_CONNECT_ERROR_CODES[\"USER_REJECTS_ERROR_CAUSE_REGISTER\"] = 301] = \"USER_REJECTS_ERROR_CAUSE_REGISTER\";\n    OKX_CONNECT_ERROR_CODES[OKX_CONNECT_ERROR_CODES[\"METHOD_NOT_SUPPORTED\"] = 400] = \"METHOD_NOT_SUPPORTED\";\n    OKX_CONNECT_ERROR_CODES[OKX_CONNECT_ERROR_CODES[\"CHAIN_NOT_SUPPORTED\"] = 500] = \"CHAIN_NOT_SUPPORTED\";\n    OKX_CONNECT_ERROR_CODES[OKX_CONNECT_ERROR_CODES[\"WALLET_NOT_SUPPORTED\"] = 600] = \"WALLET_NOT_SUPPORTED\";\n    OKX_CONNECT_ERROR_CODES[OKX_CONNECT_ERROR_CODES[\"CONNECTION_ERROR\"] = 700] = \"CONNECTION_ERROR\";\n})(OKX_CONNECT_ERROR_CODES || (exports.OKX_CONNECT_ERROR_CODES = OKX_CONNECT_ERROR_CODES = {}));\nexports.PARSE_ERROR = \"PARSE_ERROR\";\nexports.INVALID_REQUEST = \"INVALID_REQUEST\";\nexports.METHOD_NOT_FOUND = \"METHOD_NOT_FOUND\";\nexports.INVALID_PARAMS = \"INVALID_PARAMS\";\nexports.INTERNAL_ERROR = \"INTERNAL_ERROR\";\nexports.SERVER_ERROR = \"SERVER_ERROR\";\nexports.RESERVED_ERROR_CODES = [-32700, -32600, -32601, -32602, -32603];\nexports.SERVER_ERROR_CODE_RANGE = [-32000, -32099];\nexports.STANDARD_ERROR_MAP = {\n    [exports.PARSE_ERROR]: { code: -32700, message: \"Parse error\" },\n    [exports.INVALID_REQUEST]: { code: -32600, message: \"Invalid Request\" },\n    [exports.METHOD_NOT_FOUND]: { code: -32601, message: \"Method not found\" },\n    [exports.INVALID_PARAMS]: { code: -32602, message: \"Invalid params\" },\n    [exports.INTERNAL_ERROR]: { code: -32603, message: \"Internal error\" },\n    [exports.SERVER_ERROR]: { code: -32000, message: \"Server error\" },\n};\nexports.DEFAULT_ERROR = exports.SERVER_ERROR;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 169, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 174, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/protocol/error/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OKX_CONNECT_ERROR_CODES = exports.OKXConnectError = void 0;\nvar okx_connect_error_1 = require(\"./okx-connect.error\");\nObject.defineProperty(exports, \"OKXConnectError\", { enumerable: true, get: function () { return okx_connect_error_1.OKXConnectError; } });\nObject.defineProperty(exports, \"OKX_CONNECT_ERROR_CODES\", { enumerable: true, get: function () { return okx_connect_error_1.OKX_CONNECT_ERROR_CODES; } });\n"],"names":[],"mappings":"AAAA;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,uBAAuB,GAAG,QAAQ,eAAe,GAAG,KAAK;AACjE,IAAI;AACJ,OAAO,cAAc,CAAC,SAAS,mBAAmB;IAAE,YAAY;IAAM,KAAK;QAAc,OAAO,oBAAoB,eAAe;IAAE;AAAE;AACvI,OAAO,cAAc,CAAC,SAAS,2BAA2B;IAAE,YAAY;IAAM,KAAK;QAAc,OAAO,oBAAoB,uBAAuB;IAAE;AAAE","ignoreList":[0]}},
    {"offset": {"line": 192, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 197, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/protocol/misc.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NameSpaceKeyStarknet = exports.NameSpaceKeyTron = exports.NameSpaceKeyCosmos = exports.NameSpaceKeyAptos = exports.NameSpaceKeyBtc = exports.NameSpaceKeySui = exports.NameSpaceKeyTON = exports.NameSpaceKeySOL = exports.NameSpaceKeyEip155 = void 0;\nexports.NameSpaceKeyEip155 = \"eip155\";\nexports.NameSpaceKeySOL = \"solana\";\nexports.NameSpaceKeyTON = \"ton\";\nexports.NameSpaceKeySui = \"sui\";\nexports.NameSpaceKeyBtc = \"btc\";\nexports.NameSpaceKeyAptos = \"aptos\";\nexports.NameSpaceKeyCosmos = \"cosmos\";\nexports.NameSpaceKeyTron = \"tron\";\nexports.NameSpaceKeyStarknet = \"starknet\";\n"],"names":[],"mappings":"AAAA;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,oBAAoB,GAAG,QAAQ,gBAAgB,GAAG,QAAQ,kBAAkB,GAAG,QAAQ,iBAAiB,GAAG,QAAQ,eAAe,GAAG,QAAQ,eAAe,GAAG,QAAQ,eAAe,GAAG,QAAQ,eAAe,GAAG,QAAQ,kBAAkB,GAAG,KAAK;AAC7P,QAAQ,kBAAkB,GAAG;AAC7B,QAAQ,eAAe,GAAG;AAC1B,QAAQ,eAAe,GAAG;AAC1B,QAAQ,eAAe,GAAG;AAC1B,QAAQ,eAAe,GAAG;AAC1B,QAAQ,iBAAiB,GAAG;AAC5B,QAAQ,kBAAkB,GAAG;AAC7B,QAAQ,gBAAgB,GAAG;AAC3B,QAAQ,oBAAoB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 211, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 216, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/protocol/constants.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.tgwalletAppName = exports.tgwalletName = exports.tonConnectSdkVersion = exports.shortUniversalLink = exports.standardDeeplink = exports.downloadUrl = exports.standardUniversalLink = exports.okxDeeplink = void 0;\nexports.getTestTwaUrl = getTestTwaUrl;\nexports.getTestTgTwaUrl = getTestTgTwaUrl;\nexports.okxDeeplink = 'okx://web3';\nexports.standardUniversalLink = typeof window !== \"undefined\" && window.location.hostname.includes(\"okx.com\")\n    ? \"https://link.okx.com/download\"\n    : \"https://www.okx.com/download\";\nexports.downloadUrl = \"https://www.okx.com/download\";\n// export const standardUniversalLink = 'http://localhost:5173';\nexports.standardDeeplink = `${exports.okxDeeplink}/wallet/connect`;\nexports.shortUniversalLink = `https://www.okx.com/ul/connect`;\n// export const standardDeeplink = 'http://localhost:5173';\nexports.tonConnectSdkVersion = '1';\n// export const tgwalletName: string = \"TCTestqdqwdqwdqBot\"\nexports.tgwalletName = \"OKX_WALLET_BOT\";\nexports.tgwalletAppName = \"start\";\n// https://t.me/OKX_WALLET_BOT/start\nfunction getTestTwaUrl() {\n    return window.okxTesttwaUrl;\n}\nfunction getTestTgTwaUrl() {\n    return window.okxTestTgtwaUrl;\n}\n"],"names":[],"mappings":"AAAA;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,eAAe,GAAG,QAAQ,YAAY,GAAG,QAAQ,oBAAoB,GAAG,QAAQ,kBAAkB,GAAG,QAAQ,gBAAgB,GAAG,QAAQ,WAAW,GAAG,QAAQ,qBAAqB,GAAG,QAAQ,WAAW,GAAG,KAAK;AACzN,QAAQ,aAAa,GAAG;AACxB,QAAQ,eAAe,GAAG;AAC1B,QAAQ,WAAW,GAAG;AACtB,QAAQ,qBAAqB,GAAG,OAAO,WAAW,eAAe,OAAO,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,aAC7F,kCACA;AACN,QAAQ,WAAW,GAAG;AACtB,gEAAgE;AAChE,QAAQ,gBAAgB,GAAG,GAAG,QAAQ,WAAW,CAAC,eAAe,CAAC;AAClE,QAAQ,kBAAkB,GAAG,CAAC,8BAA8B,CAAC;AAC7D,2DAA2D;AAC3D,QAAQ,oBAAoB,GAAG;AAC/B,2DAA2D;AAC3D,QAAQ,YAAY,GAAG;AACvB,QAAQ,eAAe,GAAG;AAC1B,oCAAoC;AACpC,SAAS;IACL,OAAO,OAAO,aAAa;AAC/B;AACA,SAAS;IACL,OAAO,OAAO,eAAe;AACjC","ignoreList":[0]}},
    {"offset": {"line": 241, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 246, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/protocol/connect/json-rpc.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isJsonRpcPayload = isJsonRpcPayload;\nexports.isJsonRpcRequest = isJsonRpcRequest;\nexports.isJsonRpcResponse = isJsonRpcResponse;\nexports.isJsonRpcResult = isJsonRpcResult;\nexports.isJsonRpcError = isJsonRpcError;\nexports.payloadId = payloadId;\nexports.getBigIntRpcId = getBigIntRpcId;\nexports.formatJsonRpcRequest = formatJsonRpcRequest;\nexports.formatJsonRpcResult = formatJsonRpcResult;\nexports.formatJsonRpcError = formatJsonRpcError;\nexports.isReservedErrorCode = isReservedErrorCode;\nexports.getError = getError;\nexports.getErrorByCode = getErrorByCode;\nexports.formatErrorMessage = formatErrorMessage;\nexports.isHttpUrl = isHttpUrl;\nexports.isWsUrl = isWsUrl;\nexports.parseConnectionError = parseConnectionError;\nfunction isJsonRpcPayload(payload) {\n    return (typeof payload === \"object\" &&\n        \"id\" in payload &&\n        \"jsonrpc\" in payload &&\n        payload.jsonrpc === \"2.0\");\n}\nfunction isJsonRpcRequest(payload) {\n    return isJsonRpcPayload(payload) && \"method\" in payload;\n}\nfunction isJsonRpcResponse(payload) {\n    return isJsonRpcPayload(payload) && (isJsonRpcResult(payload) || isJsonRpcError(payload));\n}\nfunction isJsonRpcResult(payload) {\n    return \"result\" in payload;\n}\nfunction isJsonRpcError(payload) {\n    return \"error\" in payload;\n}\nconst okx_connect_error_1 = require(\"../error/okx-connect.error\");\nconst tweetnacl_1 = __importDefault(require(\"tweetnacl\"));\nclass IncrementalRandomGenerator {\n    constructor(bits) {\n        this.i = 1;\n        const typedArray = bits === 8 ? new Uint8Array(1) : bits === 16 ? new Uint16Array(1) : new Uint32Array(1);\n        if (bits) {\n            this.initialValue = tweetnacl_1.default.randomBytes(bits / 8)[0];\n        }\n        else {\n            this.initialValue = 0;\n        }\n    }\n    getNextValue() {\n        return this.initialValue + this.i++;\n    }\n}\nconst uint8Generator = new IncrementalRandomGenerator(8);\nconst uint16Generator = new IncrementalRandomGenerator(16);\nfunction payloadId() {\n    const date = Date.now() * 1000;\n    const extra = uint8Generator.getNextValue();\n    return date + extra;\n}\nfunction getBigIntRpcId() {\n    const date = BigInt(Date.now()) * BigInt(1000000);\n    const extra = BigInt(uint16Generator.getNextValue());\n    return date + extra;\n}\nfunction formatJsonRpcRequest(method, params, id) {\n    return {\n        id: id || payloadId(),\n        jsonrpc: \"2.0\",\n        method,\n        params,\n    };\n}\nfunction formatJsonRpcResult(id, result) {\n    return {\n        id,\n        jsonrpc: \"2.0\",\n        result,\n    };\n}\nfunction formatJsonRpcError(id, error, data) {\n    return {\n        id,\n        jsonrpc: \"2.0\",\n        error: formatErrorMessage(error, data),\n    };\n}\nfunction isReservedErrorCode(code) {\n    return okx_connect_error_1.RESERVED_ERROR_CODES.includes(code);\n}\nfunction getError(type) {\n    if (!Object.keys(okx_connect_error_1.STANDARD_ERROR_MAP).includes(type)) {\n        return okx_connect_error_1.STANDARD_ERROR_MAP[okx_connect_error_1.DEFAULT_ERROR];\n    }\n    return okx_connect_error_1.STANDARD_ERROR_MAP[type];\n}\nfunction getErrorByCode(code) {\n    const match = Object.values(okx_connect_error_1.STANDARD_ERROR_MAP).find((e) => e.code === code);\n    if (!match) {\n        return okx_connect_error_1.STANDARD_ERROR_MAP[okx_connect_error_1.DEFAULT_ERROR];\n    }\n    return match;\n}\nfunction formatErrorMessage(error, data) {\n    if (typeof error === \"undefined\") {\n        return getError(okx_connect_error_1.INTERNAL_ERROR);\n    }\n    if (typeof error === \"string\") {\n        error = Object.assign(Object.assign({}, getError(okx_connect_error_1.SERVER_ERROR)), { message: error });\n    }\n    if (typeof data !== \"undefined\") {\n        error.data = data;\n    }\n    if (isReservedErrorCode(error.code)) {\n        error = getErrorByCode(error.code);\n    }\n    return error;\n}\nfunction getUrlProtocol(url) {\n    const matches = url.match(new RegExp(/^\\w+:/, \"gi\"));\n    if (!matches || !matches.length)\n        return;\n    return matches[0];\n}\nfunction matchRegexProtocol(url, regex) {\n    const protocol = getUrlProtocol(url);\n    if (typeof protocol === \"undefined\")\n        return false;\n    return new RegExp(regex).test(protocol);\n}\nfunction isHttpUrl(url) {\n    return matchRegexProtocol(url, \"^https?:\");\n}\nfunction isWsUrl(url) {\n    return matchRegexProtocol(url, \"^wss?:\");\n}\nfunction parseConnectionError(e, url, type) {\n    return e.message.includes(\"getaddrinfo ENOTFOUND\") || e.message.includes(\"connect ECONNREFUSED\")\n        ? new Error(`Unavailable ${type} RPC url at ${url}`)\n        : e;\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 389, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 394, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/protocol/connect/engine.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IEngine = exports.ISignClient = exports.ISignClientEvents = exports.IEngineEvents = void 0;\nconst eventemitter3_1 = __importDefault(require(\"eventemitter3\"));\nclass IEngineEvents extends eventemitter3_1.default {\n    constructor() {\n        super();\n    }\n}\nexports.IEngineEvents = IEngineEvents;\nclass ISignClientEvents extends eventemitter3_1.default {\n    constructor() {\n        super();\n    }\n}\nexports.ISignClientEvents = ISignClientEvents;\nclass ISignClient {\n    constructor(data) {\n        this.data = data;\n    }\n}\nexports.ISignClient = ISignClient;\nclass IEngine {\n    constructor(client) {\n        this.client = client;\n    }\n}\nexports.IEngine = IEngine;\n"],"names":[],"mappings":"AAAA;AACA,IAAI,kBAAkB,AAAC,IAAI,IAAI,IAAI,CAAC,eAAe,IAAK,SAAU,GAAG;IACjE,OAAO,AAAC,OAAO,IAAI,UAAU,GAAI,MAAM;QAAE,WAAW;IAAI;AAC5D;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,OAAO,GAAG,QAAQ,WAAW,GAAG,QAAQ,iBAAiB,GAAG,QAAQ,aAAa,GAAG,KAAK;AACjG,MAAM,kBAAkB;AACxB,MAAM,sBAAsB,gBAAgB,OAAO;IAC/C,aAAc;QACV,KAAK;IACT;AACJ;AACA,QAAQ,aAAa,GAAG;AACxB,MAAM,0BAA0B,gBAAgB,OAAO;IACnD,aAAc;QACV,KAAK;IACT;AACJ;AACA,QAAQ,iBAAiB,GAAG;AAC5B,MAAM;IACF,YAAY,IAAI,CAAE;QACd,IAAI,CAAC,IAAI,GAAG;IAChB;AACJ;AACA,QAAQ,WAAW,GAAG;AACtB,MAAM;IACF,YAAY,MAAM,CAAE;QAChB,IAAI,CAAC,MAAM,GAAG;IAClB;AACJ;AACA,QAAQ,OAAO,GAAG","ignoreList":[0]}},
    {"offset": {"line": 429, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 434, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/protocol/connect/ton/connect-wallet.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TONCHAIN = void 0;\nvar TONCHAIN;\n(function (TONCHAIN) {\n    TONCHAIN[\"MAINNET\"] = \"-239\";\n})(TONCHAIN || (exports.TONCHAIN = TONCHAIN = {}));\n"],"names":[],"mappings":"AAAA;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,QAAQ,GAAG,KAAK;AACxB,IAAI;AACJ,CAAC,SAAU,QAAQ;IACf,QAAQ,CAAC,UAAU,GAAG;AAC1B,CAAC,EAAE,YAAY,CAAC,QAAQ,QAAQ,GAAG,WAAW,CAAC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 443, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 448, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/protocol/connect/ton/connect-event.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CONNECT_ITEM_ERROR_CODES = void 0;\nvar CONNECT_ITEM_ERROR_CODES;\n(function (CONNECT_ITEM_ERROR_CODES) {\n    CONNECT_ITEM_ERROR_CODES[CONNECT_ITEM_ERROR_CODES[\"UNKNOWN_ERROR\"] = 0] = \"UNKNOWN_ERROR\";\n    CONNECT_ITEM_ERROR_CODES[CONNECT_ITEM_ERROR_CODES[\"METHOD_NOT_SUPPORTED\"] = 400] = \"METHOD_NOT_SUPPORTED\";\n})(CONNECT_ITEM_ERROR_CODES || (exports.CONNECT_ITEM_ERROR_CODES = CONNECT_ITEM_ERROR_CODES = {}));\n"],"names":[],"mappings":"AAAA;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,wBAAwB,GAAG,KAAK;AACxC,IAAI;AACJ,CAAC,SAAU,wBAAwB;IAC/B,wBAAwB,CAAC,wBAAwB,CAAC,gBAAgB,GAAG,EAAE,GAAG;IAC1E,wBAAwB,CAAC,wBAAwB,CAAC,uBAAuB,GAAG,IAAI,GAAG;AACvF,CAAC,EAAE,4BAA4B,CAAC,QAAQ,wBAAwB,GAAG,2BAA2B,CAAC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 458, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 463, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/protocol/connect/ton/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CONNECT_ITEM_ERROR_CODES = exports.TONCHAIN = void 0;\nvar connect_wallet_1 = require(\"./connect-wallet\");\nObject.defineProperty(exports, \"TONCHAIN\", { enumerable: true, get: function () { return connect_wallet_1.TONCHAIN; } });\nvar connect_event_1 = require(\"./connect-event\");\nObject.defineProperty(exports, \"CONNECT_ITEM_ERROR_CODES\", { enumerable: true, get: function () { return connect_event_1.CONNECT_ITEM_ERROR_CODES; } });\n"],"names":[],"mappings":"AAAA;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,wBAAwB,GAAG,QAAQ,QAAQ,GAAG,KAAK;AAC3D,IAAI;AACJ,OAAO,cAAc,CAAC,SAAS,YAAY;IAAE,YAAY;IAAM,KAAK;QAAc,OAAO,iBAAiB,QAAQ;IAAE;AAAE;AACtH,IAAI;AACJ,OAAO,cAAc,CAAC,SAAS,4BAA4B;IAAE,YAAY;IAAM,KAAK;QAAc,OAAO,gBAAgB,wBAAwB;IAAE;AAAE","ignoreList":[0]}},
    {"offset": {"line": 482, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 487, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/protocol/connect/wallet-info.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.creatOKXWalletInfo = creatOKXWalletInfo;\nexports.creatOKXMiniAppWalletInfo = creatOKXMiniAppWalletInfo;\nconst constants_1 = require(\"../constants\");\nfunction creatOKXWalletInfo() {\n    return {\n        \"appName\": \"okxAppWallet\",\n        \"name\": \"OKX Wallet\",\n        \"imageUrl\": \"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png\",\n        \"aboutUrl\": constants_1.downloadUrl,\n        \"universalLink\": constants_1.standardUniversalLink,\n        \"deepLink\": constants_1.standardDeeplink,\n        \"platforms\": [\"ios\", \"android\"]\n    };\n}\nfunction creatOKXMiniAppWalletInfo() {\n    return {\n        \"appName\": \"okxMiniApp\",\n        \"name\": \"OKX Mini Wallet\",\n        \"imageUrl\": \"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png\",\n        \"aboutUrl\": constants_1.downloadUrl,\n        \"universalLink\": `https://t.me/${constants_1.tgwalletName}/start`,\n        \"deepLink\": \"\",\n        \"platforms\": [\"ios\", \"android\", 'macos', 'windows']\n    };\n}\n"],"names":[],"mappings":"AAAA;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,kBAAkB,GAAG;AAC7B,QAAQ,yBAAyB,GAAG;AACpC,MAAM;AACN,SAAS;IACL,OAAO;QACH,WAAW;QACX,QAAQ;QACR,YAAY;QACZ,YAAY,YAAY,WAAW;QACnC,iBAAiB,YAAY,qBAAqB;QAClD,YAAY,YAAY,gBAAgB;QACxC,aAAa;YAAC;YAAO;SAAU;IACnC;AACJ;AACA,SAAS;IACL,OAAO;QACH,WAAW;QACX,QAAQ;QACR,YAAY;QACZ,YAAY,YAAY,WAAW;QACnC,iBAAiB,CAAC,aAAa,EAAE,YAAY,YAAY,CAAC,MAAM,CAAC;QACjE,YAAY;QACZ,aAAa;YAAC;YAAO;YAAW;YAAS;SAAU;IACvD;AACJ","ignoreList":[0]}},
    {"offset": {"line": 524, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 529, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/protocol/connect/index.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.creatOKXMiniAppWalletInfo = exports.creatOKXWalletInfo = exports.ISignClientEvents = exports.IEngine = exports.IEngineEvents = exports.ISignClient = exports.getBigIntRpcId = exports.formatJsonRpcRequest = exports.isJsonRpcError = exports.isJsonRpcResponse = exports.parseConnectionError = exports.isHttpUrl = exports.formatJsonRpcError = void 0;\nvar json_rpc_1 = require(\"./json-rpc\");\nObject.defineProperty(exports, \"formatJsonRpcError\", { enumerable: true, get: function () { return json_rpc_1.formatJsonRpcError; } });\nObject.defineProperty(exports, \"isHttpUrl\", { enumerable: true, get: function () { return json_rpc_1.isHttpUrl; } });\nObject.defineProperty(exports, \"parseConnectionError\", { enumerable: true, get: function () { return json_rpc_1.parseConnectionError; } });\nObject.defineProperty(exports, \"isJsonRpcResponse\", { enumerable: true, get: function () { return json_rpc_1.isJsonRpcResponse; } });\nObject.defineProperty(exports, \"isJsonRpcError\", { enumerable: true, get: function () { return json_rpc_1.isJsonRpcError; } });\nObject.defineProperty(exports, \"formatJsonRpcRequest\", { enumerable: true, get: function () { return json_rpc_1.formatJsonRpcRequest; } });\nObject.defineProperty(exports, \"getBigIntRpcId\", { enumerable: true, get: function () { return json_rpc_1.getBigIntRpcId; } });\nvar engine_1 = require(\"./engine\");\nObject.defineProperty(exports, \"ISignClient\", { enumerable: true, get: function () { return engine_1.ISignClient; } });\nObject.defineProperty(exports, \"IEngineEvents\", { enumerable: true, get: function () { return engine_1.IEngineEvents; } });\nObject.defineProperty(exports, \"IEngine\", { enumerable: true, get: function () { return engine_1.IEngine; } });\nObject.defineProperty(exports, \"ISignClientEvents\", { enumerable: true, get: function () { return engine_1.ISignClientEvents; } });\n__exportStar(require(\"./ton\"), exports);\nvar wallet_info_1 = require(\"./wallet-info\");\nObject.defineProperty(exports, \"creatOKXWalletInfo\", { enumerable: true, get: function () { return wallet_info_1.creatOKXWalletInfo; } });\nObject.defineProperty(exports, \"creatOKXMiniAppWalletInfo\", { enumerable: true, get: function () { return wallet_info_1.creatOKXMiniAppWalletInfo; } });\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 635, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 640, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/protocol/index.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.downloadUrl = exports.okxDeeplink = exports.tonConnectSdkVersion = exports.standardDeeplink = exports.standardUniversalLink = exports.NameSpaceKeyStarknet = exports.NameSpaceKeyTron = exports.NameSpaceKeyCosmos = exports.NameSpaceKeyAptos = exports.NameSpaceKeyBtc = exports.NameSpaceKeySui = exports.NameSpaceKeyTON = exports.NameSpaceKeySOL = exports.NameSpaceKeyEip155 = void 0;\n__exportStar(require(\"./error\"), exports);\nvar misc_1 = require(\"./misc\");\nObject.defineProperty(exports, \"NameSpaceKeyEip155\", { enumerable: true, get: function () { return misc_1.NameSpaceKeyEip155; } });\nObject.defineProperty(exports, \"NameSpaceKeySOL\", { enumerable: true, get: function () { return misc_1.NameSpaceKeySOL; } });\nObject.defineProperty(exports, \"NameSpaceKeyTON\", { enumerable: true, get: function () { return misc_1.NameSpaceKeyTON; } });\nObject.defineProperty(exports, \"NameSpaceKeySui\", { enumerable: true, get: function () { return misc_1.NameSpaceKeySui; } });\nObject.defineProperty(exports, \"NameSpaceKeyBtc\", { enumerable: true, get: function () { return misc_1.NameSpaceKeyBtc; } });\nObject.defineProperty(exports, \"NameSpaceKeyAptos\", { enumerable: true, get: function () { return misc_1.NameSpaceKeyAptos; } });\nObject.defineProperty(exports, \"NameSpaceKeyCosmos\", { enumerable: true, get: function () { return misc_1.NameSpaceKeyCosmos; } });\nObject.defineProperty(exports, \"NameSpaceKeyTron\", { enumerable: true, get: function () { return misc_1.NameSpaceKeyTron; } });\nObject.defineProperty(exports, \"NameSpaceKeyStarknet\", { enumerable: true, get: function () { return misc_1.NameSpaceKeyStarknet; } });\nvar constants_1 = require(\"./constants\");\nObject.defineProperty(exports, \"standardUniversalLink\", { enumerable: true, get: function () { return constants_1.standardUniversalLink; } });\nObject.defineProperty(exports, \"standardDeeplink\", { enumerable: true, get: function () { return constants_1.standardDeeplink; } });\nObject.defineProperty(exports, \"tonConnectSdkVersion\", { enumerable: true, get: function () { return constants_1.tonConnectSdkVersion; } });\nObject.defineProperty(exports, \"okxDeeplink\", { enumerable: true, get: function () { return constants_1.okxDeeplink; } });\nObject.defineProperty(exports, \"downloadUrl\", { enumerable: true, get: function () { return constants_1.downloadUrl; } });\n__exportStar(require(\"./connect\"), exports);\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 752, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 757, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/utils/web-api.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.openLink = openLink;\nexports.openLinkBlank = openLinkBlank;\nexports.openDeeplinkWithFallback = openDeeplinkWithFallback;\nexports.isMobileUserAgent = isMobileUserAgent;\nexports.getUserAgent = getUserAgent;\nexports.isOS = isOS;\nexports.isBrowser = isBrowser;\nconst ua_parser_js_1 = __importDefault(require(\"ua-parser-js\"));\nconst log_1 = require(\"./log\");\nfunction openLink(href, target = '_self') {\n    (0, log_1.logDebug)('openLink', href, target);\n    window.open(href, target, 'noopener noreferrer');\n}\nfunction openLinkBlank(href) {\n    openLink(href, '_blank');\n}\nfunction openDeeplinkWithFallback(href, fallback) {\n    const doFallback = () => {\n        if (isBrowser('safari') || (isOS('android') && isBrowser('firefox'))) {\n            // Safari does not support fallback to direct link.\n            return;\n        }\n        fallback();\n    };\n    const fallbackTimeout = setTimeout(() => doFallback(), 500);\n    window.addEventListener('blur', () => clearTimeout(fallbackTimeout), { once: true });\n    openLink(href, '_self');\n}\nfunction isMobileUserAgent() {\n    let check = false;\n    (function (a) {\n        if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) ||\n            /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.slice(0, 4)))\n            check = true;\n    })(navigator.userAgent ||\n        navigator.vendor ||\n        window.opera);\n    return check;\n}\nfunction getUserAgent() {\n    var _a, _b, _c;\n    const results = new ua_parser_js_1.default().getResult();\n    const osName = (_a = results.os.name) === null || _a === void 0 ? void 0 : _a.toLowerCase();\n    const deviceModel = (_b = results.device.model) === null || _b === void 0 ? void 0 : _b.toLowerCase();\n    let os;\n    switch (true) {\n        case deviceModel === 'ipad':\n            os = 'ipad';\n            break;\n        case osName === 'ios':\n            os = 'ios';\n            break;\n        case osName === 'android':\n            os = 'android';\n            break;\n        case osName === 'mac os':\n            os = 'macos';\n            break;\n        case osName === 'linux':\n            os = 'linux';\n            break;\n        case osName === null || osName === void 0 ? void 0 : osName.includes('windows'):\n            os = 'windows';\n            break;\n    }\n    const browserName = (_c = results.browser.name) === null || _c === void 0 ? void 0 : _c.toLowerCase();\n    let browser;\n    switch (true) {\n        case browserName === 'chrome':\n            browser = 'chrome';\n            break;\n        case browserName === 'firefox':\n            browser = 'firefox';\n            break;\n        case browserName === null || browserName === void 0 ? void 0 : browserName.includes('safari'):\n            browser = 'safari';\n            break;\n        case browserName === null || browserName === void 0 ? void 0 : browserName.includes('opera'):\n            browser = 'opera';\n            break;\n    }\n    return {\n        os,\n        browser\n    };\n}\nfunction isOS(...os) {\n    return os.includes(getUserAgent().os);\n}\nfunction isBrowser(...browser) {\n    return browser.includes(getUserAgent().browser);\n}\n"],"names":[],"mappings":"AAAA;AACA,IAAI,kBAAkB,AAAC,IAAI,IAAI,IAAI,CAAC,eAAe,IAAK,SAAU,GAAG;IACjE,OAAO,AAAC,OAAO,IAAI,UAAU,GAAI,MAAM;QAAE,WAAW;IAAI;AAC5D;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,QAAQ,GAAG;AACnB,QAAQ,aAAa,GAAG;AACxB,QAAQ,wBAAwB,GAAG;AACnC,QAAQ,iBAAiB,GAAG;AAC5B,QAAQ,YAAY,GAAG;AACvB,QAAQ,IAAI,GAAG;AACf,QAAQ,SAAS,GAAG;AACpB,MAAM,iBAAiB;AACvB,MAAM;AACN,SAAS,SAAS,IAAI,EAAE,SAAS,OAAO;IACpC,CAAC,GAAG,MAAM,QAAQ,EAAE,YAAY,MAAM;IACtC,OAAO,IAAI,CAAC,MAAM,QAAQ;AAC9B;AACA,SAAS,cAAc,IAAI;IACvB,SAAS,MAAM;AACnB;AACA,SAAS,yBAAyB,IAAI,EAAE,QAAQ;IAC5C,MAAM,aAAa;QACf,IAAI,UAAU,aAAc,KAAK,cAAc,UAAU,YAAa;YAClE,mDAAmD;YACnD;QACJ;QACA;IACJ;IACA,MAAM,kBAAkB,WAAW,IAAM,cAAc;IACvD,OAAO,gBAAgB,CAAC,QAAQ,IAAM,aAAa,kBAAkB;QAAE,MAAM;IAAK;IAClF,SAAS,MAAM;AACnB;AACA,SAAS;IACL,IAAI,QAAQ;IACZ,CAAC,SAAU,CAAC;QACR,IAAI,2TAA2T,IAAI,CAAC,MAChU,0kDAA0kD,IAAI,CAAC,EAAE,KAAK,CAAC,GAAG,KAC1lD,QAAQ;IAChB,CAAC,EAAE,UAAU,SAAS,IAClB,UAAU,MAAM,IAChB,OAAO,KAAK;IAChB,OAAO;AACX;AACA,SAAS;IACL,IAAI,IAAI,IAAI;IACZ,MAAM,UAAU,IAAI,eAAe,OAAO,GAAG,SAAS;IACtD,MAAM,SAAS,CAAC,KAAK,QAAQ,EAAE,CAAC,IAAI,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,WAAW;IACzF,MAAM,cAAc,CAAC,KAAK,QAAQ,MAAM,CAAC,KAAK,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,WAAW;IACnG,IAAI;IACJ,OAAQ;QACJ,KAAK,gBAAgB;YACjB,KAAK;YACL;QACJ,KAAK,WAAW;YACZ,KAAK;YACL;QACJ,KAAK,WAAW;YACZ,KAAK;YACL;QACJ,KAAK,WAAW;YACZ,KAAK;YACL;QACJ,KAAK,WAAW;YACZ,KAAK;YACL;QACJ,KAAK,WAAW,QAAQ,WAAW,KAAK,IAAI,KAAK,IAAI,OAAO,QAAQ,CAAC;YACjE,KAAK;YACL;IACR;IACA,MAAM,cAAc,CAAC,KAAK,QAAQ,OAAO,CAAC,IAAI,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,WAAW;IACnG,IAAI;IACJ,OAAQ;QACJ,KAAK,gBAAgB;YACjB,UAAU;YACV;QACJ,KAAK,gBAAgB;YACjB,UAAU;YACV;QACJ,KAAK,gBAAgB,QAAQ,gBAAgB,KAAK,IAAI,KAAK,IAAI,YAAY,QAAQ,CAAC;YAChF,UAAU;YACV;QACJ,KAAK,gBAAgB,QAAQ,gBAAgB,KAAK,IAAI,KAAK,IAAI,YAAY,QAAQ,CAAC;YAChF,UAAU;YACV;IACR;IACA,OAAO;QACH;QACA;IACJ;AACJ;AACA,SAAS,KAAK,GAAG,EAAE;IACf,OAAO,GAAG,QAAQ,CAAC,eAAe,EAAE;AACxC;AACA,SAAS,UAAU,GAAG,OAAO;IACzB,OAAO,QAAQ,QAAQ,CAAC,eAAe,OAAO;AAClD","ignoreList":[0]}},
    {"offset": {"line": 856, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 861, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/utils/tma-api.js"],"sourcesContent":["\"use strict\";\nvar _a, _b, _c, _d, _e, _f, _g;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isTmaPlatform = isTmaPlatform;\nexports.isInTMA = isInTMA;\nexports.isInTelegramBrowser = isInTelegramBrowser;\nexports.sendExpand = sendExpand;\nexports.sendOpenTelegramLink = sendOpenTelegramLink;\nexports.versionCompare = versionCompare;\nconst url_1 = require(\"./url\");\nconst log_1 = require(\"./log\");\nconst protocol_1 = require(\"../protocol\");\nconst web_api_1 = require(\"./web-api\");\nlet initParams = {};\ntry {\n    let locationHash = location.hash.toString();\n    initParams = urlParseHashParams(locationHash);\n}\ncatch (e) { }\nlet tmaPlatform = 'unknown';\nif (initParams === null || initParams === void 0 ? void 0 : initParams.tgWebAppPlatform) {\n    tmaPlatform = (_a = initParams.tgWebAppPlatform) !== null && _a !== void 0 ? _a : 'unknown';\n}\nif (tmaPlatform === 'unknown') {\n    const window = (0, url_1.getWindow)();\n    tmaPlatform = (_d = (_c = (_b = window === null || window === void 0 ? void 0 : window.Telegram) === null || _b === void 0 ? void 0 : _b.WebApp) === null || _c === void 0 ? void 0 : _c.platform) !== null && _d !== void 0 ? _d : 'unknown';\n}\nlet webAppVersion = '6.0';\nif (initParams === null || initParams === void 0 ? void 0 : initParams.tgWebAppVersion) {\n    webAppVersion = initParams.tgWebAppVersion;\n}\nif (!webAppVersion) {\n    const window = (0, url_1.getWindow)();\n    webAppVersion = (_g = (_f = (_e = window === null || window === void 0 ? void 0 : window.Telegram) === null || _e === void 0 ? void 0 : _e.WebApp) === null || _f === void 0 ? void 0 : _f.version) !== null && _g !== void 0 ? _g : '6.0';\n}\n/**\n * Returns true if the app is running in TMA on the specified platform.\n * @param platforms\n */\nfunction isTmaPlatform(...platforms) {\n    return platforms.includes(tmaPlatform);\n}\n/**\n * Returns true if the app is running in TMA.\n */\nfunction isInTMA() {\n    var _a;\n    return tmaPlatform !== 'unknown' || !!((_a = (0, url_1.getWindow)()) === null || _a === void 0 ? void 0 : _a.TelegramWebviewProxy);\n}\n/**\n * Returns true if the app is running in the Telegram browser.\n */\nfunction isInTelegramBrowser() {\n    var _a;\n    const isTelegramWebview = !!((_a = (0, url_1.getWindow)()) === null || _a === void 0 ? void 0 : _a.TelegramWebview);\n    return (isInTMA() || isTelegramWebview) && tmaPlatform === 'unknown';\n}\n/**\n * Expand the app window.\n */\nfunction sendExpand() {\n    postEvent('web_app_expand', {});\n}\n/**\n * Opens link in TMA or in new tab and returns a function that closes the tab.\n * @param link The link to open.\n * @param fallback The function to call if the link can't be opened in TMA.\n */\nfunction sendOpenTelegramLink(link, fallback) {\n    const url = new URL(link);\n    if (url.protocol !== 'http:' && url.protocol !== 'https:') {\n        if (fallback) {\n            return fallback();\n        }\n        throw new protocol_1.OKXConnectError(protocol_1.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR, `Url protocol is not supported: ${url}`);\n    }\n    if (url.hostname !== 't.me') {\n        if (fallback) {\n            return fallback();\n        }\n        throw new protocol_1.OKXConnectError(protocol_1.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR, `Url host is not supported: ${url}`);\n    }\n    const pathFull = url.pathname + url.search;\n    if (isIframe() || versionAtLeast('6.1')) {\n        postEvent('web_app_open_tg_link', { path_full: pathFull });\n    }\n    else {\n        (0, web_api_1.openLinkBlank)('https://t.me' + pathFull);\n    }\n}\nfunction isIframe() {\n    try {\n        const window = (0, url_1.getWindow)();\n        if (!window) {\n            return false;\n        }\n        return window.parent != null && window !== window.parent;\n    }\n    catch (e) {\n        return false;\n    }\n}\nfunction postEvent(eventType, eventData) {\n    try {\n        const window = (0, url_1.getWindow)();\n        if (!window) {\n            throw new protocol_1.OKXConnectError(protocol_1.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR, `Can't post event to parent window: window is not defined`);\n        }\n        if (window.TelegramWebviewProxy !== undefined) {\n            (0, log_1.logDebug)('postEvent', eventType, eventData);\n            window.TelegramWebviewProxy.postEvent(eventType, JSON.stringify(eventData));\n        }\n        else if (window.external && 'notify' in window.external) {\n            (0, log_1.logDebug)('postEvent', eventType, eventData);\n            window.external.notify(JSON.stringify({ eventType: eventType, eventData: eventData }));\n        }\n        else if (isIframe()) {\n            const trustedTarget = '*';\n            const message = JSON.stringify({ eventType: eventType, eventData: eventData });\n            (0, log_1.logDebug)('postEvent', eventType, eventData);\n            window.parent.postMessage(message, trustedTarget);\n        }\n        else {\n            throw new protocol_1.OKXConnectError(protocol_1.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR, `Can't post event to TMA`);\n        }\n    }\n    catch (e) {\n        (0, log_1.logError)(`Can't post event to parent window: ${e}`);\n    }\n}\nfunction urlParseHashParams(locationHash) {\n    locationHash = locationHash.replace(/^#/, '');\n    let params = {};\n    if (!locationHash.length) {\n        return params;\n    }\n    if (locationHash.indexOf('=') < 0 && locationHash.indexOf('?') < 0) {\n        params._path = urlSafeDecode(locationHash);\n        return params;\n    }\n    let qIndex = locationHash.indexOf('?');\n    if (qIndex >= 0) {\n        let pathParam = locationHash.substr(0, qIndex);\n        params._path = urlSafeDecode(pathParam);\n        locationHash = locationHash.substr(qIndex + 1);\n    }\n    let query_params = urlParseQueryString(locationHash);\n    for (let k in query_params) {\n        params[k] = query_params[k];\n    }\n    return params;\n}\nfunction urlSafeDecode(urlencoded) {\n    try {\n        urlencoded = urlencoded.replace(/\\+/g, '%20');\n        return decodeURIComponent(urlencoded);\n    }\n    catch (e) {\n        return urlencoded;\n    }\n}\nfunction urlParseQueryString(queryString) {\n    let params = {};\n    if (!queryString.length) {\n        return params;\n    }\n    let queryStringParams = queryString.split('&');\n    let i, param, paramName, paramValue;\n    for (i = 0; i < queryStringParams.length; i++) {\n        param = queryStringParams[i].split('=');\n        paramName = urlSafeDecode(param[0]);\n        paramValue = param[1] == null ? null : urlSafeDecode(param[1]);\n        params[paramName] = paramValue;\n    }\n    return params;\n}\nfunction versionCompare(v1, v2) {\n    if (typeof v1 !== 'string')\n        v1 = '';\n    if (typeof v2 !== 'string')\n        v2 = '';\n    let v1List = v1.replace(/^\\s+|\\s+$/g, '').split('.');\n    let v2List = v2.replace(/^\\s+|\\s+$/g, '').split('.');\n    let a, i, p1, p2;\n    a = Math.max(v1List.length, v2List.length);\n    for (i = 0; i < a; i++) {\n        p1 = parseInt(v1List[i]) || 0;\n        p2 = parseInt(v2List[i]) || 0;\n        if (p1 === p2)\n            continue;\n        if (p1 > p2)\n            return 1;\n        return -1;\n    }\n    return 0;\n}\nfunction versionAtLeast(ver) {\n    return versionCompare(webAppVersion, ver) >= 0;\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1053, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1058, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/utils/url.js"],"sourcesContent":["\"use strict\";\nvar _a, _b, _c, _d;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.removeUrlLastSlash = removeUrlLastSlash;\nexports.addPathToUrl = addPathToUrl;\nexports.getUniversalLink = getUniversalLink;\nexports.openOKXDeeplink = openOKXDeeplink;\nexports.openOKXUniversalLink = openOKXUniversalLink;\nexports.openOKXDeeplinkWithFallback = openOKXDeeplinkWithFallback;\nexports.getWindow = getWindow;\nexports.isTelegramUrl = isTelegramUrl;\nexports.encodeTelegramUrlParameters = encodeTelegramUrlParameters;\nexports.encodeConnectParams = encodeConnectParams;\nexports.encodeTWAConnectURLParams = encodeTWAConnectURLParams;\nexports.getAppWalletDeepLink = getAppWalletDeepLink;\nexports.getAppWalletShortDeepLink = getAppWalletShortDeepLink;\nexports.getTelegramWalletTWAUrl = getTelegramWalletTWAUrl;\nexports.openOKXTMAWalletlinkWithFallback = openOKXTMAWalletlinkWithFallback;\nexports.isInTMA = isInTMA;\nexports.isInTelegramBrowser = isInTelegramBrowser;\nexports.getOKXLink = getOKXLink;\nconst protocol_1 = require(\"../protocol\");\nconst log_1 = require(\"./log\");\nconst constants_1 = require(\"../protocol/constants\");\nconst utils_1 = require(\"./utils\");\nconst tma_api_1 = require(\"./tma-api\");\nfunction removeUrlLastSlash(url) {\n    if (url.slice(-1) === '/') {\n        return url.slice(0, -1);\n    }\n    return url;\n}\nfunction addPathToUrl(url, path) {\n    return removeUrlLastSlash(url) + '/' + path;\n}\nfunction getUniversalLink(deeplinkUrl, useStandardUniversalLink = false) {\n    console.log(\"getUniversalLink deeplinkUrl:\", deeplinkUrl, \", useStandardUniversalLink:\", useStandardUniversalLink);\n    const replaceStrWithParam = `${protocol_1.standardDeeplink}?param=`;\n    if (!useStandardUniversalLink && deeplinkUrl.startsWith(replaceStrWithParam)) {\n        const cleanUrl = deeplinkUrl.replace(replaceStrWithParam, '');\n        (0, log_1.logDebug)(\"getUniversalLink cleanUrl:\", cleanUrl);\n        const deeplinkEncodeUrl = encodeURIComponent(cleanUrl);\n        (0, log_1.logDebug)(\"getUniversalLink standardUniversalLink:\", protocol_1.standardUniversalLink);\n        (0, log_1.logDebug)(\"getUniversalLink `${shortUniversalLink}?param=${deeplinkEncodeUrl}`:\", `${constants_1.shortUniversalLink}?param=${deeplinkEncodeUrl}`);\n        return `${constants_1.shortUniversalLink}?param=${deeplinkEncodeUrl}`;\n    }\n    else if (!useStandardUniversalLink && deeplinkUrl == protocol_1.standardDeeplink) {\n        (0, log_1.logDebug)(\"getUniversalLink shortUniversalLink:\", constants_1.shortUniversalLink);\n        return constants_1.shortUniversalLink;\n    }\n    else {\n        const deeplinkEncodeUrl = encodeURIComponent(deeplinkUrl);\n        console.log(\"getUniversalLink standardUniversalLink:\", protocol_1.standardUniversalLink);\n        return `${protocol_1.standardUniversalLink}?deeplink=${deeplinkEncodeUrl}`;\n    }\n}\nfunction openOKXDeeplink(deeplinkUrl) {\n    var _a;\n    const fullUrl = getUniversalLink(deeplinkUrl);\n    const isTelegram = !!((_a = getWindow()) === null || _a === void 0 ? void 0 : _a.TelegramWebviewProxy);\n    console.log(\"openOKXDeeplink fullUrl:\", fullUrl);\n    if (!(0, utils_1.isIos)()) {\n        let newWindow = null;\n        if (isTelegram) {\n            newWindow = window.open(deeplinkUrl, '_blank');\n        }\n        else {\n            window.location.href = deeplinkUrl;\n        }\n    }\n    else {\n        openOKXUniversalLink(fullUrl);\n    }\n}\nfunction openOKXUniversalLink(fullUrl) {\n    if (!(0, utils_1.isIos)()) {\n        // if (isTelegram) {\n        window.open(fullUrl, '_blank');\n        // } else {\n        //     window.location.href = fullUrl;\n        // }\n    }\n    else {\n        if (isInTMA()) {\n            window.open(fullUrl, '_blank');\n        }\n        else {\n            console.log(\"windowOpen[before]: \", Date.now());\n            if (window === null || window === void 0 ? void 0 : window.okxLogDebug) {\n                window.open(fullUrl, '_blank');\n            }\n            else {\n                window.open(fullUrl, '_self');\n            }\n            console.log(\"windowOpen[after]: \", Date.now());\n        }\n    }\n}\nfunction openOKXDeeplinkWithFallback(deeplinkUrl) {\n    var _a;\n    const fullUrl = getUniversalLink(deeplinkUrl);\n    const isTelegram = !!((_a = getWindow()) === null || _a === void 0 ? void 0 : _a.TelegramWebviewProxy);\n    console.log(\"openOKXDeeplinkWithFallback fullUrl:\", fullUrl);\n    let deepLinkOpened = false;\n    const timeoutDuration = 3000; // 1.5\n    const downloadUrl = protocol_1.standardUniversalLink;\n    console.log(\"openOKXDeeplinkWithFallback standardUniversalLink:\", protocol_1.standardUniversalLink);\n    if (!(0, utils_1.isIos)()) {\n        let newWindow = null;\n        var fallbackToDownloadPage = () => {\n            if (!deepLinkOpened) {\n                if (newWindow) {\n                    newWindow.open(fullUrl, '_self');\n                }\n                else {\n                    window.open(fullUrl, '_blank');\n                }\n            }\n        };\n        if (isTelegram) {\n            newWindow = window.open(deeplinkUrl, '_blank');\n        }\n        else {\n            window.location.href = deeplinkUrl;\n        }\n        setTimeout(fallbackToDownloadPage, timeoutDuration);\n        window.addEventListener('blur', () => {\n            deepLinkOpened = true;\n        }, { once: true });\n        document.addEventListener('visibilitychange', () => {\n            if (document.visibilityState === 'hidden') {\n                deepLinkOpened = true;\n            }\n        });\n    }\n    else {\n        if (isTelegram) {\n            window.open(fullUrl, '_blank');\n        }\n        else {\n            console.log(\"windowOpen[before]: \", Date.now());\n            if (window === null || window === void 0 ? void 0 : window.okxLogDebug) {\n                window.open(fullUrl, '_blank');\n            }\n            else {\n                window.open(fullUrl, '_self');\n            }\n            console.log(\"windowOpen[after]: \", Date.now());\n        }\n    }\n}\nfunction getWindow() {\n    if (typeof window !== 'undefined') {\n        return window;\n    }\n    return undefined;\n}\nfunction isTelegramUrl(link) {\n    if (!link) {\n        return false;\n    }\n    const url = new URL(link);\n    return url.protocol === 'tg:' || url.hostname === 't.me';\n}\nfunction encodeTelegramUrlParameters(parameters) {\n    let encodedParameters = parameters;\n    encodedParameters = encodedParameters.replace(/\\./g, '%2E');\n    encodedParameters = encodedParameters.replace(/-/g, '%2D');\n    encodedParameters = encodedParameters.replace(/_/g, '%5F');\n    encodedParameters = encodedParameters.replace(/&/g, '-');\n    encodedParameters = encodedParameters.replace(/=/g, '__');\n    encodedParameters = encodedParameters.replace(/%/g, '--');\n    return encodedParameters;\n}\nfunction encodeConnectParams(connectRequest) {\n    const connectRequestStr = JSON.stringify(connectRequest);\n    (0, log_1.logDebug)(\"url encodeConnectParams connectRequestStr \", connectRequestStr);\n    const utf8Array = new TextEncoder().encode(connectRequestStr);\n    const base64Encoded = btoa(String.fromCharCode(...utf8Array));\n    // .replace(/\\+/g, '-')\n    // .replace(/\\//g, '_')\n    // .replace(/=+$/, ''); //Compatible with older versions of iOS. Cannot be added directly  (Base64 URL Safe)\n    (0, log_1.logDebug)(\"url encodeConnectParams base64Encoded \", base64Encoded);\n    return base64Encoded;\n}\nfunction encodeTWAConnectURLParams(connectRequest) {\n    const connectRequestStr = JSON.stringify({ topic: connectRequest.topic, clientId: connectRequest.clientId });\n    (0, log_1.logDebug)(\"url encodeConnectParams connectRequestStr\", connectRequestStr);\n    const utf8Array = new TextEncoder().encode(connectRequestStr);\n    const base64Encoded = btoa(String.fromCharCode(...utf8Array));\n    return base64Encoded;\n}\nfunction getAppWalletDeepLink(connectParam) {\n    return `${protocol_1.standardDeeplink}?param=${connectParam}`;\n}\nfunction getAppWalletShortDeepLink(topic, clientId) {\n    return `${constants_1.shortUniversalLink}?topic=${topic}${(0, utils_1.getLastSixMd5Hash)(clientId)}`;\n}\n//  make telegram okx wallet TWA url\nfunction getTelegramWalletTWAUrl(connectParam, redirectStr) {\n    let base64Content = { okxconnect: \"\", redirect: \"\", extraparams: \"\" };\n    if (connectParam) {\n        base64Content.okxconnect = connectParam;\n    }\n    if (redirectStr) {\n        base64Content.redirect = redirectStr;\n    }\n    let base64ContentStr = JSON.stringify(base64Content);\n    const utf8Array = new TextEncoder().encode(base64ContentStr);\n    const base64Encoded = btoa(String.fromCharCode(...utf8Array));\n    const urlSafeBase64 = (0, utils_1.toSafeBase64FromBase64)(base64Encoded);\n    (0, log_1.logDebug)('[TWA] open link:', base64Content, base64Encoded);\n    if (connectParam || redirectStr) {\n        if (!isInTMA()) {\n            // return `http://localhost:5173?tgWebAppStartParam=${urlSafeBase64}`\n            if ((0, constants_1.getTestTwaUrl)()) {\n                return `${(0, constants_1.getTestTwaUrl)()}?tgWebAppStartParam=${urlSafeBase64}`;\n            }\n            else {\n                return `tg://resolve?domain=${constants_1.tgwalletName}&appname=${constants_1.tgwalletAppName}&startapp=${urlSafeBase64}`;\n            }\n        }\n        else {\n            if ((0, constants_1.getTestTgTwaUrl)()) {\n                return `${(0, constants_1.getTestTgTwaUrl)()}?startapp=${urlSafeBase64}`;\n            }\n            else {\n                return `https://t.me/${constants_1.tgwalletName}/start?startapp=${urlSafeBase64}`;\n            }\n        }\n    }\n    if (!isInTMA()) {\n        // return \"http://localhost:5173\"\n        if ((0, constants_1.getTestTwaUrl)()) {\n            return `${(0, constants_1.getTestTwaUrl)()}`;\n        }\n        else {\n            return `tg://resolve?domain=${constants_1.tgwalletName}&appname=${constants_1.tgwalletAppName}`;\n        }\n    }\n    else {\n        if ((0, constants_1.getTestTgTwaUrl)()) {\n            return `${(0, constants_1.getTestTgTwaUrl)()}`;\n        }\n        else {\n            return `https://t.me/${constants_1.tgwalletName}/start`;\n        }\n    }\n}\n//  open TWA url in telegram\nfunction openOKXTMAWalletlinkWithFallback(twaDeepLink) {\n    var _a, _b, _c, _d, _e;\n    (0, log_1.logDebug)('[TWA] open link:', twaDeepLink, \"isInTMA ==> \", isInTMA());\n    if (!isInTMA()) {\n        if ((0, constants_1.getTestTwaUrl)()) {\n            window.open(twaDeepLink, '_blank');\n        }\n        else {\n            window.open(twaDeepLink, '_self');\n        }\n    }\n    else {\n        if ((_b = (_a = getWindow()) === null || _a === void 0 ? void 0 : _a.Telegram) === null || _b === void 0 ? void 0 : _b.WebApp) {\n            (_e = (_d = (_c = getWindow()) === null || _c === void 0 ? void 0 : _c.Telegram) === null || _d === void 0 ? void 0 : _d.WebApp) === null || _e === void 0 ? void 0 : _e.openTelegramLink(twaDeepLink);\n        }\n        else {\n            (0, tma_api_1.sendOpenTelegramLink)(twaDeepLink);\n        }\n    }\n}\n/**\n * Returns true if the app is running in TMA.\n */\nfunction urlSafeDecode(urlencoded) {\n    try {\n        urlencoded = urlencoded.replace(/\\+/g, '%20');\n        return decodeURIComponent(urlencoded);\n    }\n    catch (e) {\n        return urlencoded;\n    }\n}\nfunction urlParseQueryString(queryString) {\n    let params = {};\n    if (!queryString.length) {\n        return params;\n    }\n    let queryStringParams = queryString.split('&');\n    let i, param, paramName, paramValue;\n    for (i = 0; i < queryStringParams.length; i++) {\n        param = queryStringParams[i].split('=');\n        paramName = urlSafeDecode(param[0]);\n        paramValue = param[1] == null ? null : urlSafeDecode(param[1]);\n        params[paramName] = paramValue;\n    }\n    return params;\n}\nfunction urlParseHashParams(locationHash) {\n    locationHash = locationHash.replace(/^#/, '');\n    let params = {};\n    if (!locationHash.length) {\n        return params;\n    }\n    if (locationHash.indexOf('=') < 0 && locationHash.indexOf('?') < 0) {\n        params._path = urlSafeDecode(locationHash);\n        return params;\n    }\n    let qIndex = locationHash.indexOf('?');\n    if (qIndex >= 0) {\n        let pathParam = locationHash.substr(0, qIndex);\n        params._path = urlSafeDecode(pathParam);\n        locationHash = locationHash.substr(qIndex + 1);\n    }\n    let query_params = urlParseQueryString(locationHash);\n    for (let k in query_params) {\n        params[k] = query_params[k];\n    }\n    return params;\n}\nlet initParams = {};\ntry {\n    let locationHash = location.hash.toString();\n    initParams = urlParseHashParams(locationHash);\n}\ncatch (e) { }\nlet tmaPlatform = 'unknown';\nif (initParams === null || initParams === void 0 ? void 0 : initParams.tgWebAppPlatform) {\n    tmaPlatform = (_a = initParams.tgWebAppPlatform) !== null && _a !== void 0 ? _a : 'unknown';\n}\nif (tmaPlatform === 'unknown') {\n    const window = getWindow();\n    tmaPlatform = (_d = (_c = (_b = window === null || window === void 0 ? void 0 : window.Telegram) === null || _b === void 0 ? void 0 : _b.WebApp) === null || _c === void 0 ? void 0 : _c.platform) !== null && _d !== void 0 ? _d : 'unknown';\n}\nfunction isInTMA() {\n    var _a;\n    return tmaPlatform !== 'unknown' || !!((_a = getWindow()) === null || _a === void 0 ? void 0 : _a.TelegramWebviewProxy);\n}\n/**\n * Returns true if the app is running in the Telegram browser.\n */\nfunction isInTelegramBrowser() {\n    var _a;\n    const isTelegramWebview = !!((_a = getWindow()) === null || _a === void 0 ? void 0 : _a.TelegramWebview);\n    return (isInTMA() || isTelegramWebview) && tmaPlatform === 'unknown';\n}\nfunction getOKXLink(connectRequest, useMini = false, tmaReturnUrl) {\n    (0, log_1.logDebug)(`url  getOKXLink() called connectRequest==> ${JSON.stringify(connectRequest)}  useMini=> ${useMini}  tmaReturnUrl==> ${tmaReturnUrl}`);\n    if (useMini) {\n        var encodeTGParams = encodeTWAConnectURLParams(connectRequest);\n        return getTelegramWalletTWAUrl(encodeTGParams, tmaReturnUrl !== null && tmaReturnUrl !== void 0 ? tmaReturnUrl : \"back\");\n    }\n    else {\n        if ((0, utils_1.useShortLink)()) {\n            return getAppWalletShortDeepLink(connectRequest.topic, connectRequest.clientId);\n        }\n        else {\n            const base64Encoded = encodeConnectParams(connectRequest);\n            return `${protocol_1.standardDeeplink}?param=${base64Encoded}`;\n        }\n    }\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1403, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1408, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/utils/call-for-success.js"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.callForSuccess = callForSuccess;\nexports.delay = delay;\n/**\n * Function to call ton api until we get response.\n * Because ton network is pretty unstable we need to make sure response is final.\n * @param {T} fn - function to call\n * @param {CallForSuccessOptions} [options] - optional configuration options\n */\nfunction callForSuccess(fn, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        var _a, _b;\n        const attempts = (_a = options === null || options === void 0 ? void 0 : options.attempts) !== null && _a !== void 0 ? _a : 3;\n        const delayMs = (_b = options === null || options === void 0 ? void 0 : options.delayMs) !== null && _b !== void 0 ? _b : 800;\n        if (typeof fn !== 'function') {\n            throw new Error(`Expected a function, got ${typeof fn}`);\n        }\n        let i = 0;\n        let lastError;\n        while (i < attempts) {\n            try {\n                return yield fn();\n            }\n            catch (err) {\n                lastError = err;\n                i++;\n                if (i < attempts) {\n                    yield delay(delayMs);\n                }\n            }\n        }\n        throw lastError;\n    });\n}\n/**\n * Delays the execution of code for a specified number of milliseconds.\n * @param {number} timeout - The number of milliseconds to delay the execution.\n * @param {DelayOptions} [options] - Optional configuration options for the delay.\n * @return {Promise<void>} - A promise that resolves after the specified delay, or rejects if the delay is aborted.\n */\nfunction delay(timeout, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise((resolve, reject) => {\n            var _a, _b;\n            if ((_a = options === null || options === void 0 ? void 0 : options.signal) === null || _a === void 0 ? void 0 : _a.aborted) {\n                reject(new Error('Delay aborted'));\n                return;\n            }\n            const timeoutId = setTimeout(() => resolve(), timeout);\n            (_b = options === null || options === void 0 ? void 0 : options.signal) === null || _b === void 0 ? void 0 : _b.addEventListener('abort', () => {\n                clearTimeout(timeoutId);\n                reject(new Error('Delay aborted'));\n            });\n        });\n    });\n}\n"],"names":[],"mappings":"AAAA;AACA,IAAI,YAAY,AAAC,IAAI,IAAI,IAAI,CAAC,SAAS,IAAK,SAAU,OAAO,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS;IACnF,SAAS,MAAM,KAAK;QAAI,OAAO,iBAAiB,IAAI,QAAQ,IAAI,EAAE,SAAU,OAAO;YAAI,QAAQ;QAAQ;IAAI;IAC3G,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,OAAO,CAAC,EAAE,SAAU,OAAO,EAAE,MAAM;QACrD,SAAS,UAAU,KAAK;YAAI,IAAI;gBAAE,KAAK,UAAU,IAAI,CAAC;YAAS,EAAE,OAAO,GAAG;gBAAE,OAAO;YAAI;QAAE;QAC1F,SAAS,SAAS,KAAK;YAAI,IAAI;gBAAE,KAAK,SAAS,CAAC,QAAQ,CAAC;YAAS,EAAE,OAAO,GAAG;gBAAE,OAAO;YAAI;QAAE;QAC7F,SAAS,KAAK,MAAM;YAAI,OAAO,IAAI,GAAG,QAAQ,OAAO,KAAK,IAAI,MAAM,OAAO,KAAK,EAAE,IAAI,CAAC,WAAW;QAAW;QAC7G,KAAK,CAAC,YAAY,UAAU,KAAK,CAAC,SAAS,cAAc,EAAE,CAAC,EAAE,IAAI;IACtE;AACJ;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,cAAc,GAAG;AACzB,QAAQ,KAAK,GAAG;AAChB;;;;;CAKC,GACD,SAAS,eAAe,EAAE,EAAE,OAAO;IAC/B,OAAO,UAAU,IAAI,EAAE,KAAK,GAAG,KAAK,GAAG;QACnC,IAAI,IAAI;QACR,MAAM,WAAW,CAAC,KAAK,YAAY,QAAQ,YAAY,KAAK,IAAI,KAAK,IAAI,QAAQ,QAAQ,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK;QAC5H,MAAM,UAAU,CAAC,KAAK,YAAY,QAAQ,YAAY,KAAK,IAAI,KAAK,IAAI,QAAQ,OAAO,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK;QAC1H,IAAI,OAAO,OAAO,YAAY;YAC1B,MAAM,IAAI,MAAM,CAAC,yBAAyB,EAAE,OAAO,IAAI;QAC3D;QACA,IAAI,IAAI;QACR,IAAI;QACJ,MAAO,IAAI,SAAU;YACjB,IAAI;gBACA,OAAO,MAAM;YACjB,EACA,OAAO,KAAK;gBACR,YAAY;gBACZ;gBACA,IAAI,IAAI,UAAU;oBACd,MAAM,MAAM;gBAChB;YACJ;QACJ;QACA,MAAM;IACV;AACJ;AACA;;;;;CAKC,GACD,SAAS,MAAM,OAAO,EAAE,OAAO;IAC3B,OAAO,UAAU,IAAI,EAAE,KAAK,GAAG,KAAK,GAAG;QACnC,OAAO,IAAI,QAAQ,CAAC,SAAS;YACzB,IAAI,IAAI;YACR,IAAI,CAAC,KAAK,YAAY,QAAQ,YAAY,KAAK,IAAI,KAAK,IAAI,QAAQ,MAAM,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,OAAO,EAAE;gBACzH,OAAO,IAAI,MAAM;gBACjB;YACJ;YACA,MAAM,YAAY,WAAW,IAAM,WAAW;YAC9C,CAAC,KAAK,YAAY,QAAQ,YAAY,KAAK,IAAI,KAAK,IAAI,QAAQ,MAAM,MAAM,QAAQ,OAAO,KAAK,IAAI,KAAK,IAAI,GAAG,gBAAgB,CAAC,SAAS;gBACtI,aAAa;gBACb,OAAO,IAAI,MAAM;YACrB;QACJ;IACJ;AACJ","ignoreList":[0]}},
    {"offset": {"line": 1491, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1496, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/utils/reportconstants.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Report_WalletType_Key = exports.Report_Proceed_QRCode_Click = exports.Report_ChooseType_Download_Click = exports.Report_ChooseType_ConnectWallet_Click = exports.Report_Proceed_Retry_Click = exports.Report_ChooseType_ConnectWallet_View = exports.Report_Loading_ConnectWallet_View = exports.Report_Proceed_QRCode_View = exports.Report_Proceed_Proceed_View = void 0;\nexports.Report_Proceed_Proceed_View = \"OKXConnectSDK_Proceed_Proceed_View\";\nexports.Report_Proceed_QRCode_View = \"OKXConnectSDK_Proceed_QRCode_View\";\nexports.Report_Loading_ConnectWallet_View = \"OKXConnectSDK_Loading_ConnectWallet_View\";\nexports.Report_ChooseType_ConnectWallet_View = \"OKXConnectSDK_ChooseType_ConnectWallet_View\";\nexports.Report_Proceed_Retry_Click = \"OKXConnectSDK_Proceed_Retry_Click\";\nexports.Report_ChooseType_ConnectWallet_Click = \"OKXConnectSDK_ChooseType_ConnectWallet_Click\";\nexports.Report_ChooseType_Download_Click = \"OKXConnectSDK_ChooseType_Download_Click\";\nexports.Report_Proceed_QRCode_Click = \"OKXConnectSDK_Proceed_QRCode_Click\";\nexports.Report_WalletType_Key = 'wallet_type';\n"],"names":[],"mappings":"AAAA;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,qBAAqB,GAAG,QAAQ,2BAA2B,GAAG,QAAQ,gCAAgC,GAAG,QAAQ,qCAAqC,GAAG,QAAQ,0BAA0B,GAAG,QAAQ,oCAAoC,GAAG,QAAQ,iCAAiC,GAAG,QAAQ,0BAA0B,GAAG,QAAQ,2BAA2B,GAAG,KAAK;AACjX,QAAQ,2BAA2B,GAAG;AACtC,QAAQ,0BAA0B,GAAG;AACrC,QAAQ,iCAAiC,GAAG;AAC5C,QAAQ,oCAAoC,GAAG;AAC/C,QAAQ,0BAA0B,GAAG;AACrC,QAAQ,qCAAqC,GAAG;AAChD,QAAQ,gCAAgC,GAAG;AAC3C,QAAQ,2BAA2B,GAAG;AACtC,QAAQ,qBAAqB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 1510, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1515, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/utils/request.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.checkMetaData = checkMetaData;\nconst protocol_1 = require(\"../protocol\");\nfunction checkMetaData(dappMetaData) {\n    if (!dappMetaData) {\n        throw new protocol_1.OKXConnectError(protocol_1.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR, \"You have to specify a `dappMetaData`in the options.\");\n    }\n    if (!dappMetaData.name) {\n        throw new protocol_1.OKXConnectError(protocol_1.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR, \"dappName is required\");\n    }\n    if (!dappMetaData.icon) {\n        throw new protocol_1.OKXConnectError(protocol_1.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR, \"icon is required\");\n    }\n    return true;\n}\n"],"names":[],"mappings":"AAAA;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,aAAa,GAAG;AACxB,MAAM;AACN,SAAS,cAAc,YAAY;IAC/B,IAAI,CAAC,cAAc;QACf,MAAM,IAAI,WAAW,eAAe,CAAC,WAAW,uBAAuB,CAAC,iBAAiB,EAAE;IAC/F;IACA,IAAI,CAAC,aAAa,IAAI,EAAE;QACpB,MAAM,IAAI,WAAW,eAAe,CAAC,WAAW,uBAAuB,CAAC,iBAAiB,EAAE;IAC/F;IACA,IAAI,CAAC,aAAa,IAAI,EAAE;QACpB,MAAM,IAAI,WAAW,eAAe,CAAC,WAAW,uBAAuB,CAAC,iBAAiB,EAAE;IAC/F;IACA,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 1533, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1538, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/utils/index.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.checkMetaData = exports.versionCompare = exports.isBrowser = exports.isOS = exports.isMobileUserAgent = exports.openDeeplinkWithFallback = exports.openLinkBlank = exports.openLink = exports.useShortLink = exports.toSafeBase64FromBase64 = exports.isValidObject = exports.isIos = exports.base64decode = exports.base64encode = exports.splitToUint8Arrays = exports.concatUint8Arrays = exports.toHexString = exports.hexToByteArray = exports.getOKXLink = exports.openOKXUniversalLink = exports.getAppWalletShortDeepLink = exports.encodeTWAConnectURLParams = exports.encodeConnectParams = exports.openOKXTMAWalletlinkWithFallback = exports.getTelegramWalletTWAUrl = exports.getAppWalletDeepLink = exports.encodeTelegramUrlParameters = exports.isTelegramUrl = exports.openOKXDeeplinkWithFallback = exports.openOKXDeeplink = exports.getUniversalLink = exports.safeJsonStringify = exports.safeJsonParse = exports.getDefaultReporter = exports.reportEvent = exports.reportLog = exports.logWarning = exports.logError = exports.logDebug = exports.callForSuccess = void 0;\nvar call_for_success_1 = require(\"./call-for-success\");\nObject.defineProperty(exports, \"callForSuccess\", { enumerable: true, get: function () { return call_for_success_1.callForSuccess; } });\nvar log_1 = require(\"./log\");\nObject.defineProperty(exports, \"logDebug\", { enumerable: true, get: function () { return log_1.logDebug; } });\nObject.defineProperty(exports, \"logError\", { enumerable: true, get: function () { return log_1.logError; } });\nObject.defineProperty(exports, \"logWarning\", { enumerable: true, get: function () { return log_1.logWarning; } });\nObject.defineProperty(exports, \"reportLog\", { enumerable: true, get: function () { return log_1.reportLog; } });\nObject.defineProperty(exports, \"reportEvent\", { enumerable: true, get: function () { return log_1.reportEvent; } });\nObject.defineProperty(exports, \"getDefaultReporter\", { enumerable: true, get: function () { return log_1.getDefaultReporter; } });\n__exportStar(require(\"./reportconstants\"), exports);\n__exportStar(require(\"./report\"), exports);\nvar safejson_1 = require(\"./safejson\");\nObject.defineProperty(exports, \"safeJsonParse\", { enumerable: true, get: function () { return safejson_1.safeJsonParse; } });\nObject.defineProperty(exports, \"safeJsonStringify\", { enumerable: true, get: function () { return safejson_1.safeJsonStringify; } });\nvar url_1 = require(\"./url\");\nObject.defineProperty(exports, \"getUniversalLink\", { enumerable: true, get: function () { return url_1.getUniversalLink; } });\nObject.defineProperty(exports, \"openOKXDeeplink\", { enumerable: true, get: function () { return url_1.openOKXDeeplink; } });\nObject.defineProperty(exports, \"openOKXDeeplinkWithFallback\", { enumerable: true, get: function () { return url_1.openOKXDeeplinkWithFallback; } });\nObject.defineProperty(exports, \"isTelegramUrl\", { enumerable: true, get: function () { return url_1.isTelegramUrl; } });\nObject.defineProperty(exports, \"encodeTelegramUrlParameters\", { enumerable: true, get: function () { return url_1.encodeTelegramUrlParameters; } });\nObject.defineProperty(exports, \"getAppWalletDeepLink\", { enumerable: true, get: function () { return url_1.getAppWalletDeepLink; } });\nObject.defineProperty(exports, \"getTelegramWalletTWAUrl\", { enumerable: true, get: function () { return url_1.getTelegramWalletTWAUrl; } });\nObject.defineProperty(exports, \"openOKXTMAWalletlinkWithFallback\", { enumerable: true, get: function () { return url_1.openOKXTMAWalletlinkWithFallback; } });\nObject.defineProperty(exports, \"encodeConnectParams\", { enumerable: true, get: function () { return url_1.encodeConnectParams; } });\nObject.defineProperty(exports, \"encodeTWAConnectURLParams\", { enumerable: true, get: function () { return url_1.encodeTWAConnectURLParams; } });\nObject.defineProperty(exports, \"getAppWalletShortDeepLink\", { enumerable: true, get: function () { return url_1.getAppWalletShortDeepLink; } });\nObject.defineProperty(exports, \"openOKXUniversalLink\", { enumerable: true, get: function () { return url_1.openOKXUniversalLink; } });\nObject.defineProperty(exports, \"getOKXLink\", { enumerable: true, get: function () { return url_1.getOKXLink; } });\nvar utils_1 = require(\"./utils\");\nObject.defineProperty(exports, \"hexToByteArray\", { enumerable: true, get: function () { return utils_1.hexToByteArray; } });\nObject.defineProperty(exports, \"toHexString\", { enumerable: true, get: function () { return utils_1.toHexString; } });\nObject.defineProperty(exports, \"concatUint8Arrays\", { enumerable: true, get: function () { return utils_1.concatUint8Arrays; } });\nObject.defineProperty(exports, \"splitToUint8Arrays\", { enumerable: true, get: function () { return utils_1.splitToUint8Arrays; } });\nObject.defineProperty(exports, \"base64encode\", { enumerable: true, get: function () { return utils_1.base64encode; } });\nObject.defineProperty(exports, \"base64decode\", { enumerable: true, get: function () { return utils_1.base64decode; } });\nObject.defineProperty(exports, \"isIos\", { enumerable: true, get: function () { return utils_1.isIos; } });\nObject.defineProperty(exports, \"isValidObject\", { enumerable: true, get: function () { return utils_1.isValidObject; } });\nObject.defineProperty(exports, \"toSafeBase64FromBase64\", { enumerable: true, get: function () { return utils_1.toSafeBase64FromBase64; } });\nObject.defineProperty(exports, \"useShortLink\", { enumerable: true, get: function () { return utils_1.useShortLink; } });\nvar web_api_1 = require(\"./web-api\");\nObject.defineProperty(exports, \"openLink\", { enumerable: true, get: function () { return web_api_1.openLink; } });\nObject.defineProperty(exports, \"openLinkBlank\", { enumerable: true, get: function () { return web_api_1.openLinkBlank; } });\nObject.defineProperty(exports, \"openDeeplinkWithFallback\", { enumerable: true, get: function () { return web_api_1.openDeeplinkWithFallback; } });\nObject.defineProperty(exports, \"isMobileUserAgent\", { enumerable: true, get: function () { return web_api_1.isMobileUserAgent; } });\nObject.defineProperty(exports, \"isOS\", { enumerable: true, get: function () { return web_api_1.isOS; } });\nObject.defineProperty(exports, \"isBrowser\", { enumerable: true, get: function () { return web_api_1.isBrowser; } });\nvar tma_api_1 = require(\"./tma-api\");\nObject.defineProperty(exports, \"versionCompare\", { enumerable: true, get: function () { return tma_api_1.versionCompare; } });\nvar request_1 = require(\"./request\");\nObject.defineProperty(exports, \"checkMetaData\", { enumerable: true, get: function () { return request_1.checkMetaData; } });\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1812, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1817, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/utils/report.js"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OKXReporter = exports.OKXReportSide = exports.OKXReportType = exports.versionStr = void 0;\nconst cross_fetch_1 = __importDefault(require(\"cross-fetch\"));\nconst log_1 = require(\"./log\");\nconst url_1 = require(\"./url\");\nconst utils_1 = require(\"../utils\");\nconst localforage_1 = __importDefault(require(\"localforage\"));\nconst tweetnacl_1 = __importDefault(require(\"tweetnacl\"));\nexports.versionStr = '1.6.1';\nconst reportApiList = [\n    'https://www.okx.com/dappstat/wallet-connect',\n    'https://www.okx.ac/dappstat/wallet-connect'\n];\nconst reportCacheKey = 'OKX_RP_CK';\nconst reportUUIDKey = 'OKX_RP_UUID_CK';\nconst MAX_LIMIT_REPORTCOUNT = 100;\nconst DEFAULT_HTTP_HEADERS = {\n    Accept: \"*/*\",\n    \"Content-Type\": \"text/plain\",\n};\nconst DEFAULT_HTTP_METHOD = \"POST\";\nconst DEFAULT_FETCH_OPTS = {\n    headers: DEFAULT_HTTP_HEADERS,\n    method: DEFAULT_HTTP_METHOD,\n};\nexports.OKXReportType = {\n    PAGE_IN: 'page_in',\n    PAGE_OUT: 'page_out',\n    CLICK: 'click',\n    LOG: 'log',\n};\nexports.OKXReportSide = {\n    DAPP: 'dapp',\n    WALLET: 'wallet',\n};\nclass IReporter {\n}\nconst fetchWithTimeout = (url, options, timeout = 5000) => {\n    const controller = new AbortController();\n    const signal = controller.signal;\n    const fetchPromise = (0, cross_fetch_1.default)(url, Object.assign(Object.assign({}, options), { signal }));\n    const timeoutPromise = new Promise((_, reject) => setTimeout(() => {\n        controller.abort();\n        reject(new Error('Request timed out'));\n    }, timeout));\n    return Promise.race([fetchPromise, timeoutPromise]);\n};\nconst fetchListWithTimeout = (urls_1, ...args_1) => __awaiter(void 0, [urls_1, ...args_1], void 0, function* (urls, options = {}, timeout = 5000) {\n    for (const url of urls) {\n        try {\n            const controller = new AbortController();\n            const signal = controller.signal;\n            const fetchPromise = (0, cross_fetch_1.default)(url, Object.assign(Object.assign({}, options), { signal }));\n            const timeoutPromise = new Promise((_, reject) => setTimeout(() => {\n                controller.abort();\n                reject(new Error('Request timed out'));\n            }, timeout));\n            const response = yield Promise.race([fetchPromise, timeoutPromise]);\n            if (response.ok) {\n                return response;\n            }\n            if (response.status == 502) {\n                console.error(`Fetch error status 502`, url);\n                return response;\n            }\n        }\n        catch (error) {\n            console.error(`Fetch error for ${url}:`, error);\n        }\n    }\n    console.error(`'All fetch attempts failed.'`);\n    throw new Error('All fetch attempts failed.');\n});\nclass OKXReporter {\n    constructor() {\n        this.currentSide = exports.OKXReportSide.DAPP;\n        this.currentVersion = exports.versionStr;\n        this.storage = localforage_1.default.createInstance({\n            name: \"OKXReporter\"\n        });\n        this.recordList = new Array();\n        this.currentUUID = (0, utils_1.toHexString)(tweetnacl_1.default.randomBytes(16));\n    }\n    configVersionAndSide(version, side, appname) {\n        this.currentVersion = version;\n        this.currentSide = side;\n        this.appName = appname;\n    }\n    get recordCacheKey() {\n        return reportCacheKey + \"@\" + this.appName;\n    }\n    get reportPlatform() {\n        if ((0, utils_1.isMobileUserAgent)()) {\n            if ((0, utils_1.isIos)()) {\n                return 'iOS';\n            }\n            else {\n                return 'android';\n            }\n        }\n        else {\n            return 'pc';\n        }\n    }\n    beginReport() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.startErrorCatching();\n            let records = yield this.storage.getItem(this.recordCacheKey);\n            let uuid = yield this.storage.getItem(reportUUIDKey);\n            if (uuid) {\n                this.currentUUID = uuid;\n            }\n            else {\n                this.storage.setItem(reportUUIDKey, this.currentUUID);\n            }\n            if (records) {\n                this.recordList = records;\n                (0, log_1.logDebug)('resume records from cache length: ', this.recordList.length);\n                yield this.sendCachedRecords();\n            }\n        });\n    }\n    startErrorCatching() {\n        let window = (0, url_1.getWindow)();\n        if (window) {\n            (0, log_1.logDebug)('begin capture console error');\n            // window.onerror = (event: Event | string, source?: string, lineno?: number, colno?: number, error?: Error) => {\n            //     logDebug('capture error info:', error, source)\n            //     this.markRecord(error?.message+'/'+error?.name+'/'+error?.stack, OKXReportType.LOG, '', this.currentSide)\n            // }\n        }\n    }\n    cachedErrors() {\n        return this.recordList;\n    }\n    sendRecord(record) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    const body = JSON.stringify(record);\n                    (0, log_1.logDebug)('[REPORT] record: ', body);\n                    const res = yield fetchListWithTimeout(reportApiList, Object.assign(Object.assign({}, DEFAULT_FETCH_OPTS), { body: body }));\n                    (0, log_1.logDebug)('[REPORT] get rsp:', res);\n                    if (res && res.status && res.status == 200) {\n                        this.recordList = this.recordList.filter((item) => {\n                            return item.timestamp != record.timestamp || item.content != record.content;\n                        });\n                        yield this.storage.setItem(this.recordCacheKey, this.recordList);\n                        resolve(true);\n                    }\n                    else {\n                        reject(false);\n                    }\n                }\n                catch (e) {\n                    (0, log_1.logDebug)('send record error:', e);\n                    resolve(true);\n                    // reject(e)\n                }\n            }));\n        });\n    }\n    sendRecordContent(content, type, action) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a, _b, _c, _d;\n            let path = (_a = (0, url_1.getWindow)()) === null || _a === void 0 ? void 0 : _a.location.pathname;\n            let location = (_b = (0, url_1.getWindow)()) === null || _b === void 0 ? void 0 : _b.location.origin;\n            if (path && location) {\n                location = location + path;\n            }\n            let language = (_c = (0, url_1.getWindow)()) === null || _c === void 0 ? void 0 : _c.navigator.language;\n            let ua = (_d = (0, url_1.getWindow)()) === null || _d === void 0 ? void 0 : _d.navigator.userAgent;\n            let platform = this.reportPlatform;\n            let reportItem = {\n                uuid: this.currentUUID,\n                version: this.currentVersion,\n                content: content,\n                action: action,\n                side: this.currentSide,\n                timestamp: new Date().getTime(),\n                url: location,\n                lang: language,\n                type: type,\n                platform: platform,\n                \"user-agent\": ua\n            };\n            yield this.markRecordItem(reportItem);\n            yield this.sendRecord(reportItem);\n        });\n    }\n    sendCachedRecords() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\n                let sendList = this.recordList.map(record => this.sendRecord(record));\n                (0, log_1.logDebug)('[REPORT] submit & clean recorded caches begin @', new Date().toUTCString());\n                Promise.allSettled(sendList).then((results) => {\n                    (0, log_1.logDebug)('[REPORT] submit & clean recorded caches ends @', new Date().toUTCString());\n                    let keepIndex = [];\n                    results.forEach((result, index) => {\n                        if (result.status == \"rejected\") {\n                            keepIndex.push(index);\n                        }\n                    });\n                    this.recordList = this.recordList.filter((_, index) => !keepIndex.includes(index));\n                    this.storage.setItem(this.recordCacheKey, this.recordList).then(function (value) {\n                        resolve();\n                    }).catch(function (err) {\n                        reject(err);\n                    });\n                });\n            }));\n        });\n    }\n    markRecordItem(item) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.recordList.push(item);\n            if (this.recordList.length > MAX_LIMIT_REPORTCOUNT) {\n                let offset = this.recordList.length - MAX_LIMIT_REPORTCOUNT;\n                this.recordList.splice(0, offset);\n            }\n            return new Promise((resolve, reject) => {\n                this.storage.setItem(this.recordCacheKey, this.recordList).then(function (value) {\n                    resolve(item);\n                }).catch(function (err) {\n                    reject(err);\n                });\n            });\n        });\n    }\n    markRecord(content, type, action, side) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a, _b, _c, _d;\n            let path = (_a = (0, url_1.getWindow)()) === null || _a === void 0 ? void 0 : _a.location.pathname;\n            let location = (_b = (0, url_1.getWindow)()) === null || _b === void 0 ? void 0 : _b.location.origin;\n            if (path && location) {\n                location = location + path;\n            }\n            let language = (_c = (0, url_1.getWindow)()) === null || _c === void 0 ? void 0 : _c.navigator.language;\n            let platform = this.reportPlatform;\n            let ua = (_d = (0, url_1.getWindow)()) === null || _d === void 0 ? void 0 : _d.navigator.userAgent;\n            let reportItem = {\n                uuid: this.currentUUID,\n                version: this.currentVersion,\n                content: content,\n                action: action,\n                side: side,\n                timestamp: new Date().getTime(),\n                url: location,\n                lang: language,\n                type: type,\n                platform: platform,\n                \"user-agent\": ua\n            };\n            return yield this.markRecordItem(reportItem);\n        });\n    }\n}\nexports.OKXReporter = OKXReporter;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 2119, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2129, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/utils/log.js"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getDefaultReporter = getDefaultReporter;\nexports.logDebug = logDebug;\nexports.logError = logError;\nexports.logWarning = logWarning;\nexports.reportEvent = reportEvent;\nexports.reportLog = reportLog;\nconst debug = false;\nconst forceReport = false;\nconst report_1 = require(\"./report\");\nconst defaultReporter = new report_1.OKXReporter();\nfunction getDefaultReporter() {\n    return defaultReporter;\n}\nconst packageJson = require('../../package.json');\nconst version = packageJson.version;\nfunction logDebug(...args) {\n    if (typeof console != 'undefined') {\n        try {\n            if (debug || (window === null || window === void 0 ? void 0 : window.okxLogDebug)) {\n                console.log(`[OKX_CONNECT_SDK] ${version} `, ...args);\n            }\n        }\n        catch (_a) { }\n    }\n}\nfunction logError(...args) {\n    if (typeof console != 'undefined') {\n        try {\n            if (debug || (window === null || window === void 0 ? void 0 : window.okxLogDebug)) {\n                console.error(`[OKX_CONNECT_SDK] ${version} `, ...args);\n            }\n            if (forceReport || !debug) {\n                let content = '';\n                content += [...args].reduce((result, item) => {\n                    if (typeof item == 'string') {\n                        result += ',' + item;\n                    }\n                    else if (typeof item == 'object') {\n                        result += JSON.stringify(item);\n                    }\n                });\n                defaultReporter.sendRecordContent(content, report_1.OKXReportType.LOG, '');\n            }\n        }\n        catch (_a) { }\n    }\n}\nfunction logWarning(...args) {\n    if (typeof console != 'undefined') {\n        try {\n            if (debug || (window === null || window === void 0 ? void 0 : window.okxLogDebug)) {\n                console.warn(`[OKX_CONNECT_SDK] ${version} `, ...args);\n            }\n        }\n        catch (_a) { }\n    }\n}\nfunction reportEvent(type, action, content) {\n    return __awaiter(this, void 0, void 0, function* () {\n        yield defaultReporter.sendRecordContent(content, type, action);\n    });\n}\nfunction reportLog(content_1) {\n    return __awaiter(this, arguments, void 0, function* (content, action = 'default') {\n        // await defaultReporter.sendRecordContent(content, OKXReportType.LOG, action)\n    });\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 2225, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2230, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/utils/safejson.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.safeJsonParse = safeJsonParse;\nexports.safeJsonStringify = safeJsonStringify;\nconst log_1 = require(\"./log\");\nconst JSONStringify = (data) => JSON.stringify(data, (_, value) => (typeof value === \"bigint\" ? value.toString() + \"n\" : value));\n/*\n  Function to parse JSON.\n  If JSON has values in our custom format BigInt (strings with \"n\" character at the end), we just parse them to BigInt values.\n  If JSON has big number values, but not in our custom format, we copy it, and in a copy we convert those values to our custom format,\n  then parse them to BigInt values.\n  Other values (not big numbers and not our custom format BigInt values) are not affected and parsed as native JSON.parse() would parse them.\n*/\nconst JSONParse = (json) => {\n    /*\n      Big numbers are found and marked using Regex with this condition:\n      Number's length is bigger than 16 || Number's length is 16 and any numerical digit of the number is greater than that of the Number.MAX_SAFE_INTEGER\n      Additionally, it skips values that are strings (between double quotes).\n      */\n    // prettier-ignore\n    // eslint-disable-next-line no-useless-escape\n    const numbersBiggerThanMaxInt = /:(\\b\\d{17,}|\\b(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))(?=[,\\}\\]]|$)/g;\n    const serializedData = json.replace(numbersBiggerThanMaxInt, (match, group) => `:\"${group}n\"`);\n    try {\n        return JSON.parse(serializedData, (_, value) => {\n            const isCustomFormatBigInt = typeof value === \"string\" && value.match(/^\\d+n$/);\n            if (isCustomFormatBigInt)\n                return BigInt(value.substring(0, value.length - 1));\n            return value;\n        });\n    }\n    catch (e) {\n        return JSON.parse(json);\n    }\n};\nfunction safeJsonParse(value) {\n    if (typeof value !== \"string\") {\n        (0, log_1.logDebug)(value);\n        throw new Error(`Cannot safe json parse value of type ${typeof value}`);\n    }\n    try {\n        return JSONParse(value);\n    }\n    catch (e) {\n        // eslint-disable-next-line no-console\n        console.error(\"safeJsonParse error:\", e);\n        return value;\n    }\n}\nfunction safeJsonStringify(value) {\n    return typeof value === \"string\" ? value : JSONStringify(value) || \"\";\n}\n"],"names":[],"mappings":"AAAA;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,aAAa,GAAG;AACxB,QAAQ,iBAAiB,GAAG;AAC5B,MAAM;AACN,MAAM,gBAAgB,CAAC,OAAS,KAAK,SAAS,CAAC,MAAM,CAAC,GAAG,QAAW,OAAO,UAAU,WAAW,MAAM,QAAQ,KAAK,MAAM;AACzH;;;;;;AAMA,GACA,MAAM,YAAY,CAAC;IACf;;;;MAIE,GACF,kBAAkB;IAClB,6CAA6C;IAC7C,MAAM,0BAA0B;IAChC,MAAM,iBAAiB,KAAK,OAAO,CAAC,yBAAyB,CAAC,OAAO,QAAU,CAAC,EAAE,EAAE,MAAM,EAAE,CAAC;IAC7F,IAAI;QACA,OAAO,KAAK,KAAK,CAAC,gBAAgB,CAAC,GAAG;YAClC,MAAM,uBAAuB,OAAO,UAAU,YAAY,MAAM,KAAK,CAAC;YACtE,IAAI,sBACA,OAAO,OAAO,MAAM,SAAS,CAAC,GAAG,MAAM,MAAM,GAAG;YACpD,OAAO;QACX;IACJ,EACA,OAAO,GAAG;QACN,OAAO,KAAK,KAAK,CAAC;IACtB;AACJ;AACA,SAAS,cAAc,KAAK;IACxB,IAAI,OAAO,UAAU,UAAU;QAC3B,CAAC,GAAG,MAAM,QAAQ,EAAE;QACpB,MAAM,IAAI,MAAM,CAAC,qCAAqC,EAAE,OAAO,OAAO;IAC1E;IACA,IAAI;QACA,OAAO,UAAU;IACrB,EACA,OAAO,GAAG;QACN,sCAAsC;QACtC,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO;IACX;AACJ;AACA,SAAS,kBAAkB,KAAK;IAC5B,OAAO,OAAO,UAAU,WAAW,QAAQ,cAAc,UAAU;AACvE","ignoreList":[0]}},
    {"offset": {"line": 2279, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2284, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/utils/stringUtils.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.okxfromString = okxfromString;\nexports.okxtoString = okxtoString;\nexports.alloc = alloc;\nexports.allocUnsafe = allocUnsafe;\nconst basics_1 = require(\"multiformats/basics\");\nconst log_1 = require(\"../utils/log\");\nfunction okxfromString(string, encoding = 'utf8') {\n    const base = BASES[encoding];\n    (0, log_1.logDebug)(\"okxfromstring ====> \");\n    if (!base) {\n        throw new Error(`Unsupported encoding \"${encoding}\"`);\n    }\n    return base.decoder.decode(`${base.prefix}${string}`);\n}\nfunction okxtoString(array, encoding = 'utf8') {\n    const base = BASES[encoding];\n    (0, log_1.logDebug)(\"okxtoString ====> \");\n    if (!base) {\n        throw new Error(`Unsupported encoding \"${encoding}\"`);\n    }\n    return base.encoder.encode(array).substring(1);\n}\nfunction alloc(size = 0) {\n    return new Uint8Array(size);\n}\nfunction allocUnsafe(size = 0) {\n    return new Uint8Array(size);\n}\nfunction createCodec(name, prefix, encode, decode) {\n    return {\n        name,\n        prefix,\n        encoder: {\n            name,\n            prefix,\n            encode\n        },\n        decoder: { decode }\n    };\n}\nconst string = createCodec('utf8', 'u', buf => {\n    const decoder = new TextDecoder('utf8');\n    return 'u' + decoder.decode(buf);\n}, str => {\n    const encoder = new TextEncoder();\n    return encoder.encode(str.substring(1));\n});\nconst ascii = createCodec('ascii', 'a', buf => {\n    let result = 'a';\n    for (let i = 0; i < buf.length; i++) {\n        let bufNum = buf[i];\n        if (bufNum && String.fromCharCode(bufNum)) {\n            result += String.fromCharCode(bufNum);\n        }\n    }\n    return result;\n}, str => {\n    str = str.substring(1);\n    const buf = allocUnsafe(str.length);\n    for (let i = 0; i < str.length; i++) {\n        buf[i] = str.charCodeAt(i);\n    }\n    return buf;\n});\nconst BASES = Object.assign({ utf8: string, 'utf-8': string, hex: basics_1.bases.base16, latin1: ascii, ascii: ascii, binary: ascii }, basics_1.bases);\n"],"names":[],"mappings":"AAAA;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,aAAa,GAAG;AACxB,QAAQ,WAAW,GAAG;AACtB,QAAQ,KAAK,GAAG;AAChB,QAAQ,WAAW,GAAG;AACtB,MAAM;AACN,MAAM;AACN,SAAS,cAAc,MAAM,EAAE,WAAW,MAAM;IAC5C,MAAM,OAAO,KAAK,CAAC,SAAS;IAC5B,CAAC,GAAG,MAAM,QAAQ,EAAE;IACpB,IAAI,CAAC,MAAM;QACP,MAAM,IAAI,MAAM,CAAC,sBAAsB,EAAE,SAAS,CAAC,CAAC;IACxD;IACA,OAAO,KAAK,OAAO,CAAC,MAAM,CAAC,GAAG,KAAK,MAAM,GAAG,QAAQ;AACxD;AACA,SAAS,YAAY,KAAK,EAAE,WAAW,MAAM;IACzC,MAAM,OAAO,KAAK,CAAC,SAAS;IAC5B,CAAC,GAAG,MAAM,QAAQ,EAAE;IACpB,IAAI,CAAC,MAAM;QACP,MAAM,IAAI,MAAM,CAAC,sBAAsB,EAAE,SAAS,CAAC,CAAC;IACxD;IACA,OAAO,KAAK,OAAO,CAAC,MAAM,CAAC,OAAO,SAAS,CAAC;AAChD;AACA,SAAS,MAAM,OAAO,CAAC;IACnB,OAAO,IAAI,WAAW;AAC1B;AACA,SAAS,YAAY,OAAO,CAAC;IACzB,OAAO,IAAI,WAAW;AAC1B;AACA,SAAS,YAAY,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM;IAC7C,OAAO;QACH;QACA;QACA,SAAS;YACL;YACA;YACA;QACJ;QACA,SAAS;YAAE;QAAO;IACtB;AACJ;AACA,MAAM,SAAS,YAAY,QAAQ,KAAK,CAAA;IACpC,MAAM,UAAU,IAAI,YAAY;IAChC,OAAO,MAAM,QAAQ,MAAM,CAAC;AAChC,GAAG,CAAA;IACC,MAAM,UAAU,IAAI;IACpB,OAAO,QAAQ,MAAM,CAAC,IAAI,SAAS,CAAC;AACxC;AACA,MAAM,QAAQ,YAAY,SAAS,KAAK,CAAA;IACpC,IAAI,SAAS;IACb,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,MAAM,EAAE,IAAK;QACjC,IAAI,SAAS,GAAG,CAAC,EAAE;QACnB,IAAI,UAAU,OAAO,YAAY,CAAC,SAAS;YACvC,UAAU,OAAO,YAAY,CAAC;QAClC;IACJ;IACA,OAAO;AACX,GAAG,CAAA;IACC,MAAM,IAAI,SAAS,CAAC;IACpB,MAAM,MAAM,YAAY,IAAI,MAAM;IAClC,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,MAAM,EAAE,IAAK;QACjC,GAAG,CAAC,EAAE,GAAG,IAAI,UAAU,CAAC;IAC5B;IACA,OAAO;AACX;AACA,MAAM,QAAQ,OAAO,MAAM,CAAC;IAAE,MAAM;IAAQ,SAAS;IAAQ,KAAK,SAAS,KAAK,CAAC,MAAM;IAAE,QAAQ;IAAO,OAAO;IAAO,QAAQ;AAAM,GAAG,SAAS,KAAK","ignoreList":[0]}},
    {"offset": {"line": 2362, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2367, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/utils/utils.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isValidObject = exports.RANDOM_LENGTH = exports.isBrowser = exports.resolveLocalStorage = exports.hasLocalStorage = exports.hasBuiltInWebSocket = exports.resolveWebSocketImplementation = void 0;\nexports.hexToByteArray = hexToByteArray;\nexports.toHexString = toHexString;\nexports.concatUint8Arrays = concatUint8Arrays;\nexports.splitToUint8Arrays = splitToUint8Arrays;\nexports.base64encode = base64encode;\nexports.base64decode = base64decode;\nexports.checkWSUrl = checkWSUrl;\nexports.hashKey = hashKey;\nexports.generateRandomBytes32 = generateRandomBytes32;\nexports.generateTopic = generateTopic;\nexports.isIos = isIos;\nexports.getLastSixMd5Hash = getLastSixMd5Hash;\nexports.toSafeBase64FromBase64 = toSafeBase64FromBase64;\nexports.useShortLink = useShortLink;\nconst tweetnacl_1 = __importDefault(require(\"tweetnacl\"));\nconst tweetnacl_util_1 = __importDefault(require(\"tweetnacl-util\"));\nconst to_string_1 = require(\"uint8arrays/to-string\");\nconst sha256_1 = require(\"@stablelib/sha256\");\nconst safejson_1 = require(\"./safejson\");\nconst log_1 = require(\"./log\");\nconst stringUtils_1 = require(\"../utils/stringUtils\");\nconst crypto_js_1 = __importDefault(require(\"crypto-js\"));\nconst BASE16 = \"base16\";\nfunction hexToByteArray(hexString) {\n    if (hexString.length % 2 !== 0) {\n        throw new Error(`Cannot convert ${hexString} to bytesArray`);\n    }\n    const result = new Uint8Array(hexString.length / 2);\n    for (let i = 0; i < hexString.length; i += 2) {\n        result[i / 2] = parseInt(hexString.slice(i, i + 2), 16);\n    }\n    return result;\n}\nfunction toHexString(byteArray) {\n    let hexString = '';\n    byteArray.forEach(byte => {\n        hexString += ('0' + (byte & 0xff).toString(16)).slice(-2);\n    });\n    return hexString;\n}\nfunction concatUint8Arrays(buffer1, buffer2) {\n    const mergedArray = new Uint8Array(buffer1.length + buffer2.length);\n    mergedArray.set(buffer1);\n    mergedArray.set(buffer2, buffer1.length);\n    return mergedArray;\n}\nfunction splitToUint8Arrays(array, index) {\n    if (index >= array.length) {\n        throw new Error('Index is out of buffer');\n    }\n    const subArray1 = array.slice(0, index);\n    const subArray2 = array.slice(index);\n    return [subArray1, subArray2];\n}\nfunction encodeUint8Array(value, urlSafe) {\n    const encoded = tweetnacl_util_1.default.encodeBase64(value);\n    if (!urlSafe) {\n        return encoded;\n    }\n    return encodeURIComponent(encoded);\n}\nfunction decodeToUint8Array(value, urlSafe) {\n    if (urlSafe) {\n        value = decodeURIComponent(value);\n    }\n    return tweetnacl_util_1.default.decodeBase64(value);\n}\nfunction base64encode(value, urlSafe) {\n    let uint8Array;\n    if (value instanceof Uint8Array) {\n        uint8Array = value;\n    }\n    else {\n        if (typeof value !== 'string') {\n            value = (0, safejson_1.safeJsonStringify)(value);\n        }\n        uint8Array = tweetnacl_util_1.default.decodeUTF8(value);\n    }\n    return encodeUint8Array(uint8Array, urlSafe);\n}\nfunction base64decode(value, urlSafe) {\n    const decodedUint8Array = decodeToUint8Array(value, urlSafe);\n    return {\n        toString() {\n            return tweetnacl_util_1.default.encodeUTF8(decodedUint8Array);\n        },\n        toObject() {\n            try {\n                return (0, safejson_1.safeJsonParse)(tweetnacl_util_1.default.encodeUTF8(decodedUint8Array));\n            }\n            catch (e) {\n                return null;\n            }\n        },\n        toUint8Array() {\n            return decodedUint8Array;\n        }\n    };\n}\nfunction checkWSUrl(url) {\n    const match = url.match(new RegExp(/^\\w+:/, \"gi\"));\n    if (!match || !match.length) {\n        return false;\n    }\n    let scheme = match[0];\n    if (scheme === undefined) {\n        return false;\n    }\n    return new RegExp(\"^wss?:\").test(scheme);\n}\nconst resolveWebSocketImplementation = () => {\n    if (typeof WebSocket !== \"undefined\") {\n        return WebSocket;\n    }\n    else if (typeof global !== \"undefined\" && typeof global.WebSocket !== \"undefined\") {\n        return global.WebSocket;\n    }\n    else if (typeof window !== \"undefined\" && typeof window.WebSocket !== \"undefined\") {\n        return window.WebSocket;\n    }\n    else if (typeof self !== \"undefined\" && typeof self.WebSocket !== \"undefined\") {\n        return self.WebSocket;\n    }\n    return WebSocket;\n    //\n    // return require(\"ws\");\n};\nexports.resolveWebSocketImplementation = resolveWebSocketImplementation;\nconst hasBuiltInWebSocket = () => typeof WebSocket !== \"undefined\" ||\n    (typeof global !== \"undefined\" && typeof global.WebSocket !== \"undefined\") ||\n    (typeof window !== \"undefined\" && typeof window.WebSocket !== \"undefined\") ||\n    (typeof self !== \"undefined\" && typeof self.WebSocket !== \"undefined\");\nexports.hasBuiltInWebSocket = hasBuiltInWebSocket;\nconst hasLocalStorage = () => (typeof global !== \"undefined\" && (typeof global.localStorage !== \"undefined\")) ||\n    (typeof window !== \"undefined\" && typeof window.localStorage !== \"undefined\");\nexports.hasLocalStorage = hasLocalStorage;\nconst resolveLocalStorage = () => {\n    if (typeof global !== \"undefined\" && typeof global.localStorage !== \"undefined\") {\n        return global.localStorage;\n    }\n    else if (typeof window !== \"undefined\" && typeof window.localStorage !== \"undefined\") {\n        return window.localStorage;\n    }\n    return localStorage;\n};\nexports.resolveLocalStorage = resolveLocalStorage;\nconst isBrowser = () => typeof window !== \"undefined\";\nexports.isBrowser = isBrowser;\nexports.RANDOM_LENGTH = 32;\nfunction hashKey(key, encode = BASE16) {\n    (0, log_1.logDebug)(`hash key called ${key}`);\n    const result = (0, sha256_1.hash)((0, stringUtils_1.okxfromString)(key, encode));\n    return (0, to_string_1.toString)(result, encode);\n}\nfunction generateRandomBytes32() {\n    return tweetnacl_1.default.randomBytes(exports.RANDOM_LENGTH);\n}\nfunction generateTopic() {\n    let randomBytes32 = generateRandomBytes32();\n    (0, log_1.logDebug)(`generate topic called ${randomBytes32}`);\n    return hashKey((0, to_string_1.toString)(randomBytes32, BASE16));\n}\nconst isValidObject = (obj) => Object.getPrototypeOf(obj) === Object.prototype && Object.keys(obj).length;\nexports.isValidObject = isValidObject;\nfunction isIos() {\n    const userAgent = navigator.userAgent;\n    const maxTouchPoints = navigator.maxTouchPoints || 0;\n    //  iPhoneiPod  iPad\n    const isIOSDevice = /iPad|iPhone|iPod/.test(userAgent) && !window.MSStream;\n    //  iPadOS 13 \n    const isIPadOS = (userAgent.includes('Mac') && maxTouchPoints > 1);\n    (0, log_1.logDebug)(`utils isIos >>>isIOSDevice: ${isIOSDevice}    >> isIPadOS: ${isIPadOS}`);\n    //  iOS  iPadOS  true\n    return isIOSDevice || isIPadOS;\n}\nfunction getLastSixMd5Hash(input) {\n    //  MD5 \n    const hash = crypto_js_1.default.MD5(input).toString();\n    // \n    return hash.slice(-6);\n}\nfunction toSafeBase64FromBase64(base64) {\n    return base64\n        .replace(/=/g, \"\")\n        .replace(/\\+/g, \"-\")\n        .replace(/\\//g, \"_\");\n}\nfunction useShortLink() {\n    return !!window.useShortLink;\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 2557, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2562, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/connect/storage.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Storage = void 0;\nconst storageconstants_1 = require(\"./storageconstants\");\nconst tweetnacl_1 = __importDefault(require(\"tweetnacl\"));\nconst utils_1 = require(\"../utils/utils\");\nconst utils_2 = require(\"../utils\");\nconst log = __importStar(require(\"../utils/log\"));\nconst utils_3 = require(\"../utils\");\nconst crypto_js_1 = require(\"crypto-js\");\nclass Storage {\n    constructor(subKey, beforeKey = undefined) {\n        const localStorage = (0, utils_1.resolveLocalStorage)();\n        // 0. check and upgrade beforeKey\n        log.logDebug('------ update before cache ------');\n        if (beforeKey) {\n            this.checkAndUpgradeCache(beforeKey, subKey);\n        }\n        // 1. load data from local storage\n        this.storeKey = '';\n        this.cipherIV = '';\n        this.subKey = subKey;\n        log.logDebug('--------get current local storage --------');\n        log.logDebug(localStorage);\n        const cacheStr = localStorage.getItem(Storage.cacheKey + subKey);\n        if (typeof cacheStr === \"undefined\" || cacheStr === null) {\n            log.logDebug(\"with no cache\");\n            this.cache = {};\n            return;\n        }\n        log.logDebug(cacheStr);\n        if ((cacheStr === null || cacheStr === void 0 ? void 0 : cacheStr.length) > 0) {\n            var cacheObj = (0, utils_2.safeJsonParse)(cacheStr);\n            this.cache = cacheObj;\n        }\n        log.logDebug(`get cache obj: ${this.cache}`);\n        if (typeof this.cache === 'undefined' || this.cache == null) {\n            this.cache = {};\n        }\n    }\n    checkAndUpgradeCache(fromCacheKey, toCacheKey) {\n        if (fromCacheKey && fromCacheKey.length > 0 && toCacheKey && toCacheKey.length > 0) {\n            // 1. get all infos from from-cache-key\n            log.logDebug('--------get current local storage --------');\n            log.logDebug(localStorage);\n            const cacheStr = localStorage.getItem(Storage.cacheKey + fromCacheKey);\n            if (typeof cacheStr === \"undefined\" || cacheStr === null) {\n                log.logDebug(\"no pre cache content\");\n                return;\n            }\n            log.logDebug(cacheStr);\n            if ((cacheStr === null || cacheStr === void 0 ? void 0 : cacheStr.length) > 0) {\n                // 2. save to to-cache-key\n                log.logDebug(\"write in cache content: \", fromCacheKey, '->', toCacheKey);\n                localStorage.setItem(Storage.cacheKey + toCacheKey, cacheStr);\n                // 3. clean from item\n                log.logDebug(\"clean in cache content: \", fromCacheKey);\n                localStorage.removeItem(Storage.cacheKey + fromCacheKey);\n            }\n        }\n        else {\n            log.logDebug('no pre cache key:', fromCacheKey);\n        }\n    }\n    saveContent(content, key, id = '-') {\n        let item = {\n            id: id,\n            timestamp: Date.now().toString(),\n            content: content\n        };\n        this.saveItem(item, key);\n    }\n    saveItem(item, key) {\n        let localKey = Storage.cacheKey + this.subKey;\n        const localStorage = (0, utils_1.resolveLocalStorage)();\n        log.logDebug(this.cache);\n        log.logDebug(`get cache obj: ${this.cache}, ${key}, ${item}`);\n        this.cache[key] = item;\n        let totalCacheStr = (0, utils_2.safeJsonStringify)(this.cache);\n        log.logDebug(`STORAGE: ${key} @ ${this.cache}`);\n        localStorage.setItem(localKey, totalCacheStr);\n    }\n    getItem(key) {\n        log.logDebug(`STORAGE >> getItem: ${key} @ ${this.cache}`);\n        return this.cache[key];\n    }\n    getCachedPBKDF2InfoKey() {\n        var _a, _b, _c, _d;\n        const pwLen = 32;\n        const saltLen = 24;\n        if (this.storeKey.length > 0 && ((_a = this.cipherIV) === null || _a === void 0 ? void 0 : _a.length) > 0) {\n            return {\n                pw: this.storeKey,\n                iv: this.cipherIV\n            };\n        }\n        let salt = (_b = this.getItem(storageconstants_1.OKXCONNECTOR_STORAGER_CRYPTO_SALT)) === null || _b === void 0 ? void 0 : _b.content;\n        if (!salt) {\n            salt = (0, utils_1.toHexString)(tweetnacl_1.default.randomBytes(saltLen));\n            this.saveContent(salt, storageconstants_1.OKXCONNECTOR_STORAGER_CRYPTO_SALT);\n        }\n        let pw = (_c = this.getItem(storageconstants_1.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD)) === null || _c === void 0 ? void 0 : _c.content;\n        if (!pw) {\n            pw = (0, utils_1.toHexString)(tweetnacl_1.default.randomBytes(pwLen));\n            this.saveContent(pw, storageconstants_1.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD);\n        }\n        let cipherIV = (_d = this.getItem(storageconstants_1.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV)) === null || _d === void 0 ? void 0 : _d.content;\n        if (!cipherIV) {\n            // let ivBuffer = Buffer.from(nacl.randomBytes(16))\n            let ivBuffer = tweetnacl_1.default.randomBytes(16);\n            cipherIV = (0, utils_1.toHexString)(ivBuffer);\n            this.saveContent(cipherIV, storageconstants_1.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV);\n        }\n        this.cipherIV = cipherIV;\n        this.storeKey = (0, crypto_js_1.PBKDF2)(pw, salt, { iterations: 10 }).toString();\n        return {\n            pw: this.storeKey,\n            iv: this.cipherIV\n        };\n    }\n    encryptStoreMsg(msg, key) {\n        (0, utils_3.logDebug)(`encryptStoreMsg  encryptStoreMsg start ${Date.now()}`);\n        let storeInfo = this.getCachedPBKDF2InfoKey();\n        (0, utils_3.logDebug)(`encryptStoreMsg  encryptStoreMsg mid ${Date.now()}`);\n        var result = crypto_js_1.AES.encrypt(msg, storeInfo.pw).toString();\n        this.saveContent(result, key);\n        (0, utils_3.logDebug)(`encryptStoreMsg  encryptStoreMsg end ${Date.now()}`);\n    }\n    getAndDecrypt(key) {\n        (0, utils_3.logDebug)(`encryptStoreMsg  getAndDecrypt start ${Date.now()}`);\n        let item = this.getItem(key);\n        if (item && item.content) {\n            let storeInfo = this.getCachedPBKDF2InfoKey();\n            (0, utils_3.logDebug)(`encryptStoreMsg  getAndDecrypt mid ${Date.now()}`);\n            let result = crypto_js_1.AES.decrypt(item.content, storeInfo.pw).toString(crypto_js_1.enc.Utf8);\n            (0, utils_3.logDebug)(`encryptStoreMsg  getAndDecrypt end ${Date.now()}`);\n            return result;\n        }\n        return null;\n    }\n    clearCache(key = undefined) {\n        if (key === undefined) {\n            // clean all\n            this.cache = {};\n            let localKey = Storage.cacheKey + this.subKey;\n            localStorage.setItem(localKey, '');\n        }\n        else {\n            let localKey = Storage.cacheKey + this.subKey;\n            const localStorage = (0, utils_1.resolveLocalStorage)();\n            log.logDebug(this.cache);\n            this.cache[key] = null;\n            let totalCacheStr = (0, utils_2.safeJsonStringify)(this.cache);\n            log.logDebug(`STORAGE: clean key ${key} @ ${this.cache}`);\n            localStorage.setItem(localKey, totalCacheStr);\n        }\n    }\n}\nexports.Storage = Storage;\nStorage.cacheKey = 'OKXStorageKey';\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 2772, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2777, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/connect/connect.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OKXWalletConnector = void 0;\nconst constants_1 = require(\"./constants\");\nconst storageconstants_1 = require(\"./storageconstants\");\nconst storage_1 = require(\"./storage\");\nconst utils_1 = require(\"../utils\");\nconst utils_2 = require(\"../utils/utils\");\nconst eventemitter3_1 = require(\"eventemitter3\");\nconst log = __importStar(require(\"../utils/log\"));\nconst protocol_1 = require(\"../protocol\");\nconst report_1 = require(\"../utils/report\");\nconst WS = (0, utils_2.resolveWebSocketImplementation)();\nclass OKXWalletConnector {\n    constructor(url) {\n        this.events = new eventemitter3_1.EventEmitter();\n        this.state = constants_1.ConnectorState.InitState;\n        this.selectedUrlIndex = 0;\n        // reconnect\n        this.retryCount = 0;\n        // default timeout limit: 8 sec\n        this.timeOutLimit = 8000;\n        if (!(0, utils_2.checkWSUrl)(url)) {\n            throw new Error(`CONNECTOR: invalid url ${url}`);\n        }\n        this.url = url;\n        this.heartbeatTimer = null;\n        this.connectionTimeoutTimer = null;\n        this.connectURLStorage = new storage_1.Storage(storageconstants_1.OKXCONNECTOR_CACHE_KEY + storageconstants_1.OKXCONNECTOR_CACHE_KEY);\n    }\n    get connecting() {\n        return this.state == constants_1.ConnectorState.Connecting;\n    }\n    // ------------------------------------------------------\n    onPayload(e) {\n        if (typeof e.data === \"undefined\")\n            return;\n        log.logDebug('get received data');\n        log.logDebug(e);\n        if (typeof e.data === \"string\") {\n            let rsp = e.data;\n            if (rsp === \"pong\") {\n                log.logDebug(`CONNECT: receive pong ${Date.now().toString()}`);\n                return;\n            }\n        }\n        this.events.emit(\"payload\", e.data);\n    }\n    onClose(event) {\n        var _a;\n        log.logDebug('socket get closed: ', (_a = this.socket) === null || _a === void 0 ? void 0 : _a.url, event.code);\n        this.socket = undefined;\n        this.events.emit(\"close\", event);\n    }\n    onError(id, e) {\n        const payload = { id: id, msg: e.toString() };\n        this.events.emit(\"payload\", payload);\n    }\n    onopen(socket) {\n        socket.onmessage = (event) => this.onPayload(event);\n        socket.onclose = (event) => this.onClose(event);\n        this.socket = socket;\n        this.state = constants_1.ConnectorState.Connected;\n        this.events.emit(\"open\");\n    }\n    // ------------------------------------------------------\n    emitError(errorEvent) {\n        this.events.emit(\"fail\", errorEvent);\n    }\n    // ------------------------------------------------------\n    heartbeat() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.heartbeatTimer) {\n                clearTimeout(this.heartbeatTimer);\n            }\n            if (this.state != constants_1.ConnectorState.Connected && this.state != constants_1.ConnectorState.OnError) {\n                log.logDebug('heart beat close');\n                return;\n            }\n            if (!this.socket) {\n                log.logDebug('socket not exist');\n                if (this.state == constants_1.ConnectorState.Connected || this.state == constants_1.ConnectorState.OnError) {\n                    log.logDebug('socket reconnect by heartbeat');\n                    try {\n                        yield this.tryRegistOpen();\n                    }\n                    catch (e) {\n                        log.logError('regist open failed');\n                        this.heartbeatTimer = setTimeout(this.heartbeat.bind(this), 5000);\n                    }\n                }\n                return;\n            }\n            if (this.socket.readyState !== WebSocket.OPEN) {\n                log.logDebug('socket not ready');\n                if (this.state == constants_1.ConnectorState.Connected || this.state == constants_1.ConnectorState.OnError) {\n                    log.logDebug('socket reconnect by heartbeat with state', this.state, this.socket.readyState);\n                    try {\n                        yield this.tryRegistOpen();\n                    }\n                    catch (e) {\n                        log.logError('regist open failed');\n                        this.heartbeatTimer = setTimeout(this.heartbeat.bind(this), 5000);\n                    }\n                }\n                return;\n            }\n            log.logDebug(`send ping heart beat: ${Date.now().toString()}, ${this.socket}`);\n            this.socket.send(\"ping\");\n            this.heartbeatTimer = setTimeout(this.heartbeat.bind(this), 5000);\n        });\n    }\n    registOpen(url = this.url, inRetry = false) {\n        if (!(0, utils_2.checkWSUrl)(url)) {\n            throw new Error(`CONNECTOR: invalid url ${url}`);\n        }\n        this.url = url;\n        if (!inRetry) {\n            log.logDebug('Connection connect:', this.url, new Date().toUTCString());\n        }\n        this.state = constants_1.ConnectorState.Connecting;\n        const origin = new URLSearchParams(url).get(\"origin\");\n        return new Promise((resolve, reject) => {\n            const socket = new WS(url, []);\n            log.logDebug('Connection connect Begin:', this.url, new Date().toUTCString());\n            this.startTimeOutTimer(socket);\n            if ((0, utils_2.hasBuiltInWebSocket)()) {\n                log.logDebug('Add socket error handler');\n                socket.onerror = () => {\n                    reject(new Error('socket error'));\n                    socket.close();\n                };\n            }\n            else {\n                log.logDebug('Add socket error handler');\n                socket.on(\"error\", () => {\n                    reject(new Error('socket error'));\n                    socket.close();\n                });\n            }\n            socket.onopen = () => {\n                log.logDebug('socket opened');\n                this.resetTimeOutTimer(constants_1.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.FINISHED);\n                this.onopen(socket);\n                this.heartbeat();\n                resolve(socket);\n            };\n        });\n    }\n    checkMaxRetry() {\n        log.logDebug('current retry count:', this.retryCount, 'of', constants_1.OKXCONNECTOR_WS_URL_LIST.length);\n        return this.retryCount > (constants_1.OKXCONNECTOR_WS_URL_LIST.length * 3);\n    }\n    connectionTryNext() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.checkMaxRetry()) {\n                //TODO: mark descent\n                this.retryCount += 1;\n                let nextUrl = this.getNextSelectUrl();\n                log.logDebug('Connection retry:', nextUrl, new Date().toUTCString());\n                return this.registOpen(nextUrl, true);\n            }\n            else {\n                log.logDebug('Max Connection retry ', this.retryCount, new Date().toUTCString());\n            }\n        });\n    }\n    startTimeOutTimer(socket) {\n        if (this.connectionTimeoutTimer) {\n            this.resetTimeOutTimer(constants_1.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.CANCELED);\n        }\n        this.pendingSocket = socket;\n        this.connectionTimeoutTimer = setTimeout(() => {\n            if (this.pendingSocket) {\n                this.resetTimeOutTimer(constants_1.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.TIME_OUT);\n            }\n        }, this.timeOutLimit);\n    }\n    resetTimeOutTimer(code) {\n        var _a;\n        // 1. cancel connecting pending sockets\n        if (code == constants_1.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.TIME_OUT) {\n            // 2. remove timer\n            clearTimeout(this.connectionTimeoutTimer);\n            (_a = this.pendingSocket) === null || _a === void 0 ? void 0 : _a.close();\n            this.pendingSocket = undefined;\n            log.reportEvent(report_1.OKXReportType.LOG, 'timeout', this.retryCount.toString());\n            throw new Error('socket timeout');\n        }\n        else {\n            this.pendingSocket = undefined;\n            // 2. remove timer\n            clearTimeout(this.connectionTimeoutTimer);\n        }\n    }\n    cacheSuccessUrlSelect() {\n        this.connectURLStorage.saveContent(this.selectedUrlIndex.toString(), storageconstants_1.OKXCONNECTOR_CACHE_KEY);\n    }\n    // private getSuccessUrlSelect(): string {\n    //     let selectIndex = this.connectURLStorage.getItem(OKXCONNECTOR_CACHE_KEY)?.content\n    //     let index = 0\n    //     if (selectIndex) {\n    //         index = Number(selectIndex)\n    //     }\n    //     this.selectedUrlIndex = index\n    //     return OKXCONNECTOR_WS_URL_LIST[index]\n    // }\n    getNextSelectUrl() {\n        this.selectedUrlIndex += 1;\n        this.selectedUrlIndex = this.selectedUrlIndex % constants_1.OKXCONNECTOR_WS_URL_LIST.length;\n        return constants_1.OKXCONNECTOR_WS_URL_LIST[this.selectedUrlIndex];\n    }\n    // ------------------------------------------------------\n    onVisibleChanged() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (document.visibilityState === 'visible') {\n                // check and restore\n                log.logDebug(`get changed ${this.state}, ${this.socket}`);\n                if (this.state == constants_1.ConnectorState.Connected && typeof this.socket === \"undefined\") {\n                    log.logDebug('CONNECTION need reopen');\n                    try {\n                        yield this.tryRegistOpen();\n                    }\n                    catch (e) {\n                        log.logError('regist open failed');\n                    }\n                    return;\n                }\n            }\n        });\n    }\n    tryRegistOpen() {\n        return __awaiter(this, arguments, void 0, function* (url = this.url) {\n            if (this.connecting) {\n                log.logDebug('tryRegistOpen => connecting state');\n                return new Promise((resolve, reject) => {\n                    this.events.once('fail', (e) => {\n                        log.logDebug('tryRegistOpen => connecting fail listener', e);\n                        return reject(e);\n                    });\n                    this.events.once(\"open\", () => {\n                        if (typeof this.socket == \"undefined\") {\n                            return reject(new Error(\"Connect lost\"));\n                        }\n                        return resolve(this.socket);\n                    });\n                });\n            }\n            log.logDebug('tryRegistOpen => try registOpen until retry limit is hit');\n            let inRetry = false;\n            while (!this.checkMaxRetry() && !this.socket) {\n                try {\n                    log.logDebug('tryRegistOpen => call registOpen, try count:', this.retryCount, inRetry);\n                    yield this.registOpen(url, inRetry);\n                }\n                catch (err) {\n                    log.logDebug('tryRegistOpen => registOpen failed', err);\n                    this.retryCount += 1;\n                    url = this.getNextSelectUrl();\n                    inRetry = true;\n                }\n            }\n            log.logDebug('tryRegistOpen => exit while loop', this.retryCount, this.socket);\n            if (!this.socket && this.checkMaxRetry()) {\n                log.logDebug('tryRegistOpen => failed to open a socket', this.retryCount, this.socket);\n                this.retryCount = 0;\n                this.state = constants_1.ConnectorState.OnError;\n                this.emitError(new Error('tryRegistOpen failed'));\n                throw new protocol_1.OKXConnectError(protocol_1.OKX_CONNECT_ERROR_CODES.CONNECTION_ERROR, \"Failed to connect\");\n            }\n        });\n    }\n    connect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this.tryRegistOpen();\n                // listener for reconnect\n                document.removeEventListener('visibilitychange', this.onVisibleChanged.bind(this));\n                document.addEventListener('visibilitychange', this.onVisibleChanged.bind(this));\n            }\n            catch (e) {\n                log.logDebug('connect => failed to connect', e);\n                throw e;\n            }\n        });\n    }\n    disconnect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.state = constants_1.ConnectorState.Disconnected;\n            return new Promise((resolve, reject) => {\n                if (typeof this.socket === \"undefined\") {\n                    // reject(new Error(\"CONNECTION closed\"))\n                    resolve();\n                    return;\n                }\n                this.socket.onclose = (event) => {\n                    this.onClose(event);\n                    resolve();\n                };\n                this.socket.close();\n                if (this.heartbeatTimer) {\n                    clearTimeout(this.heartbeatTimer);\n                }\n            });\n        });\n    }\n    currentStatus() {\n        return {\n            state: this.state,\n            url: this.url\n        };\n    }\n    // event will be jsonstr\n    /// @params Promise\n    /// @params success/failed callback\n    addListener(event, decrypt, success, failed) {\n        if (this.listenPayloadHandler) {\n            this.events.removeListener(\"payload\", this.listenPayloadHandler);\n        }\n        this.listenPayloadHandler = (e) => {\n            var _a;\n            log.logDebug(`<<< get payload ${e}`);\n            let parsedEvent = (0, utils_1.safeJsonParse)(e);\n            // parse the data to chose success or failed\n            if (parsedEvent.params && parsedEvent.params.data) {\n                let rawMsg = (_a = parsedEvent.params.data) === null || _a === void 0 ? void 0 : _a.message;\n                if (rawMsg) {\n                    try {\n                        let msg = decrypt(rawMsg);\n                        if (msg === undefined) {\n                            log.logDebug(`CONNECT: decrypt undefined`);\n                            failed(event, 'Decrypt undefined');\n                        }\n                        else {\n                            success(event, msg);\n                        }\n                    }\n                    catch (e) {\n                        log.logDebug(`CONNECT: decrypt failed: ${e}`);\n                        failed(event, e.message);\n                    }\n                }\n            }\n        };\n        this.events.on(\"payload\", this.listenPayloadHandler);\n        if (this.failHandler) {\n            this.events.removeListener(\"fail\", this.failHandler);\n        }\n        this.failHandler = (e) => {\n            if (e) {\n                log.logDebug(`CONNECT failed: ${e}`);\n                failed(event, e.message);\n            }\n            else {\n                failed(event, \"Unkonow error\");\n            }\n        };\n        this.events.on(\"fail\", this.failHandler);\n    }\n    addPackageParse(callback) {\n        if (this.payloadHandler) {\n            this.events.removeListener(\"payload\", this.payloadHandler);\n        }\n        this.payloadHandler = (e) => __awaiter(this, void 0, void 0, function* () {\n            // parse the data to chose success or failed\n            log.logDebug(`CONNECTION @[${new Date().toUTCString()}] <<<< received e:${e}`);\n            let param = (0, utils_1.safeJsonParse)(e);\n            yield callback(param);\n        });\n        this.events.on(\"payload\", this.payloadHandler);\n    }\n    once(event, listener) {\n        this.events.once(event, listener);\n    }\n    off(event, listener) {\n        this.events.off(event, listener);\n    }\n    removeListener(event, listener) {\n        this.events.removeListener(event, listener);\n    }\n    send(doLogin, payload) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (typeof this.socket === \"undefined\") {\n                    log.logDebug(`>>> send payload undefined ${payload}`);\n                    // this.socket = await this.registOpen();\n                    yield doLogin();\n                }\n                log.logDebug(`CONNECTION @[${new Date().toUTCString()}]>>> send payload ${(0, utils_1.safeJsonStringify)(payload)}`);\n                if (this.socket) {\n                    this.socket.send((0, utils_1.safeJsonStringify)(payload));\n                }\n            }\n            catch (e) {\n                this.onError(payload.id, e);\n            }\n        });\n    }\n    getMsgPayloadFromHistory(msg) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof msg === \"undefined\")\n                return;\n            let tmpMsg = {\n                params: {\n                    data: msg\n                }\n            };\n            let jsonstr = (0, utils_1.safeJsonStringify)(msg);\n            log.logDebug('get received data from history');\n            log.logDebug(jsonstr);\n            jsonstr = (0, utils_1.safeJsonStringify)(tmpMsg);\n            this.events.emit(\"payload\", jsonstr);\n        });\n    }\n    onOpen(callback) {\n        if (this.openHandler) {\n            this.events.removeListener(\"open\", this.openHandler);\n        }\n        this.openHandler = () => __awaiter(this, void 0, void 0, function* () {\n            log.logDebug(`CONNECTION @[${new Date().toUTCString()}] >>> ws opened: `);\n            yield callback();\n        });\n        this.events.on(\"open\", this.openHandler);\n        this.cacheSuccessUrlSelect();\n    }\n}\nexports.OKXWalletConnector = OKXWalletConnector;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3265, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3270, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/connect/commands.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CONNECT_METHOD_BATCH_FETCHMSG = exports.CONNECT_METHOD_FETCHMSG = exports.CONNECT_METHOD_RECEIVE = exports.CONNECT_METHOD_UNSUB = exports.CONNECT_METHOD_SUB = exports.CONNECT_METHOD_PUBLISH = exports.CONNECT_METHOD_LOGIN = exports.CONNECT_METHOD_PUSH = void 0;\n// --------------- ws methods -------------\nexports.CONNECT_METHOD_PUSH = \"push\";\nexports.CONNECT_METHOD_LOGIN = \"login\";\nexports.CONNECT_METHOD_PUBLISH = \"publish\";\nexports.CONNECT_METHOD_SUB = \"subscribe\";\nexports.CONNECT_METHOD_UNSUB = \"unsubscribe\";\nexports.CONNECT_METHOD_RECEIVE = \"receive\";\nexports.CONNECT_METHOD_FETCHMSG = \"fetchMessages\";\nexports.CONNECT_METHOD_BATCH_FETCHMSG = \"batchFetchMessages\";\n"],"names":[],"mappings":"AAAA;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,6BAA6B,GAAG,QAAQ,uBAAuB,GAAG,QAAQ,sBAAsB,GAAG,QAAQ,oBAAoB,GAAG,QAAQ,kBAAkB,GAAG,QAAQ,sBAAsB,GAAG,QAAQ,oBAAoB,GAAG,QAAQ,mBAAmB,GAAG,KAAK;AAC1Q,2CAA2C;AAC3C,QAAQ,mBAAmB,GAAG;AAC9B,QAAQ,oBAAoB,GAAG;AAC/B,QAAQ,sBAAsB,GAAG;AACjC,QAAQ,kBAAkB,GAAG;AAC7B,QAAQ,oBAAoB,GAAG;AAC/B,QAAQ,sBAAsB,GAAG;AACjC,QAAQ,uBAAuB,GAAG;AAClC,QAAQ,6BAA6B,GAAG","ignoreList":[0]}},
    {"offset": {"line": 3284, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3289, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/connect/jwtconstants.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OKXCONNECTOR_JWT_TTL = exports.OKXCONNECTOR_JWT_WALLET_SIDE = exports.OKXCONNECTOR_JWT_SIDE = void 0;\nexports.OKXCONNECTOR_JWT_SIDE = \"wallet\";\nexports.OKXCONNECTOR_JWT_WALLET_SIDE = \"dapp\";\nexports.OKXCONNECTOR_JWT_TTL = 86400000;\n"],"names":[],"mappings":"AAAA;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,oBAAoB,GAAG,QAAQ,4BAA4B,GAAG,QAAQ,qBAAqB,GAAG,KAAK;AAC3G,QAAQ,qBAAqB,GAAG;AAChC,QAAQ,4BAA4B,GAAG;AACvC,QAAQ,oBAAoB,GAAG","ignoreList":[0]}},
    {"offset": {"line": 3297, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3302, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/crypto/crypto.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SessionCrypto = void 0;\nconst tweetnacl_1 = __importDefault(require(\"tweetnacl\"));\nconst utils_1 = require(\"../utils/utils\");\nclass SessionCrypto {\n    constructor(keyPair = undefined) {\n        this.nonceLength = 24;\n        this.sessionKeyPair = keyPair ? this.createKeypairFromString(keyPair) : this.createKeypair();\n    }\n    createKeypair() {\n        return tweetnacl_1.default.box.keyPair();\n    }\n    createKeypairFromString(keyPair) {\n        return {\n            publicKey: (0, utils_1.hexToByteArray)(keyPair.publicKey),\n            secretKey: (0, utils_1.hexToByteArray)(keyPair.secretKey),\n        };\n    }\n    createNonce() {\n        return tweetnacl_1.default.randomBytes(this.nonceLength);\n    }\n    get keyPair() {\n        return this.sessionKeyPair;\n    }\n    // dapp :\n    // base64(hexnonce+)\n    encrypt(message, receiverPublicKey) {\n        const encodedMessage = new TextEncoder().encode(message);\n        const nonce = this.createNonce();\n        const encrypted = tweetnacl_1.default.box(encodedMessage, nonce, (0, utils_1.hexToByteArray)(receiverPublicKey), this.keyPair.secretKey);\n        let concatInfo = (0, utils_1.concatUint8Arrays)(nonce, encrypted);\n        var hexResult = (0, utils_1.toHexString)(concatInfo);\n        var encodedResult = new TextEncoder().encode(hexResult);\n        return (0, utils_1.base64encode)(encodedResult, false);\n    }\n    // \n    // hex\n    // base64nonce+)\n    encryptWallet(message, receiverPublicKey) {\n        const encodedMessage = new TextEncoder().encode(message);\n        const nonce = this.createNonce();\n        const encrypted = tweetnacl_1.default.box(encodedMessage, nonce, (0, utils_1.hexToByteArray)(receiverPublicKey), this.keyPair.secretKey);\n        let concatInfo = (0, utils_1.concatUint8Arrays)(nonce, encrypted);\n        return (0, utils_1.base64encode)(concatInfo, false);\n    }\n    // dapp \n    // base64(split(nonce+))\n    decrypt(message, senderPublicKey) {\n        let base64Content = (0, utils_1.base64decode)(message, true);\n        let messageByteArray = base64Content.toUint8Array();\n        const [nonce, internalMessage] = (0, utils_1.splitToUint8Arrays)(messageByteArray, this.nonceLength);\n        const decrypted = tweetnacl_1.default.box.open(internalMessage, nonce, (0, utils_1.hexToByteArray)(senderPublicKey), this.keyPair.secretKey);\n        if (!decrypted) {\n            throw new Error(`Decryption error: \\n message: ${message.toString()} \\n sender pubkey: ${senderPublicKey.toString()} \\n keypair pubkey: ${(0, utils_1.toHexString)(this.keyPair.publicKey)} \\n keypair secretkey: ${(0, utils_1.toHexString)(this.keyPair.secretKey)}`);\n        }\n        return new TextDecoder().decode(decrypted);\n    }\n    // dapp \n    // base64(hextoByte(split(nonce+)))\n    decryptWallet(message, senderPublicKey) {\n        let base64Content = (0, utils_1.base64decode)(message, true);\n        let messageByteArray = (0, utils_1.hexToByteArray)(base64Content.toString());\n        const [nonce, internalMessage] = (0, utils_1.splitToUint8Arrays)(messageByteArray, this.nonceLength);\n        const decrypted = tweetnacl_1.default.box.open(internalMessage, nonce, (0, utils_1.hexToByteArray)(senderPublicKey), this.keyPair.secretKey);\n        if (!decrypted) {\n            throw new Error(`Decryption error: \\n message: ${message.toString()} \\n sender pubkey: ${senderPublicKey.toString()} \\n keypair pubkey: ${(0, utils_1.toHexString)(this.keyPair.publicKey)} \\n keypair secretkey: ${(0, utils_1.toHexString)(this.keyPair.secretKey)}`);\n        }\n        return new TextDecoder().decode(decrypted);\n    }\n    stringifyKeypair() {\n        return {\n            publicKey: (0, utils_1.toHexString)(this.keyPair.publicKey),\n            secretKey: (0, utils_1.toHexString)(this.keyPair.secretKey)\n        };\n    }\n}\nexports.SessionCrypto = SessionCrypto;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3387, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3392, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/connect/jwt.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MULTICODEC_ED25519_LENGTH = exports.MULTICODEC_ED25519_HEADER = exports.MULTICODEC_ED25519_BASE = exports.MULTICODEC_ED25519_ENCODING = exports.DID_METHOD = exports.DID_PREFIX = exports.DID_DELIMITER = exports.KEY_PAIR_SEED_LENGTH = exports.DATA_ENCODING = exports.JSON_ENCODING = exports.JWT_ENCODING = exports.JWT_DELIMITER = exports.JWT_IRIDIUM_TYP = exports.JWT_IRIDIUM_ALG = exports.JWTHeaderType = void 0;\nexports.generateKeyPair = generateKeyPair;\nexports.decodeJSON = decodeJSON;\nexports.encodeJSON = encodeJSON;\nexports.encodeIss = encodeIss;\nexports.decodeIss = decodeIss;\nexports.encodeSig = encodeSig;\nexports.decodeSig = decodeSig;\nexports.encodeData = encodeData;\nexports.decodeData = decodeData;\nexports.encodeJWT = encodeJWT;\nexports.decodeJWT = decodeJWT;\nexports.signJWT = signJWT;\nexports.verifyJWT = verifyJWT;\nconst ed25519 = __importStar(require(\"@stablelib/ed25519\"));\nconst safejson_1 = require(\"../utils/safejson\");\nconst utils_1 = require(\"../utils/utils\");\nconst tweetnacl_1 = __importDefault(require(\"tweetnacl\"));\nconst log = __importStar(require(\"../utils/log\"));\nconst stringUtils_1 = require(\"../utils/stringUtils\");\nexports.JWTHeaderType = \"dapp\";\nexports.JWT_IRIDIUM_ALG = \"EdDSA\";\nexports.JWT_IRIDIUM_TYP = \"JWT\";\nexports.JWT_DELIMITER = \".\";\nexports.JWT_ENCODING = \"base64url\";\nexports.JSON_ENCODING = \"utf8\";\nexports.DATA_ENCODING = \"utf8\";\nexports.KEY_PAIR_SEED_LENGTH = 32;\nexports.DID_DELIMITER = \":\";\nexports.DID_PREFIX = \"did\";\nexports.DID_METHOD = \"key\";\nexports.MULTICODEC_ED25519_ENCODING = \"base58btc\";\nexports.MULTICODEC_ED25519_BASE = \"z\";\nexports.MULTICODEC_ED25519_HEADER = \"K36\";\nexports.MULTICODEC_ED25519_LENGTH = 32;\nfunction generateKeyPair() {\n    // let local_seed = randomBytes(KEY_PAIR_SEED_LENGTH)\n    // return ed25519.generateKeyPairFromSeed(local_seed);\n    return tweetnacl_1.default.sign.keyPair();\n}\nfunction decodeJSON(str) {\n    return (0, safejson_1.safeJsonParse)((0, stringUtils_1.okxtoString)((0, stringUtils_1.okxfromString)(str, exports.JWT_ENCODING), exports.JSON_ENCODING));\n}\nfunction encodeJSON(val) {\n    return (0, stringUtils_1.okxtoString)((0, stringUtils_1.okxfromString)((0, safejson_1.safeJsonStringify)(val), exports.JSON_ENCODING), exports.JWT_ENCODING);\n}\nfunction encodeIss(publicKey) {\n    log.logDebug(`publicKey: ${(0, utils_1.toHexString)(publicKey)}`);\n    var publicKeyStr = (0, stringUtils_1.okxtoString)(publicKey, exports.MULTICODEC_ED25519_ENCODING);\n    return [exports.DID_PREFIX, exports.DID_METHOD, publicKeyStr].join(exports.DID_DELIMITER);\n}\nfunction decodeIss(issuer) {\n    const [prefix, method, multicodec] = issuer.split(exports.DID_DELIMITER);\n    if (prefix !== exports.DID_PREFIX || method !== exports.DID_METHOD) {\n        throw new Error(`Issuer must be a DID with method \"key\"`);\n    }\n    if (multicodec === undefined) {\n        throw new Error('multicodec is undefined');\n    }\n    const publicKey = (0, stringUtils_1.okxfromString)(multicodec, exports.MULTICODEC_ED25519_ENCODING);\n    if (publicKey === undefined || publicKey.length !== exports.MULTICODEC_ED25519_LENGTH) {\n        throw new Error(`Issuer must be a public key with length 32 bytes`);\n    }\n    return publicKey;\n}\n// ---------- Signature ----------------------------------------------- //\nfunction encodeSig(bytes) {\n    return (0, stringUtils_1.okxtoString)(bytes, exports.JWT_ENCODING);\n}\nfunction decodeSig(encoded) {\n    return (0, stringUtils_1.okxfromString)(encoded, exports.JWT_ENCODING);\n}\n// ---------- Data ----------------------------------------------- //\nfunction encodeData(params) {\n    return (0, stringUtils_1.okxfromString)([encodeJSON(params.header), encodeJSON(params.payload)].join(exports.JWT_DELIMITER), exports.DATA_ENCODING);\n}\nfunction decodeData(data) {\n    var _a, _b;\n    const params = (0, stringUtils_1.okxtoString)(data, exports.DATA_ENCODING).split(exports.JWT_DELIMITER);\n    const header = decodeJSON((_a = params[0]) !== null && _a !== void 0 ? _a : '{}');\n    const payload = decodeJSON((_b = params[1]) !== null && _b !== void 0 ? _b : '{}');\n    return { header, payload };\n}\n// ---------- JWT ----------------------------------------------- //\nfunction encodeJWT(params) {\n    return [encodeJSON(params.header), encodeJSON(params.payload), encodeSig(params.signature)].join(exports.JWT_DELIMITER);\n}\nfunction decodeJWT(jwt) {\n    var _a, _b, _c;\n    const params = jwt.split(exports.JWT_DELIMITER);\n    const header = decodeJSON((_a = params[0]) !== null && _a !== void 0 ? _a : '{}');\n    const payload = decodeJSON((_b = params[1]) !== null && _b !== void 0 ? _b : '{}');\n    const signature = decodeSig((_c = params[2]) !== null && _c !== void 0 ? _c : '{}');\n    const data = (0, stringUtils_1.okxfromString)(params.slice(0, 2).join(exports.JWT_DELIMITER), exports.DATA_ENCODING);\n    return { header, payload, signature, data };\n}\nfunction signJWT(sub_1, aud_1, ttl_1, keyPair_1) {\n    return __awaiter(this, arguments, void 0, function* (sub, aud, ttl, keyPair, iat = Math.floor(Date.now())) {\n        const header = { alg: exports.JWT_IRIDIUM_ALG, typ: exports.JWT_IRIDIUM_TYP };\n        const iss = encodeIss(keyPair.publicKey);\n        const exp = iat + ttl;\n        const act = \"authenticate user\";\n        const payload = { iss, sub, aud, act, iat, exp };\n        const data = encodeData({ header, payload });\n        // const signature = ed25519.sign(keyPair.secretKey, data);\n        log.logDebug(`get sec kp: ${keyPair.secretKey} {${keyPair.secretKey.length}}`);\n        const signature = tweetnacl_1.default.sign.detached(data, keyPair.secretKey);\n        return encodeJWT({ header, payload, signature });\n    });\n}\nfunction verifyJWT(jwt) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const { header, payload, data, signature } = decodeJWT(jwt);\n        if (header.alg !== exports.JWT_IRIDIUM_ALG || header.typ !== exports.JWT_IRIDIUM_TYP) {\n            throw new Error(\"JWT must use EdDSA algorithm\");\n        }\n        const publicKey = decodeIss(payload.iss);\n        return ed25519.verify(publicKey, data, signature);\n    });\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3627, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3632, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/connect/connectionManager.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConnectionManager = void 0;\nconst connect_1 = require(\"./connect\");\nconst commands_1 = require(\"./commands\");\nconst storageconstants_1 = require(\"./storageconstants\");\nconst jwtconstants_1 = require(\"./jwtconstants\");\nconst constants_1 = require(\"./constants\");\nconst eventemitter3_1 = require(\"eventemitter3\");\nconst storage_1 = require(\"./storage\");\nconst utils_1 = require(\"../utils/utils\");\nconst crypto_1 = require(\"../crypto/crypto\");\nconst jwt_1 = require(\"./jwt\");\nconst safejson_1 = require(\"../utils/safejson\");\nconst log = __importStar(require(\"../utils/log\"));\nconst log_1 = require(\"../utils/log\");\nconst report_1 = require(\"../utils/report\");\nconst url_1 = require(\"../utils/url\");\nclass ConnectionManager {\n    constructor(appname = undefined) {\n        this.events = new eventemitter3_1.EventEmitter();\n        // local storage\n        this.connectStorage = new storage_1.Storage(storageconstants_1.OKXCONNECTOR_CACHE_KEY_DAPP + appname, storageconstants_1.OKXCONNECTOR_CACHE_KEY_DAPP);\n        this.crypto = new crypto_1.SessionCrypto();\n        let inTMA = (0, url_1.isInTMA)();\n        (0, log_1.logDebug)('do init:', inTMA);\n        log.reportLog('connection manager do init');\n        if (inTMA) {\n            // recovery from cache\n            const keyPairInfo = this.getCachedCryptoKeyPair();\n            (0, log_1.logDebug)('use same pk:', keyPairInfo);\n            this.crypto = new crypto_1.SessionCrypto(keyPairInfo);\n        }\n        this.jwtKeyPair = this.getCachedJWTKeyPair();\n        this.saveJWTKeyPair(this.jwtKeyPair);\n        // wss connection\n        this.connector = new connect_1.OKXWalletConnector(constants_1.OKXCONNECTOR_WS_URL_1);\n        this.packageId = Date.now();\n        // connection state\n        this.connectedWalletPK = '';\n        this.currentTopic = '';\n        log.logDebug(`this.connectedWalletPK  constructor   ${this.connectedWalletPK}`);\n    }\n    refreshPackageId() {\n        this.packageId = Date.now();\n    }\n    saveCryptoKeyPair(keyPair) {\n        let cacheInfo = (0, safejson_1.safeJsonStringify)(keyPair);\n        // encrypt kp\n        this.connectStorage.encryptStoreMsg(cacheInfo, storageconstants_1.OKXCONNECTOR_CRYPTO_KEY);\n    }\n    getCachedCryptoKeyPair() {\n        // decrypt kp\n        const kp = this.connectStorage.getAndDecrypt(storageconstants_1.OKXCONNECTOR_CRYPTO_KEY);\n        const content = kp;\n        if (typeof content == 'string') {\n            log.logDebug('get cached crypto key:');\n            log.logDebug(content);\n            let keyPairInfo = (0, safejson_1.safeJsonParse)(content);\n            return keyPairInfo;\n        }\n        else {\n            this.connectStorage.clearCache();\n        }\n        return null;\n    }\n    saveJWTKeyPair(keyPair) {\n        var strkeyPair = {\n            publicKey: (0, utils_1.toHexString)(keyPair.publicKey),\n            secretKey: (0, utils_1.toHexString)(keyPair.secretKey)\n        };\n        log.logDebug('save jwt kp');\n        let cacheInfo = (0, safejson_1.safeJsonStringify)(strkeyPair);\n        log.logDebug(cacheInfo);\n        // encrypt jwt kp\n        this.connectStorage.encryptStoreMsg(cacheInfo, storageconstants_1.OKXCONNECTOR_JWT_KEY);\n    }\n    getCachedJWTKeyPair() {\n        const kp = this.connectStorage.getAndDecrypt(storageconstants_1.OKXCONNECTOR_JWT_KEY);\n        const content = kp;\n        if (typeof content == 'string') {\n            // TODO: decrypt jwt kp\n            log.logDebug('get cached jwt kp:');\n            log.logDebug(content);\n            let strKeyPairInfo = (0, safejson_1.safeJsonParse)(content);\n            log.logDebug('save jwt kp');\n            log.logDebug(strKeyPairInfo);\n            var keyPair = {\n                publicKey: (0, utils_1.hexToByteArray)(strKeyPairInfo.publicKey),\n                secretKey: (0, utils_1.hexToByteArray)(strKeyPairInfo.secretKey)\n            };\n            return keyPair;\n        }\n        else {\n            return (0, jwt_1.generateKeyPair)();\n        }\n    }\n    isWalletPKReady() {\n        log.logDebug(`isWalletPKReady  ===> ${this.connectedWalletPK}`);\n        return this.connectedWalletPK.length > 0;\n    }\n    makeJWT(topic) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield (0, jwt_1.signJWT)(topic, jwtconstants_1.OKXCONNECTOR_JWT_SIDE, jwtconstants_1.OKXCONNECTOR_JWT_TTL, // 24h\n            this.jwtKeyPair);\n        });\n    }\n    parsePackage(input_1) {\n        return __awaiter(this, arguments, void 0, function* (input, ignoreACK = false) {\n            var _a, _b, _c, _d, _e;\n            this.events.emit(input.id, input);\n            // send back ACK\n            if (!ignoreACK) {\n                yield this.sendACK(input.id, true);\n                let topic = (_a = this.connectStorage.getItem(storageconstants_1.OKXCONNECTOR_TOKEN_CACHE)) === null || _a === void 0 ? void 0 : _a.content;\n                if (topic) {\n                    let inputObj = input;\n                    if ((_c = (_b = inputObj.params) === null || _b === void 0 ? void 0 : _b.data) === null || _c === void 0 ? void 0 : _c.messageId) {\n                        this.refreshPackageId();\n                        yield this.sendReceive(this.packageId.toString(), (_e = (_d = inputObj.params) === null || _d === void 0 ? void 0 : _d.data) === null || _e === void 0 ? void 0 : _e.messageId, topic);\n                    }\n                }\n            }\n        });\n    }\n    restoreConnect(topic) {\n        return __awaiter(this, void 0, void 0, function* () {\n            log.reportLog('connection manager restore connection');\n            log.logDebug(`connectionManager  restoreConenct   ${topic}`);\n            if ((typeof topic !== 'string') || topic.length === 0) {\n                throw new Error('CONNECTION: invalid topic');\n            }\n            log.logDebug(`connectionManager  restoreConenct   disconnect`);\n            yield this.disconnect(true);\n            this.connectStorage.saveContent(topic, storageconstants_1.OKXCONNECTOR_TOKEN_CACHE);\n            log.logDebug(`connectionManager  restoreConenct   conect`);\n            yield this.connect(true);\n        });\n    }\n    getConnectInfo() {\n        var topic = (0, utils_1.generateTopic)();\n        log.logDebug(`generate topic token: ${topic}`);\n        log.reportLog('connection manager generate connection info');\n        this.currentTopic = topic;\n        const info = {\n            channelId: topic,\n            clientId: this.crypto.stringifyKeypair().publicKey,\n        };\n        return info;\n    }\n    connect() {\n        return __awaiter(this, arguments, void 0, function* (fromRestore = false) {\n            this.timeLog = new Date().getTime();\n            (0, log_1.logDebug)(\"ConnectTime---enter->\", this.timeLog);\n            log.reportLog('connection manager begin connect');\n            let lastConnectId = this.connectStorage.getItem(storageconstants_1.OKXCONNECTOR_TOKEN_CACHE);\n            //1. generate topic & jwt\n            var topic = this.currentTopic;\n            log.logDebug(`generate topic token: ${topic}`);\n            // crypto keypair\n            if (fromRestore) {\n                if (typeof lastConnectId !== 'undefined' && lastConnectId !== null) {\n                    log.logDebug(`read last connect id: ${lastConnectId}`);\n                    topic = lastConnectId.content;\n                }\n                var cachedSenderPublicKey = this.connectStorage.getItem(storageconstants_1.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE);\n                if (cachedSenderPublicKey) {\n                    this.connectedWalletPK = cachedSenderPublicKey.content;\n                    (0, log_1.logDebug)(`connectionManager connect() this.connectedWalletPK : ${this.connectedWalletPK}`);\n                }\n                log.reportLog('connection manager do restore connection');\n            }\n            if (fromRestore) {\n                // recovery from cache\n                const keyPairInfo = this.getCachedCryptoKeyPair();\n                if (keyPairInfo) {\n                    this.crypto = new crypto_1.SessionCrypto(keyPairInfo);\n                }\n            }\n            log.logDebug(`use crypto client id: ${this.crypto.stringifyKeypair().publicKey}`);\n            // cache topic\n            this.connectStorage.saveContent(topic, storageconstants_1.OKXCONNECTOR_TOKEN_CACHE);\n            var jwtToken = yield this.makeJWT(topic);\n            log.logDebug(`generate jwt token: ${jwtToken}`);\n            this.connectStorage.saveContent(jwtToken, 'jwt');\n            return new Promise((resolve, reject) => {\n                // 1. when websocket opened\n                this.connector.onOpen(() => __awaiter(this, void 0, void 0, function* () {\n                    log.logDebug(`1. connector on open`);\n                    log.reportLog('1. connect ws open');\n                    const timeOne = new Date().getTime();\n                    (0, log_1.logDebug)(\"ConnectTime---open->\", timeOne - this.timeLog);\n                    //2. send jwt to login\n                    this.events.once(this.packageId.toString(), (rsp) => __awaiter(this, void 0, void 0, function* () {\n                        // ack\n                        if (rsp && rsp.error) {\n                            log.logError('failed when login');\n                            log.reportLog('2. connect login failed');\n                            yield this.connector.disconnect();\n                            var error = new Error();\n                            error.message = rsp.error.message;\n                            error.name = rsp.error.code.toString();\n                            // throw error\n                            reject(error);\n                        }\n                        //3. send subscribe\n                        this.refreshPackageId();\n                        this.events.once(this.packageId.toString(), (rsp) => __awaiter(this, void 0, void 0, function* () {\n                            // ack\n                            if (rsp && rsp.error) {\n                                log.logError('failed when subscribe');\n                                log.reportLog('3. connect subscribe failed');\n                                yield this.connector.disconnect();\n                                var error = new Error();\n                                error.message = rsp.error.message;\n                                error.name = rsp.error.code.toString();\n                                // throw error\n                                reject(error);\n                            }\n                            this.refreshPackageId();\n                            log.logDebug(`4. subscribe callback then send fetch: ${this.packageId}`);\n                            log.reportLog('4. subscribe callback then send fetch');\n                            const timeF = new Date().getTime();\n                            (0, log_1.logDebug)(\"ConnectTime--subscribe callback->\", timeF - this.timeLog);\n                            // 4. fetch messages\n                            yield this.sendFetchAndConsumeMessages(this.packageId.toString(), topic);\n                            resolve();\n                        }));\n                        log.logDebug(`3. login callback then send subscribe: ${this.packageId}`);\n                        log.reportLog('3. connect subscribe failed');\n                        const timeTh = new Date().getTime();\n                        (0, log_1.logDebug)(\"ConnectTime---login callback->\", timeTh - this.timeLog);\n                        yield this.connector.send(() => __awaiter(this, void 0, void 0, function* () {\n                            log.logDebug('CONNECT: reconnect before send');\n                            yield this.connector.connect()\n                                .catch((err) => {\n                                (0, log_1.logDebug)('ConnectionManager connect error', err);\n                                reject(err);\n                            });\n                        }), {\n                            id: this.packageId.toString(),\n                            jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                            method: commands_1.CONNECT_METHOD_SUB,\n                            params: {\n                                topic: topic\n                            }\n                        });\n                    }));\n                    log.logDebug(`2. login called`);\n                    log.reportLog('2. connection manager connect call login');\n                    yield this.connector.send(() => __awaiter(this, void 0, void 0, function* () {\n                        log.logDebug('CONNECT: reconnect before send');\n                        yield this.connector.connect()\n                            .catch((err) => {\n                            (0, log_1.logDebug)('ConnectionManager connect error', err);\n                            reject(err);\n                        });\n                    }), {\n                        id: this.packageId.toString(),\n                        jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                        method: commands_1.CONNECT_METHOD_LOGIN,\n                        params: {\n                            token: jwtToken\n                        }\n                    });\n                    // 4. listen when dapp back to front, receive wallet public key\n                    this.connector.addPackageParse((event) => {\n                        var _a;\n                        log.logDebug(`connect: parse package`);\n                        log.logDebug(event);\n                        if (!(\"params\" in event) || !(\"data\" in event[\"params\"])) {\n                            this.parsePackage(event, true);\n                            return;\n                        }\n                        let rawMsg = (_a = event.params.data) === null || _a === void 0 ? void 0 : _a.message;\n                        if (typeof rawMsg !== 'undefined') {\n                            rawMsg = rawMsg.replace(/'/g, '\"');\n                            let parsedMessage = (0, safejson_1.safeJsonParse)(rawMsg);\n                            if (typeof parsedMessage !== 'string' && \"clientId\" in parsedMessage && parsedMessage.clientId && parsedMessage.clientId.length > 0) {\n                                this.connectedWalletPK = parsedMessage.clientId;\n                                log.logDebug(`this.connectedWalletPK  addPackageParse   ${this.connectedWalletPK}`);\n                                // exchange sender public key\n                                // cache wallet public key\n                                this.connectStorage.saveContent(this.connectedWalletPK, storageconstants_1.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE);\n                                // cache crypto keypair\n                                this.saveCryptoKeyPair(this.crypto.stringifyKeypair());\n                            }\n                        }\n                        // ignore receive echo\n                        this.parsePackage(event, event.method === commands_1.CONNECT_METHOD_RECEIVE);\n                    });\n                }));\n                this.connector.connect().catch((err) => {\n                    (0, log_1.logDebug)('ConnectionManager connect error', err);\n                    reject(err);\n                });\n            });\n        });\n    }\n    disconnect() {\n        return __awaiter(this, arguments, void 0, function* (fromRestore = false) {\n            yield this.connector.disconnect();\n            log.reportLog('connect disconnect');\n            //clean cached topic\n            //public key\n            this.connectStorage.clearCache(storageconstants_1.OKXCONNECTOR_TOKEN_CACHE);\n            if (!fromRestore) {\n                this.connectStorage.clearCache(storageconstants_1.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE);\n                this.connectedWalletPK = '';\n                (0, log_1.logDebug)(`connectionManager disconnect() this.connectedWalletPK : ${this.connectedWalletPK}`);\n            }\n        });\n    }\n    addListener(event, success, fail) {\n        this.connector.addListener((0, safejson_1.safeJsonStringify)(event), (rawMsg) => {\n            rawMsg = rawMsg.replace(/'/g, '\"');\n            log.logDebug(`addListener ===> ${rawMsg}`);\n            if (typeof rawMsg !== 'undefined') {\n                var msgObj = (0, safejson_1.safeJsonParse)(rawMsg);\n                var msg = msgObj.message;\n                let result;\n                if (msg.trimStart().startsWith('{')) {\n                    result = msg;\n                }\n                else {\n                    if (msgObj.clientId && msgObj.clientId.length > 0) {\n                        this.connectedWalletPK = msgObj.clientId;\n                        this.connectStorage.saveContent(this.connectedWalletPK, storageconstants_1.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE);\n                        log.logDebug(`this.connectedWalletPK  addListener   ${this.connectedWalletPK}`);\n                        log.logDebug(`this.cryptoKey  addListener   ${(0, utils_1.toHexString)(this.crypto.keyPair.publicKey)}`);\n                        // cache crypto keypair\n                        this.saveCryptoKeyPair(this.crypto.stringifyKeypair());\n                    }\n                    result = this.crypto.decrypt(msg, this.connectedWalletPK);\n                }\n                log.logDebug(`addListener ===> ${result}`);\n                return result;\n            }\n            return undefined;\n        }, success, fail);\n    }\n    sendRaw(msg) {\n        return __awaiter(this, void 0, void 0, function* () {\n            log.logDebug(`message send =====> ${msg}`);\n            log.reportLog('connect send raw msg');\n            let message = msg;\n            log.logDebug(`message send =====encrypt message.length>>>> ${message.length}`);\n            // only one topic\n            let topic = this.connectStorage.getItem(storageconstants_1.OKXCONNECTOR_TOKEN_CACHE);\n            log.logDebug(`message send =====topic>>>> ${topic === null || topic === void 0 ? void 0 : topic.content}`);\n            this.refreshPackageId();\n            const payload = {\n                id: this.packageId.toString(),\n                method: commands_1.CONNECT_METHOD_PUBLISH,\n                jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                params: {\n                    message: {\n                        topic: topic === null || topic === void 0 ? void 0 : topic.content,\n                        message: message,\n                        ttl: constants_1.OKXCONNECTOR_MESSAGE_TTL\n                    }\n                } // crypted\n            };\n            this.events.once(this.packageId.toString(), (rsp) => __awaiter(this, void 0, void 0, function* () {\n                // ack\n                if (rsp && rsp.error) {\n                    log.logError(`@${new Date().toUTCString()} >>> failed when send msg`);\n                }\n                else if (rsp && !rsp.error) {\n                    log.logDebug(`CONNECTION @[${new Date().toUTCString()}] >>> send msg with id ${this.packageId} successed`);\n                }\n            }));\n            yield this.connector.send(() => __awaiter(this, void 0, void 0, function* () {\n                log.logDebug('CONNECT: reconnect before send');\n                return yield this.connector.connect();\n            }), payload);\n            return this.packageId;\n        });\n    }\n    send(msg_1) {\n        return __awaiter(this, arguments, void 0, function* (msg, ttl = constants_1.OKXCONNECTOR_MESSAGE_TTL) {\n            // make send msg payload\n            log.logDebug(`message send =====> ${msg}`);\n            log.reportLog('connect send msg');\n            if (!this.isWalletPKReady()) {\n                // channel not ready\n                throw new Error('connection not finish');\n            }\n            let message = this.crypto.encrypt(msg, this.connectedWalletPK);\n            log.logDebug(`message send =====encrypt message.length>>>> ${message.length}`);\n            log.reportEvent(report_1.OKXReportType.LOG, 'msg_size', message.length.toString());\n            // only one topic\n            let topic = this.connectStorage.getItem(storageconstants_1.OKXCONNECTOR_TOKEN_CACHE);\n            log.logDebug(`message send =====topic>>>> ${topic === null || topic === void 0 ? void 0 : topic.content}`);\n            this.refreshPackageId();\n            const payload = {\n                id: this.packageId.toString(),\n                method: commands_1.CONNECT_METHOD_PUBLISH,\n                jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                params: {\n                    message: {\n                        topic: topic === null || topic === void 0 ? void 0 : topic.content,\n                        message: message,\n                        ttl: ttl\n                    }\n                } // crypted\n            };\n            this.events.once(this.packageId.toString(), (rsp) => __awaiter(this, void 0, void 0, function* () {\n                // ack\n                if (rsp && rsp.error) {\n                    log.logError(`@${new Date().toUTCString()} >>> failed when send msg`);\n                }\n                else if (rsp && !rsp.error) {\n                    log.logDebug(`CONNECTION @[${new Date().toUTCString()}] >>> send msg with id ${this.packageId} successed`);\n                }\n            }));\n            yield this.connector.send(() => __awaiter(this, void 0, void 0, function* () {\n                log.logDebug('CONNECT: reconnect before send');\n                return yield this.connector.connect();\n            }), payload);\n            return this.packageId;\n        });\n    }\n    sendACK(msgId_1, success_1) {\n        return __awaiter(this, arguments, void 0, function* (msgId, success, reason = undefined) {\n            if (success === true) {\n                const payload = {\n                    id: msgId,\n                    jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                    result: true\n                };\n                yield this.connector.send(() => __awaiter(this, void 0, void 0, function* () {\n                    log.logDebug('CONNECT: reconnect before send');\n                    return yield this.connector.connect();\n                }), payload);\n            }\n            else if (reason) {\n                const payload = {\n                    id: msgId,\n                    jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                    error: {\n                        code: reason.code, //int\n                        message: reason.message\n                    }\n                };\n                yield this.connector.send(() => __awaiter(this, void 0, void 0, function* () {\n                    log.logDebug('CONNECT: reconnect before send');\n                    return yield this.connector.connect();\n                }), payload);\n            }\n        });\n    }\n    // send receive\n    sendReceive(msgId, messageId, topic) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const payload = {\n                id: msgId,\n                jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                method: commands_1.CONNECT_METHOD_RECEIVE,\n                params: {\n                    data: {\n                        messageId: messageId,\n                        topic: topic\n                    }\n                }\n            };\n            yield this.connector.send(() => __awaiter(this, void 0, void 0, function* () {\n                log.logDebug('CONNECT: reconnect before send');\n                return yield this.connector.connect();\n            }), payload);\n        });\n    }\n    sendConnectSessionInfo(msgId, messageId, topic, params) {\n        return __awaiter(this, void 0, void 0, function* () {\n        });\n    }\n    // send receive\n    // 1. fetch all \n    // 2. send back receive\n    // 3. check has more, if so, repeat from 1st step\n    sendFetchAndConsumeMessages(msgId, topic) {\n        return __awaiter(this, void 0, void 0, function* () {\n            //1. send fetch\n            this.events.once(msgId, (fetchedMessages) => __awaiter(this, void 0, void 0, function* () {\n                var _a, _b;\n                //2. consume received messages\n                if (fetchedMessages.result) {\n                    var hasMore = fetchedMessages.result.hasMore;\n                    var receivedMsgs = fetchedMessages.result.data;\n                    if (receivedMsgs) {\n                        for (let i = 0; i < receivedMsgs.length; i++) {\n                            let msg = receivedMsgs[i];\n                            if (msg && msg.topic == topic) {\n                                let messageId = msg.messageId;\n                                log.reportLog('5. get fetch result');\n                                yield this.connector.getMsgPayloadFromHistory(msg);\n                                // send receive command to relay server\n                                this.refreshPackageId();\n                                yield this.sendReceive(this.packageId.toString(), messageId, topic);\n                            }\n                        }\n                    }\n                    // 3. check hasmore\n                    if (hasMore) {\n                        this.refreshPackageId();\n                        yield this.sendFetchAndConsumeMessages(this.packageId.toString(), topic);\n                    }\n                }\n                else {\n                    log.logDebug(`CONNECT: get error rsp ${(_a = fetchedMessages.error) === null || _a === void 0 ? void 0 : _a.code} : ${(_b = fetchedMessages.error) === null || _b === void 0 ? void 0 : _b.message}`);\n                }\n            }));\n            log.logDebug('5. send fetch more');\n            log.reportLog('5. send fetch more');\n            const timeFive = new Date().getTime();\n            (0, log_1.logDebug)(\"ConnectTime---5->\", timeFive - this.timeLog);\n            const payload = {\n                id: msgId,\n                jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                method: commands_1.CONNECT_METHOD_FETCHMSG,\n                params: {\n                    data: {\n                        topic: topic\n                    }\n                }\n            };\n            yield this.connector.send(() => __awaiter(this, void 0, void 0, function* () {\n                log.logDebug('CONNECT: reconnect before send');\n                return yield this.connector.connect();\n            }), payload);\n        });\n    }\n    cleanCache() {\n        return __awaiter(this, void 0, void 0, function* () {\n            log.reportLog('connection cache clean called');\n            this.connectStorage.clearCache();\n        });\n    }\n    saveSessionContent(key, data) {\n        if (!data) {\n            this.connectStorage.clearCache(storageconstants_1.OKXCONNECTOR_SESSION_PREFIX_KEY + key);\n        }\n        let jsonData = (0, safejson_1.safeJsonStringify)(data);\n        this.connectStorage.encryptStoreMsg(jsonData, storageconstants_1.OKXCONNECTOR_SESSION_PREFIX_KEY + key);\n    }\n    getSessionContent(key) {\n        let jsonStr = this.connectStorage.getAndDecrypt(storageconstants_1.OKXCONNECTOR_SESSION_PREFIX_KEY + key);\n        if (jsonStr) {\n            let object = (0, safejson_1.safeJsonParse)(jsonStr);\n            return object;\n        }\n        return undefined;\n    }\n    getCurrentConnectionReady() {\n        return this.isWalletPKReady();\n    }\n}\nexports.ConnectionManager = ConnectionManager;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 4251, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4256, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/connect/walletConnectionConstants.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletConnectionManagerEvent = exports.WalletConnectionManagerTopicInfoCacheKey = void 0;\nexports.WalletConnectionManagerTopicInfoCacheKey = \"wcmtic\";\nexports.WalletConnectionManagerEvent = {\n    RECEIVE_REQUEST: \"payload\"\n};\n"],"names":[],"mappings":"AAAA;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,4BAA4B,GAAG,QAAQ,wCAAwC,GAAG,KAAK;AAC/F,QAAQ,wCAAwC,GAAG;AACnD,QAAQ,4BAA4B,GAAG;IACnC,iBAAiB;AACrB","ignoreList":[0]}},
    {"offset": {"line": 4265, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4270, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/connect/walletConnectionManager.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletConnectionManager = void 0;\nconst connect_1 = require(\"./connect\");\nconst commands_1 = require(\"./commands\");\nconst storageconstants_1 = require(\"./storageconstants\");\nconst jwtconstants_1 = require(\"./jwtconstants\");\nconst constants_1 = require(\"./constants\");\nconst walletConnectionConstants_1 = require(\"./walletConnectionConstants\");\nconst eventemitter3_1 = require(\"eventemitter3\");\nconst storage_1 = require(\"./storage\");\nconst utils_1 = require(\"../utils/utils\");\nconst crypto_1 = require(\"../crypto/crypto\");\nconst jwt_1 = require(\"./jwt\");\nconst safejson_1 = require(\"../utils/safejson\");\nconst log = __importStar(require(\"../utils/log\"));\nconst log_1 = require(\"../utils/log\");\nconst utils_2 = require(\"../utils\");\nclass WalletConnectionManager {\n    constructor() {\n        this.events = new eventemitter3_1.EventEmitter();\n        this.communicateEvents = new eventemitter3_1.EventEmitter();\n        log.logDebug('connect manager construct');\n        // local storage\n        this.connectStorage = new storage_1.Storage(storageconstants_1.OKXCONNECTOR_CACHE_KEY);\n        // this.crypto = new SessionCrypto()\n        this.jwtKeyPair = this.getCachedJWTKeyPair();\n        this.saveJWTKeyPair(this.jwtKeyPair);\n        // wss connection\n        this.connector = new connect_1.OKXWalletConnector(constants_1.OKXCONNECTOR_WS_URL_1);\n        this.packageId = Date.now();\n        // connection state\n        this.sessionCryptoInfoMap = new Map();\n        // log.logDebug(`this.connectedWalletPK  constructor   ${this.connectedWalletPK}`)\n        this.inLogin = false;\n        this.isLogined = false;\n    }\n    refreshPackageId(offset = 0) {\n        this.packageId = Date.now() + offset;\n    }\n    saveCryptoKeyPair(topicId, keyPair) {\n        let cacheInfo = (0, safejson_1.safeJsonStringify)(keyPair);\n        // encrypt kp\n        this.connectStorage.encryptStoreMsg(cacheInfo, storageconstants_1.OKXCONNECTOR_CRYPTO_KEY + topicId);\n    }\n    getCachedCryptoKeyPair(topicId) {\n        // decrypt kp\n        const kp = this.connectStorage.getAndDecrypt(storageconstants_1.OKXCONNECTOR_CRYPTO_KEY + topicId);\n        const content = kp;\n        if (typeof content == 'string') {\n            log.logDebug('get cached crypto key:');\n            log.logDebug(content);\n            let keyPairInfo = (0, safejson_1.safeJsonParse)(content);\n            return keyPairInfo;\n        }\n        else {\n            this.connectStorage.clearCache();\n        }\n        return null;\n    }\n    saveJWTKeyPair(keyPair) {\n        var strkeyPair = {\n            publicKey: (0, utils_1.toHexString)(keyPair.publicKey),\n            secretKey: (0, utils_1.toHexString)(keyPair.secretKey)\n        };\n        log.logDebug('save jwt kp');\n        let cacheInfo = (0, safejson_1.safeJsonStringify)(strkeyPair);\n        log.logDebug(cacheInfo);\n        // encrypt jwt kp\n        this.connectStorage.encryptStoreMsg(cacheInfo, storageconstants_1.OKXCONNECTOR_JWT_KEY);\n        log.logDebug('after save jwt kp');\n    }\n    getCachedJWTKeyPair() {\n        const kp = this.connectStorage.getAndDecrypt(storageconstants_1.OKXCONNECTOR_JWT_KEY);\n        const content = kp;\n        if (typeof content == 'string') {\n            // TODO: decrypt jwt kp\n            log.logDebug('get cached jwt kp:');\n            log.logDebug(content);\n            let strKeyPairInfo = (0, safejson_1.safeJsonParse)(content);\n            log.logDebug('save jwt kp');\n            log.logDebug(strKeyPairInfo);\n            var keyPair = {\n                publicKey: (0, utils_1.hexToByteArray)(strKeyPairInfo.publicKey),\n                secretKey: (0, utils_1.hexToByteArray)(strKeyPairInfo.secretKey)\n            };\n            return keyPair;\n        }\n        else {\n            return (0, jwt_1.generateKeyPair)();\n        }\n    }\n    isTopicPublicKeyExist(topicId) {\n        log.logDebug(`isTopicPublicKeyExist  ===> ${topicId}`);\n        return this.sessionCryptoInfoMap.get(topicId);\n    }\n    makeJWT(timestampStr) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield (0, jwt_1.signJWT)(timestampStr, jwtconstants_1.OKXCONNECTOR_JWT_WALLET_SIDE, jwtconstants_1.OKXCONNECTOR_JWT_TTL, // 24h\n            this.jwtKeyPair);\n        });\n    }\n    parseInternalMsg(internalMsg) {\n        try {\n            let internalObj = (0, safejson_1.safeJsonParse)(internalMsg);\n            let origin = internalObj['ivur-igbfft-ptjip'];\n            if (origin && origin.length > 0) {\n                let originContent = (0, utils_2.base64decode)(origin, true);\n                return originContent.toString();\n            }\n        }\n        catch (error) {\n            log.logError('parse internal msg', error);\n        }\n    }\n    updateClientId(topic, clientId) {\n        let sessionInfo = this.sessionCryptoInfoMap.get(topic);\n        (0, log_1.logDebug)('updateClientId', sessionInfo, topic, clientId);\n        if (sessionInfo && clientId && clientId.length > 0) {\n            if (sessionInfo.cid) {\n                // check\n                let lastCheck = (0, utils_1.getLastSixMd5Hash)(clientId);\n                if (sessionInfo.cid == lastCheck) {\n                    sessionInfo.dappPublicKey = clientId;\n                }\n                else {\n                    log.logError('cid check failed', sessionInfo, topic, clientId);\n                }\n            }\n            else {\n                sessionInfo.dappPublicKey = clientId;\n            }\n            // \n            this.syncCacheSessionInfo();\n        }\n        return false;\n    }\n    parsePackage(topic_1, input_1) {\n        return __awaiter(this, arguments, void 0, function* (topic, input, ignoreACK = false) {\n            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n            this.events.emit(input.id, input);\n            // emit event\n            let sessionInfo = this.sessionCryptoInfoMap.get(topic);\n            log.logDebug('get sessionInfo for decrypt topic:', topic);\n            log.logDebug('get sessionInfo for decrypt:', input.id, topic, sessionInfo, this.sessionCryptoInfoMap);\n            if (sessionInfo && input.params.data) {\n                if ((_a = input.params.data) === null || _a === void 0 ? void 0 : _a.message) {\n                    // try parse internal message\n                    if ((_b = input.params.data) === null || _b === void 0 ? void 0 : _b.isInternalData) {\n                        let inner_message = (_c = input.params.data) === null || _c === void 0 ? void 0 : _c.message;\n                        let inner_topic = (_d = input.params.data) === null || _d === void 0 ? void 0 : _d.topic;\n                        let originContent = this.parseInternalMsg(inner_message);\n                        (0, log_1.logDebug)('parse internal origin: ', originContent);\n                        if (originContent && originContent.length > 0) {\n                            this.communicateEvents.emit(\"origin\", originContent, inner_topic);\n                        }\n                    }\n                    else {\n                        // try parse message base64\n                        try {\n                            let message = (_e = input.params.data) === null || _e === void 0 ? void 0 : _e.message;\n                            if (message.trimStart().startsWith('{')) {\n                                let messageObj = (0, safejson_1.safeJsonParse)(message);\n                                if (messageObj.method) {\n                                    if (messageObj.method == 'session_info') {\n                                        let sessionInfoString = messageObj.params.sessionInfo;\n                                        let base64Content = (0, utils_2.base64decode)(sessionInfoString, false);\n                                        (0, log_1.logDebug)(\"wallet connection manager requset base64Content:\", base64Content);\n                                        (0, log_1.logDebug)(\"base64Content:\" + base64Content);\n                                        let inner_connection = base64Content.toObject();\n                                        this.updateClientId(topic, inner_connection.clientId);\n                                    }\n                                    (0, log_1.logDebug)('<<< parse raw msg:', topic, messageObj);\n                                    this.communicateEvents.emit(topic, message);\n                                }\n                            }\n                            else {\n                                let message = sessionInfo.crypto.decryptWallet((_f = input.params.data) === null || _f === void 0 ? void 0 : _f.message, sessionInfo.dappPublicKey);\n                                (0, log_1.logDebug)('<<< receive msg:', topic, message);\n                                this.communicateEvents.emit(topic, message);\n                            }\n                        }\n                        catch (error) {\n                            let message = sessionInfo.crypto.decryptWallet((_g = input.params.data) === null || _g === void 0 ? void 0 : _g.message, sessionInfo.dappPublicKey);\n                            (0, log_1.logDebug)('<<< receive msg:', topic, message);\n                            this.communicateEvents.emit(topic, message);\n                        }\n                    }\n                }\n                else {\n                }\n            }\n            // send back ACK\n            if (!ignoreACK) {\n                yield this.sendACK(input.id, true);\n                if (topic) {\n                    let inputObj = input;\n                    if ((_j = (_h = inputObj.params) === null || _h === void 0 ? void 0 : _h.data) === null || _j === void 0 ? void 0 : _j.messageId) {\n                        this.refreshPackageId();\n                        yield this.sendReceive(this.packageId.toString(), (_l = (_k = inputObj.params) === null || _k === void 0 ? void 0 : _k.data) === null || _l === void 0 ? void 0 : _l.messageId, topic);\n                    }\n                }\n            }\n        });\n    }\n    recovrySessionInfoFromCache() {\n        // get topic ids and keys from session\n        // WalletConnectionCryptoCacheMap\n        // {[topicId]: {cryptoKeypair: {publicKey:string, secretKey:string}, dappPublicKey:clientId}}\n        let jsonStr = this.connectStorage.getAndDecrypt(walletConnectionConstants_1.WalletConnectionManagerTopicInfoCacheKey);\n        log.logDebug('get cached sessionInfos:', jsonStr);\n        if (jsonStr) {\n            let cacheMap = (0, safejson_1.safeJsonParse)(jsonStr);\n            for (let topicId in cacheMap) {\n                let topicItem = cacheMap[topicId];\n                log.logDebug('make topicItem:', topicItem);\n                let cryptoItem = {\n                    topic: topicId,\n                    crypto: new crypto_1.SessionCrypto({\n                        publicKey: topicItem.cryptoKeyPair.publicKey,\n                        secretKey: topicItem.cryptoKeyPair.secretKey\n                    }),\n                    dappPublicKey: topicItem.dappPublicKey,\n                    cid: topicItem.cid\n                };\n                this.sessionCryptoInfoMap.set(topicId, cryptoItem);\n            }\n        }\n        log.logDebug('get cached sessionInfos map:', this.sessionCryptoInfoMap);\n    }\n    syncCacheSessionInfo() {\n        let cacheMap = {};\n        for (let [topicId, cryptoItem] of this.sessionCryptoInfoMap) {\n            log.logDebug('for each Keys', topicId);\n            if (cryptoItem) {\n                cacheMap[topicId] = {\n                    cryptoKeyPair: cryptoItem.crypto.stringifyKeypair(),\n                    dappPublicKey: cryptoItem.dappPublicKey,\n                    cid: cryptoItem.cid\n                };\n            }\n        }\n        let jsonData = (0, safejson_1.safeJsonStringify)(cacheMap);\n        log.logDebug('sync cache sessionInfos:', jsonData);\n        this.connectStorage.encryptStoreMsg(jsonData, walletConnectionConstants_1.WalletConnectionManagerTopicInfoCacheKey);\n    }\n    cacheSessionInfo(topic, sessionInfo, sync = true) {\n        let dappPublicKey = sessionInfo.dappPublicKey;\n        // 1. search dapp public related topic ids\n        let duplicatedTopics = [];\n        for (let [topicId, cryptoItem] of this.sessionCryptoInfoMap) {\n            log.logDebug('for each Keys', topicId);\n            if (cryptoItem.dappPublicKey == dappPublicKey) {\n                log.logDebug('duplicated dapp public key:', topicId, dappPublicKey);\n                duplicatedTopics.push(topicId);\n            }\n        }\n        for (let [topicId, cryptoItem] of this.sessionCryptoInfoMap) {\n            if (duplicatedTopics.includes(topicId)) {\n                this.sessionCryptoInfoMap.delete(topicId);\n            }\n        }\n        // discard useless topics\n        log.logDebug('cleaned connect session cache:', this.sessionCryptoInfoMap);\n        // 2. remove previous connected topic ids\n        // 3. write in current topic\n        this.sessionCryptoInfoMap.set(topic, sessionInfo);\n        // TODO: search domain info and then delete \n        log.logDebug('cache sessionInfo:', topic, sessionInfo, this.sessionCryptoInfoMap);\n        if (sync) {\n            this.syncCacheSessionInfo();\n        }\n        return duplicatedTopics;\n    }\n    // add and subscribe topic\n    appendTopic(topic, sessionPublicKey, cid) {\n        return __awaiter(this, void 0, void 0, function* () {\n            (0, log_1.logDebug)('4.1. get append Topic:', topic);\n            // 1. check if connected\n            return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\n                if (!this.isLogined) {\n                    var error = new Error();\n                    error.message = \"connection is not logined\";\n                    error.name = \"append error\";\n                    // throw error\n                    reject(error);\n                    return;\n                }\n                // 2. subscribe topic and session public key\n                let cryptoItem = {\n                    topic: topic,\n                    crypto: new crypto_1.SessionCrypto(),\n                    dappPublicKey: sessionPublicKey ? sessionPublicKey : \"\",\n                    cid: cid\n                };\n                let duplicatedTopics = this.cacheSessionInfo(topic, cryptoItem, false);\n                // make sure cache session info before subscribe\n                yield this.subscribeTopics(Array.from([topic]));\n                this.refreshPackageId();\n                log.logDebug(`5. subscribe callback then fetch append message: ${this.packageId}, ${topic}`);\n                log.reportLog(`5. subscribe callback then fetch append message`);\n                const timeF = new Date().getTime();\n                (0, log_1.logDebug)(\"Append --subscribe callback->\", timeF - this.timeLog);\n                resolve(duplicatedTopics);\n            }));\n        });\n    }\n    confirmAppendingTopics() {\n        this.syncCacheSessionInfo();\n    }\n    connect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.timeLog = new Date().getTime();\n            (0, log_1.logDebug)(\"[Wallet] ConnectTime---enter->\", this.timeLog);\n            log.reportLog('wallet connect connect called');\n            // 0. get cached topics and infos\n            let timestampStr = Date.now().toString();\n            var jwtToken = yield this.makeJWT(timestampStr);\n            log.logDebug(`generate jwt token: ${jwtToken}`);\n            this.connectStorage.saveContent(jwtToken, 'jwt');\n            this.recovrySessionInfoFromCache();\n            // 1.\n            return new Promise((resolve, reject) => {\n                // 1. when websocket opened\n                this.inLogin = true;\n                this.connector.onOpen(() => __awaiter(this, void 0, void 0, function* () {\n                    log.logDebug(`1. connector on open`);\n                    log.reportLog('1. wallet connect connect on open');\n                    const timeOne = new Date().getTime();\n                    (0, log_1.logDebug)(\"ConnectTime---open->\", timeOne - this.timeLog);\n                    //2. send jwt to login\n                    this.events.once(this.packageId.toString(), (rsp) => __awaiter(this, void 0, void 0, function* () {\n                        // ack\n                        if (rsp && rsp.error) {\n                            log.logError('failed when login');\n                            yield this.connector.disconnect();\n                            var error = new Error();\n                            error.message = rsp.error.message;\n                            error.name = rsp.error.code.toString();\n                            // throw error\n                            reject(error);\n                        }\n                        else {\n                            this.isLogined = true;\n                            resolve();\n                            // 3. subscribe cached topics\n                            log.logDebug('3. subscribe cached topics', this.sessionCryptoInfoMap);\n                            log.reportLog('3. wallet connect connect subscribe cached topics');\n                            if (this.sessionCryptoInfoMap.size > 0) {\n                                yield this.subscribeTopics(Array.from(this.sessionCryptoInfoMap.keys()));\n                            }\n                        }\n                    }));\n                    log.logDebug(`2. login called`);\n                    log.reportLog('2. wallet connect login called');\n                    yield this.connector.send(() => __awaiter(this, void 0, void 0, function* () {\n                        log.logDebug('CONNECT: reconnect before send');\n                        return yield this.connector.connect();\n                    }), {\n                        id: this.packageId.toString(),\n                        jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                        method: commands_1.CONNECT_METHOD_LOGIN,\n                        params: {\n                            token: jwtToken\n                        }\n                    });\n                }));\n                this.connector.connect().catch((err) => {\n                    (0, log_1.logDebug)('WalletConnectionManager connect error', err);\n                    reject(err);\n                });\n                // add callback\n                this.connector.addPackageParse((event) => {\n                    var _a, _b;\n                    log.logDebug(`connect: parse package`);\n                    log.logDebug(event);\n                    if (!(\"params\" in event) || !(\"data\" in event[\"params\"])) {\n                        this.parsePackage(\"\", event, true);\n                        return;\n                    }\n                    // ignore receive echo\n                    if ((_a = event.params.data) === null || _a === void 0 ? void 0 : _a.topic) {\n                        this.parsePackage((_b = event.params.data) === null || _b === void 0 ? void 0 : _b.topic, event, event.method === commands_1.CONNECT_METHOD_RECEIVE);\n                    }\n                });\n                // this.connector.addListener(safeJsonStringify(event), (rawMsg: string)=> {\n                //    rawMsg = rawMsg.replace(/'/g, '\"')\n                //    log.logDebug(`addListener ===> ${rawMsg}`)\n                //    if (typeof rawMsg !== 'undefined') {\n                //       var msgObj = safeJsonParse(rawMsg)\n                //       var msg = msgObj.message\n                //       let crypto = \n                //       var result = this.crypto.decrypt(msg, this.connectedWalletPK)\n                //       log.logDebug(`addListener ===> ${result}`)\n                //       return result\n                //    }\n                //    return undefined\n                // }, ()=>{\n                //    // emit success\n                // }, ()=>{\n                //    // emit fail\n                // })\n            });\n        });\n    }\n    // topic session\n    // approveclientId\n    getSessionPublicKey(topicId) {\n        if (this.isTopicPublicKeyExist(topicId)) {\n            let item = this.sessionCryptoInfoMap.get(topicId);\n            if (item) {\n                return (0, utils_1.toHexString)(item.crypto.keyPair.publicKey);\n            }\n        }\n        return undefined;\n    }\n    getCurrentCachedTopicIdList() {\n        return Array.from(this.sessionCryptoInfoMap.keys());\n    }\n    disconnect() {\n        return __awaiter(this, arguments, void 0, function* (fromRestore = false) {\n            yield this.connector.disconnect();\n            //clean cached topic\n            //public key\n            this.connectStorage.clearCache(storageconstants_1.OKXCONNECTOR_TOKEN_CACHE);\n            if (!fromRestore) {\n                this.connectStorage.clearCache(storageconstants_1.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE);\n            }\n        });\n    }\n    send(topic_1, msg_1) {\n        return __awaiter(this, arguments, void 0, function* (topic, msg, needPublicKey = false, ttl = constants_1.OKXCONNECTOR_MESSAGE_TTL, useRaw = false) {\n            var _a, _b;\n            // make send msg payload\n            log.logDebug(`message send =====> ${msg}`);\n            if (!this.isTopicPublicKeyExist(topic)) {\n                // channel not ready\n                throw new Error('connection not finish');\n            }\n            let connectedDappPK = (_a = this.sessionCryptoInfoMap.get(topic)) === null || _a === void 0 ? void 0 : _a.dappPublicKey;\n            let cryptoObject = (_b = this.sessionCryptoInfoMap.get(topic)) === null || _b === void 0 ? void 0 : _b.crypto;\n            let messageObj = undefined;\n            if (useRaw) {\n                messageObj = {\n                    message: msg,\n                };\n            }\n            if (cryptoObject && connectedDappPK && !useRaw) {\n                let message = cryptoObject.encryptWallet(msg, connectedDappPK);\n                messageObj = {\n                    message: message,\n                };\n            }\n            if (messageObj) {\n                if (needPublicKey && cryptoObject) {\n                    messageObj.clientId = (0, utils_1.toHexString)(cryptoObject.keyPair.publicKey);\n                    // let privateKey = toHexString(cryptoObject.keyPair.secretKey)\n                    // log.logDebug(`message send use dapp publicKey =====> ${connectedDappPK}`)\n                    // log.logDebug(`message send use publicKey =====> ${messageObj.clientId}`)\n                    // log.logDebug(`message send use secretKey =====> ${privateKey}`)\n                }\n                this.refreshPackageId();\n                const payload = {\n                    id: this.packageId.toString(),\n                    method: commands_1.CONNECT_METHOD_PUBLISH,\n                    jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                    params: {\n                        message: {\n                            topic: topic,\n                            message: (0, safejson_1.safeJsonStringify)(messageObj),\n                            ttl: ttl\n                        }\n                    } // crypted\n                };\n                this.events.once(this.packageId.toString(), (rsp) => __awaiter(this, void 0, void 0, function* () {\n                    // ack\n                    if (rsp && rsp.error) {\n                        log.logError(`@${new Date().toUTCString()} >>> failed when send msg`);\n                    }\n                    else if (rsp && !rsp.error) {\n                        log.logDebug(`CONNECTION @[${new Date().toUTCString()}] >>> send msg with id ${this.packageId} successed`);\n                    }\n                }));\n                yield this.connector.send(() => __awaiter(this, void 0, void 0, function* () {\n                    log.logDebug('CONNECT: reconnect before send');\n                    return yield this.connector.connect();\n                }), payload);\n                return this.packageId;\n            }\n        });\n    }\n    sendACK(msgId_1, success_1) {\n        return __awaiter(this, arguments, void 0, function* (msgId, success, reason = undefined) {\n            if (success === true) {\n                const payload = {\n                    id: msgId,\n                    jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                    result: true\n                };\n                yield this.connector.send(() => __awaiter(this, void 0, void 0, function* () {\n                    log.logDebug('CONNECT: reconnect before send');\n                    return yield this.connector.connect();\n                }), payload);\n            }\n            else if (reason) {\n                const payload = {\n                    id: msgId,\n                    jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                    error: {\n                        code: reason.code, //int\n                        message: reason.message\n                    }\n                };\n                yield this.connector.send(() => __awaiter(this, void 0, void 0, function* () {\n                    log.logDebug('CONNECT: reconnect before send');\n                    return yield this.connector.connect();\n                }), payload);\n            }\n        });\n    }\n    // send receive\n    sendReceive(msgId, messageId, topic) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const payload = {\n                id: msgId,\n                jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                method: commands_1.CONNECT_METHOD_RECEIVE,\n                params: {\n                    data: {\n                        messageId: messageId,\n                        topic: topic\n                    }\n                }\n            };\n            yield this.connector.send(() => __awaiter(this, void 0, void 0, function* () {\n                log.logDebug('CONNECT: reconnect before send');\n                return yield this.connector.connect();\n            }), payload);\n        });\n    }\n    sendUnsubscribe(topic) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // TODO: make disconnect payload\n            yield this.connector.send(() => __awaiter(this, void 0, void 0, function* () {\n                log.logDebug('CONNECT: reconnect before send');\n                return yield this.connector.connect();\n            }), {\n                id: this.packageId.toString(),\n                jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                method: commands_1.CONNECT_METHOD_UNSUB,\n                params: {\n                    topic: topic\n                }\n            });\n            // remove topicId\n            this.sessionCryptoInfoMap.delete(topic);\n            this.syncCacheSessionInfo();\n        });\n    }\n    // send receive\n    // 1. fetch all \n    // 2. send back receive\n    // 3. check has more, if so, repeat from 1st step\n    sendFetchAndConsumeMessages(msgId, topic) {\n        return __awaiter(this, void 0, void 0, function* () {\n            //1. send fetch\n            this.events.once(msgId, (fetchedMessages) => __awaiter(this, void 0, void 0, function* () {\n                var _a, _b;\n                //2. consume received messages\n                if (fetchedMessages.result) {\n                    var hasMore = fetchedMessages.result.hasMore;\n                    var receivedMsgs = fetchedMessages.result.data;\n                    if (receivedMsgs) {\n                        for (let i = 0; i < receivedMsgs.length; i++) {\n                            let msg = receivedMsgs[i];\n                            if (msg && msg.topic == topic) {\n                                let messageId = msg.messageId;\n                                yield this.connector.getMsgPayloadFromHistory(msg);\n                                // send receive command to relay server\n                                this.refreshPackageId();\n                                yield this.sendReceive(this.packageId.toString(), messageId, topic);\n                            }\n                        }\n                    }\n                    // 3. check hasmore\n                    if (hasMore) {\n                        this.refreshPackageId();\n                        yield this.sendFetchAndConsumeMessages(this.packageId.toString(), topic);\n                    }\n                }\n                else {\n                    log.logDebug(`CONNECT: get error rsp ${(_a = fetchedMessages.error) === null || _a === void 0 ? void 0 : _a.code} : ${(_b = fetchedMessages.error) === null || _b === void 0 ? void 0 : _b.message}`);\n                }\n            }));\n            log.logDebug('5. send fetch more');\n            const timeFive = new Date().getTime();\n            (0, log_1.logDebug)(\"ConnectTime---5->\", timeFive - this.timeLog);\n            const payload = {\n                id: msgId,\n                jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                method: commands_1.CONNECT_METHOD_FETCHMSG,\n                params: {\n                    data: {\n                        topic: topic\n                    }\n                }\n            };\n            yield this.connector.send(() => __awaiter(this, void 0, void 0, function* () {\n                log.logDebug('CONNECT: reconnect before send');\n                return yield this.connector.connect();\n            }), payload);\n        });\n    }\n    sendBatchFetchAndConsumeMessages(packageId, topicIdList) {\n        return __awaiter(this, void 0, void 0, function* () {\n            //1. send fetch\n            this.events.once(packageId, (fetchedMessages) => __awaiter(this, void 0, void 0, function* () {\n                var _a, _b;\n                //2. consume received messages\n                if (fetchedMessages.result) {\n                    var hasMore = fetchedMessages.result.hasMore;\n                    var receivedMsgs = fetchedMessages.result.data;\n                    if (receivedMsgs) {\n                        for (let i = 0; i < receivedMsgs.length; i++) {\n                            let msg = receivedMsgs[i];\n                            if (msg && msg.topic) {\n                                let messageId = msg.messageId;\n                                yield this.connector.getMsgPayloadFromHistory(msg);\n                                // send receive command to relay server\n                                this.refreshPackageId(i);\n                                yield this.sendReceive(this.packageId.toString(), messageId, msg.topic);\n                            }\n                        }\n                    }\n                    // 3. check hasmore\n                    if (hasMore) {\n                        this.refreshPackageId();\n                        yield this.sendBatchFetchAndConsumeMessages(this.packageId.toString(), topicIdList);\n                    }\n                }\n                else {\n                    log.logDebug(`CONNECT: get error rsp ${(_a = fetchedMessages.error) === null || _a === void 0 ? void 0 : _a.code} : ${(_b = fetchedMessages.error) === null || _b === void 0 ? void 0 : _b.message}`);\n                }\n            }));\n            log.logDebug('5. send fetch more');\n            log.reportLog('5. send fetch more');\n            const timeFive = new Date().getTime();\n            (0, log_1.logDebug)(\"ConnectTime---5->\", timeFive - this.timeLog);\n            const payload = {\n                id: packageId,\n                jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                method: commands_1.CONNECT_METHOD_BATCH_FETCHMSG,\n                params: {\n                    topics: topicIdList,\n                    withInternalData: true\n                }\n            };\n            yield this.connector.send(() => __awaiter(this, void 0, void 0, function* () {\n                log.logDebug('CONNECT: reconnect before send');\n                yield this.connector.connect();\n            }), payload);\n        });\n    }\n    cleanCache() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.connectStorage.clearCache();\n        });\n    }\n    saveSessionContent(key, data) {\n        if (!data) {\n            this.connectStorage.clearCache(storageconstants_1.OKXCONNECTOR_SESSION_PREFIX_KEY + key);\n        }\n        let jsonData = (0, safejson_1.safeJsonStringify)(data);\n        this.connectStorage.encryptStoreMsg(jsonData, storageconstants_1.OKXCONNECTOR_SESSION_PREFIX_KEY + key);\n    }\n    getSessionContent(key) {\n        let jsonStr = this.connectStorage.getAndDecrypt(storageconstants_1.OKXCONNECTOR_SESSION_PREFIX_KEY + key);\n        if (jsonStr) {\n            let object = (0, safejson_1.safeJsonParse)(jsonStr);\n            return object;\n        }\n        return undefined;\n    }\n    // subscribe then fetch messages for each topics\n    subscribeTopics(topicIdList) {\n        return __awaiter(this, void 0, void 0, function* () {\n            (0, log_1.logDebug)(\"4. topicid list\", topicIdList);\n            log.reportLog(\"4. topicid list\");\n            this.refreshPackageId();\n            const timeF = new Date().getTime();\n            (0, log_1.logDebug)(\"ConnectTime--subscribe callback->\", timeF - this.timeLog);\n            return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\n                let finishCount = 0;\n                //3. send subscribe\n                for (let idx = 0; idx < topicIdList.length; ++idx) {\n                    let topicId = topicIdList[idx];\n                    this.refreshPackageId(idx);\n                    this.events.once(this.packageId.toString(), (rsp) => __awaiter(this, void 0, void 0, function* () {\n                        // ack\n                        if (rsp && rsp.error) {\n                            log.logError('failed when subscribe');\n                            yield this.connector.disconnect();\n                            var error = new Error();\n                            error.message = rsp.error.message;\n                            error.name = rsp.error.code.toString();\n                            // reject(error)\n                            finishCount += 1;\n                            if (finishCount == topicIdList.length) {\n                                resolve();\n                            }\n                        }\n                        this.refreshPackageId(idx);\n                        const timeF = new Date().getTime();\n                        (0, log_1.logDebug)(\"ConnectTime--subscribe callback->\", timeF - this.timeLog);\n                        finishCount += 1;\n                        if (finishCount == topicIdList.length) {\n                            // 4. fetch messages\n                            log.logDebug(`5. send fetch msg: ${this.packageId}, ${topicId}`);\n                            yield this.sendBatchFetchAndConsumeMessages(this.packageId.toString(), topicIdList);\n                            resolve();\n                        }\n                    }));\n                    log.logDebug(`3. login callback then send subscribe: ${this.packageId}, ${topicId}`);\n                    log.reportLog('3. login callback then send subscribe');\n                    const timeTh = new Date().getTime();\n                    (0, log_1.logDebug)(\"ConnectTime---login callback->\", timeTh - this.timeLog);\n                    yield this.connector.send(() => __awaiter(this, void 0, void 0, function* () {\n                        log.logDebug('CONNECT: reconnect before send');\n                        return yield this.connector.connect();\n                    }), {\n                        id: this.packageId.toString(),\n                        jsonrpc: constants_1.CONNECT_JSONRPC_VER,\n                        method: commands_1.CONNECT_METHOD_SUB,\n                        params: {\n                            topic: topicId\n                        }\n                    });\n                }\n            }));\n        });\n    }\n}\nexports.WalletConnectionManager = WalletConnectionManager;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 5071, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5076, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/connect/sessionUtils.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.buildNameSpacesByConnectResponse = buildNameSpacesByConnectResponse;\nexports.buildRequestAccountNameSpacesByConnectResponse = buildRequestAccountNameSpacesByConnectResponse;\nconst log_1 = require(\"../utils/log\");\nfunction buildNameSpacesByConnectResponse(connectResponse) {\n    let requestAccountNameSpaces = buildRequestAccountNameSpacesByConnectResponse(connectResponse);\n    return requestAccountNameSpaces;\n}\nfunction buildRequestAccountNameSpacesByConnectResponse(connectResponse) {\n    let result = {};\n    (0, log_1.logDebug)('buildRequestAccountNameSpacesByConnectResponse start connectResponse>>', JSON.stringify(connectResponse));\n    let universalResponse = connectResponse.payload.responses.find(item => item.name === 'requestAccounts');\n    const tonAddress = connectResponse.payload.responses.find(item => item.name === 'ton_addr');\n    const tonProof = connectResponse.payload.responses.find(item => item.name === 'ton_proof');\n    if (tonAddress && !universalResponse) { //adapt tonsdk\n        (0, log_1.logDebug)('buildRequestAccountNameSpacesByConnectResponse adapt ton data >>');\n        let address = tonAddress.address;\n        address = 'ton:' + tonAddress.network + \":\" + address;\n        let data = {\n            ton_addr: tonAddress\n        };\n        if (tonProof) {\n            data.ton_proof = tonProof;\n        }\n        universalResponse = {\n            name: \"requestAccounts\",\n            accounts: [{\n                    namespace: 'ton',\n                    addresses: [address],\n                    methods: ['ton_sendTransaction'],\n                    extra: {},\n                    data: data,\n                }]\n        };\n    }\n    (0, log_1.logDebug)('buildRequestAccountNameSpacesByConnectResponse end universalResponse>>>', JSON.stringify(universalResponse));\n    universalResponse.accounts.forEach(item => {\n        var chains = [];\n        var accounts = [];\n        item.addresses.forEach(addressItem => {\n            var addressArr = addressItem.split(\":\");\n            (0, log_1.logDebug)('buildRequestAccountNameSpacesByConnectResponse addressArr>>', addressArr.length);\n            if (addressArr.length >= 3) {\n                let chain = addressArr.slice(0, 2).join(\":\");\n                chains.push(chain);\n                accounts.push(addressItem);\n                (0, log_1.logDebug)('buildRequestAccountNameSpacesByConnectResponse chain:>>', chain, \"addressItem:\", addressItem);\n            }\n        });\n        if (item.data && item.data.ton_addr) {\n            item.data.ton_addr.name = 'ton_addr';\n        }\n        if (item.data && item.data.ton_proof) {\n            item.data.ton_proof.name = 'ton_proof';\n        }\n        result[item.namespace] = {\n            chains: chains,\n            accounts: accounts,\n            methods: item.methods,\n            extra: item.extra,\n            payload: item.data\n        };\n        (0, log_1.logDebug)('buildRequestAccountNameSpacesByConnectResponse result>>', JSON.stringify(result));\n    });\n    return result;\n}\n/*export function buildTonNameSpaceByConnectResponse(connectResponse: ConnectResponseSuccess): Namespaces | undefined {\n    const tonAddrItem: TonAddressItemReply = connectResponse.payload.responses.find(\n        item => item.name === 'ton_addr'\n    ) as TonAddressItemReply;\n\n    const tonProfItem: TonProofItemReply = connectResponse.payload.responses.find(\n        item => item.name === 'ton_proof'\n    ) as TonProofItemReply;\n\n    if (!tonAddrItem) {\n        return undefined\n    }\n\n    return {\n        NameSpaceKeyTON: {\n            chains: [tonAddrItem.network],\n            accounts: [],\n            methods: connectResponse.payload.wallet.features?.ton,\n            payload: {\n                tonAccount: {\n                    address: tonAddrItem.address,\n                    chain: tonAddrItem.network,\n                    walletStateInit: tonAddrItem.walletStateInit,\n                    publicKey: tonAddrItem.publicKey\n                },\n                tonProof: tonProfItem\n            }\n        }\n    }\n}*/\n"],"names":[],"mappings":"AAAA;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,gCAAgC,GAAG;AAC3C,QAAQ,8CAA8C,GAAG;AACzD,MAAM;AACN,SAAS,iCAAiC,eAAe;IACrD,IAAI,2BAA2B,+CAA+C;IAC9E,OAAO;AACX;AACA,SAAS,+CAA+C,eAAe;IACnE,IAAI,SAAS,CAAC;IACd,CAAC,GAAG,MAAM,QAAQ,EAAE,0EAA0E,KAAK,SAAS,CAAC;IAC7G,IAAI,oBAAoB,gBAAgB,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA,OAAQ,KAAK,IAAI,KAAK;IACrF,MAAM,aAAa,gBAAgB,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA,OAAQ,KAAK,IAAI,KAAK;IAChF,MAAM,WAAW,gBAAgB,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA,OAAQ,KAAK,IAAI,KAAK;IAC9E,IAAI,cAAc,CAAC,mBAAmB;QAClC,CAAC,GAAG,MAAM,QAAQ,EAAE;QACpB,IAAI,UAAU,WAAW,OAAO;QAChC,UAAU,SAAS,WAAW,OAAO,GAAG,MAAM;QAC9C,IAAI,OAAO;YACP,UAAU;QACd;QACA,IAAI,UAAU;YACV,KAAK,SAAS,GAAG;QACrB;QACA,oBAAoB;YAChB,MAAM;YACN,UAAU;gBAAC;oBACH,WAAW;oBACX,WAAW;wBAAC;qBAAQ;oBACpB,SAAS;wBAAC;qBAAsB;oBAChC,OAAO,CAAC;oBACR,MAAM;gBACV;aAAE;QACV;IACJ;IACA,CAAC,GAAG,MAAM,QAAQ,EAAE,2EAA2E,KAAK,SAAS,CAAC;IAC9G,kBAAkB,QAAQ,CAAC,OAAO,CAAC,CAAA;QAC/B,IAAI,SAAS,EAAE;QACf,IAAI,WAAW,EAAE;QACjB,KAAK,SAAS,CAAC,OAAO,CAAC,CAAA;YACnB,IAAI,aAAa,YAAY,KAAK,CAAC;YACnC,CAAC,GAAG,MAAM,QAAQ,EAAE,+DAA+D,WAAW,MAAM;YACpG,IAAI,WAAW,MAAM,IAAI,GAAG;gBACxB,IAAI,QAAQ,WAAW,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC;gBACxC,OAAO,IAAI,CAAC;gBACZ,SAAS,IAAI,CAAC;gBACd,CAAC,GAAG,MAAM,QAAQ,EAAE,2DAA2D,OAAO,gBAAgB;YAC1G;QACJ;QACA,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,CAAC,QAAQ,EAAE;YACjC,KAAK,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG;QAC9B;QACA,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,CAAC,SAAS,EAAE;YAClC,KAAK,IAAI,CAAC,SAAS,CAAC,IAAI,GAAG;QAC/B;QACA,MAAM,CAAC,KAAK,SAAS,CAAC,GAAG;YACrB,QAAQ;YACR,UAAU;YACV,SAAS,KAAK,OAAO;YACrB,OAAO,KAAK,KAAK;YACjB,SAAS,KAAK,IAAI;QACtB;QACA,CAAC,GAAG,MAAM,QAAQ,EAAE,2DAA2D,KAAK,SAAS,CAAC;IAClG;IACA,OAAO;AACX,EACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA6BC","ignoreList":[0]}},
    {"offset": {"line": 5180, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5185, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/connect/engine.js"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Engine = void 0;\nconst safejson_1 = require(\"../utils/safejson\");\nconst log_1 = require(\"../utils/log\");\nconst protocol_1 = require(\"../protocol\");\n// import {standardDeeplink, tonConnectSdkVersion} from \"../../ton/tonsdk/constants/version\";\nconst utils_1 = require(\"../utils\");\nconst utils_2 = require(\"../utils\");\nconst sessionUtils_1 = require(\"./sessionUtils\");\nconst url_1 = require(\"../utils/url\");\nclass Engine {\n    constructor(connectionManager) {\n        this.pendingRequests = new Map();\n        this.disconnectListener = [];\n        this.connectionManager = connectionManager;\n        // report api begin\n        (0, log_1.getDefaultReporter)().beginReport();\n        this.connectionManager.addListener(\"sdk_response\", (event, msg) => {\n            var jsonResponse = (0, safejson_1.safeJsonParse)(msg);\n            (0, log_1.logDebug)(`Engine ==>> addListener ==> success ==> ${jsonResponse}`);\n            this.handleResponse(event, jsonResponse);\n        }, function () {\n        });\n    }\n    addDisconnectListener(disconnecter) {\n        this.disconnectListener.push(disconnecter);\n    }\n    setSessionConnectingListener(sessionConnectingListener) {\n        this.sessionConnectingListener = sessionConnectingListener;\n    }\n    disconnect() {\n        (0, log_1.logDebug)('Engine ==>> disconnect');\n        this.pendingRequests.clear();\n    }\n    getRequestId() {\n        const requestId = Date.now().toString();\n        (0, log_1.logDebug)('Engine ==>> getRequestId ==>', requestId);\n        return requestId;\n    }\n    bindRequestForPromise(requestId, resolve) {\n        this.pendingRequests.set(requestId, resolve);\n    }\n    send(request, requestAnswer, option, ttl) {\n        return __awaiter(this, void 0, void 0, function* () {\n            (0, log_1.logDebug)('Engine ==>> send  request==>', JSON.stringify(request));\n            const requestId = this.getRequestId();\n            try {\n                let packageId = yield this.connectionManager.send(JSON.stringify(Object.assign(Object.assign({}, request), { requestId: requestId })), ttl);\n                this.connectionManager.events.once(packageId.toString(), (event) => {\n                    var _a;\n                    (0, log_1.logDebug)(`Engine ==> send => onAck => ${(0, safejson_1.safeJsonStringify)(event)}`);\n                    if (event && event.result) {\n                        (_a = requestAnswer.onAck) === null || _a === void 0 ? void 0 : _a.call(requestAnswer);\n                    }\n                });\n                if (requestAnswer.resolve) {\n                    this.bindRequestForPromise(requestId, requestAnswer.resolve);\n                }\n            }\n            catch (e) {\n                return Promise.reject(e);\n            }\n        });\n    }\n    sendSession(sessionInfo) {\n        return __awaiter(this, void 0, void 0, function* () {\n            (0, log_1.logDebug)('[Connect] sendSession called:', sessionInfo);\n            const requestId = this.getRequestId();\n            let request = {\n                method: 'session_info',\n                params: { sessionInfo: sessionInfo }\n            };\n            yield this.connectionManager.sendRaw(JSON.stringify(Object.assign(Object.assign({}, request), { requestId: requestId })));\n            // try {\n            //     let packageId = await callForSuccess(() =>\n            //         , option)\n            //     this.connectionManager.events.once(packageId.toString(),(event)=>{\n            //         logDebug(`Engine ==> send => onAck => ${safeJsonStringify(event)}`)\n            //         if (event && event.result){\n            //             requestAnswer.onAck?.()\n            //         }\n            //     })\n            //     if (requestAnswer.resolve){\n            //         this.bindRequestForPromise(requestId, requestAnswer.resolve)\n            //     }\n            // }catch (e) {\n            //     return Promise.reject(e)\n            // }\n        });\n    }\n    handleResponse(event, response) {\n        (0, log_1.logDebug)(`Engine ==>> handleResponse_1  ======>response: ${(0, safejson_1.safeJsonStringify)(response)}`, event);\n        if (\"requestId\" in response) {\n            (0, log_1.logDebug)(\"Engine ==>> handleResponse_2  ===> in response\");\n            let requestId = response.requestId;\n            const resolve = this.pendingRequests.get(requestId);\n            if (resolve) {\n                (0, log_1.logDebug)(\"Engine ==>> handleResponse_3  ===> find resolve:\", resolve);\n                resolve(response);\n                // pendingRequestsPromise\n                this.pendingRequests.delete(requestId);\n            }\n            else {\n                (0, log_1.logDebug)(\"Engine ==>> handleResponse_3  ===> not find resolve:\");\n                if (response.method === \"disconnect\") {\n                    this.disconnectListener.forEach(listener => listener());\n                    this.disconnectListener = [];\n                    this.disconnect();\n                }\n                else if (response.method === \"session_connecting\") {\n                    (0, log_1.logDebug)(\"Engine ==>> handleResponse_4  ===> sessionConnectingListener\");\n                    if (this.sessionConnectingListener) {\n                        (0, log_1.logDebug)(\"Engine ==>> handleResponse_4  ===> sessionConnectingListener not null\");\n                        this.sessionConnectingListener();\n                        this.sessionConnectingListener = undefined;\n                    }\n                }\n            }\n        }\n    }\n    restoreconnect(sessionInfo, onConnectResult) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            yield ((_a = this.connectionManager) === null || _a === void 0 ? void 0 : _a.restoreConnect(sessionInfo.topic));\n            onConnectResult(sessionInfo);\n        });\n    }\n    conect(request, sessionConfig, onConnectResult) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a, _b;\n            const connectInfo = this.connectionManager.getConnectInfo();\n            const requestId = this.getRequestId();\n            let openUniversalLink = (_a = sessionConfig.openUniversalUrl) !== null && _a !== void 0 ? _a : false;\n            const connectRequest = {\n                protocolVer: Number(protocol_1.tonConnectSdkVersion),\n                topic: connectInfo.channelId,\n                clientId: connectInfo.clientId,\n                requestId: requestId,\n                dAppInfo: sessionConfig.dappInfo,\n                requests: request,\n            };\n            const connectRequestStr = JSON.stringify(connectRequest);\n            const utf8Array = new TextEncoder().encode(connectRequestStr);\n            const base64Encoded = btoa(String.fromCharCode(...utf8Array));\n            const deeplinkUrl = `${protocol_1.standardDeeplink}?param=${base64Encoded}`;\n            (0, log_1.logDebug)('engine ==>> connect ==>>deeplinkUrl:', deeplinkUrl);\n            const isIOS = (0, utils_2.isIos)();\n            (0, log_1.logDebug)(`engine ==>> connect ==>>isIOS: ${isIOS}   openUniversalLink: ${openUniversalLink}`);\n            if (isIOS && openUniversalLink) {\n                (0, log_1.logDebug)('bridge-provider ==>> connect_3');\n                (0, utils_1.openOKXDeeplinkWithFallback)(deeplinkUrl);\n            }\n            yield ((_b = this.connectionManager) === null || _b === void 0 ? void 0 : _b.disconnect(false));\n            this.bindRequestForPromise(requestId, (response) => {\n                let session = this.onConnect(response, sessionConfig, connectInfo.channelId);\n                onConnectResult(session, response);\n            });\n            try {\n                yield this.connectionManager.connect();\n            }\n            catch (e) {\n                (0, log_1.logDebug)('Engine conect error', e);\n                throw e;\n            }\n            if (!isIOS && openUniversalLink) {\n                (0, log_1.logDebug)('bridge-provider ==>> connect_4');\n                (0, utils_1.openOKXDeeplinkWithFallback)(deeplinkUrl);\n            }\n            return {\n                connectInfo: connectInfo,\n                deeplinkUrl: (0, utils_1.getUniversalLink)(deeplinkUrl)\n            };\n        });\n    }\n    onConnect(connectResponse, sessionConfig, topic) {\n        if (connectResponse.method == \"connect\") {\n            let namespaces = (0, sessionUtils_1.buildNameSpacesByConnectResponse)(connectResponse);\n            if (namespaces) {\n                let session = {\n                    topic: topic,\n                    sessionConfig: sessionConfig,\n                    namespaces: namespaces\n                };\n                return session;\n            }\n        }\n        return null;\n    }\n    universalConnect(request, sessionConfig, connectInfoAndUrl) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\n                var _a, _b, _c, _d;\n                try {\n                    (0, log_1.logDebug)(\"engine universalConnect request :\", JSON.stringify(request));\n                    (0, log_1.logDebug)(\"engine universalConnect sessionConfig :\", JSON.stringify(sessionConfig));\n                    let universalRequest = [];\n                    request.forEach((item) => {\n                        let name = item.name;\n                        if (name.startsWith(\"requestAccounts\") || name.startsWith(\"ton\")) {\n                            universalRequest.push(item);\n                        }\n                    });\n                    (0, log_1.logDebug)(\"engine universalConnect universalRequest :\", JSON.stringify(universalRequest));\n                    const connectInfo = this.connectionManager.getConnectInfo();\n                    const requestId = this.getRequestId();\n                    let openUniversalLink = (_a = sessionConfig.openUniversalUrl) !== null && _a !== void 0 ? _a : false;\n                    const universalConnectRequest = {\n                        protocolVer: Number(protocol_1.tonConnectSdkVersion),\n                        topic: connectInfo.channelId,\n                        clientId: connectInfo.clientId,\n                        requestId: requestId,\n                        dAppInfo: sessionConfig.dappInfo,\n                        requests: universalRequest,\n                        redirect: (_b = sessionConfig === null || sessionConfig === void 0 ? void 0 : sessionConfig.redirect) !== null && _b !== void 0 ? _b : \"none\"\n                    };\n                    const base64Encoded = (0, url_1.encodeConnectParams)(universalConnectRequest);\n                    universalConnectRequest.redirect = (_c = sessionConfig === null || sessionConfig === void 0 ? void 0 : sessionConfig.redirect) !== null && _c !== void 0 ? _c : \"none\";\n                    (0, log_1.logDebug)('engine universalConnect ==>>universalConnectRequest:', JSON.stringify(universalConnectRequest));\n                    var openOKXLink = \"\";\n                    // open app wallet\n                    if (openUniversalLink) {\n                        openOKXLink = (0, url_1.getOKXLink)(universalConnectRequest, sessionConfig.useMini, sessionConfig.tmaReturnUrl);\n                        (0, log_1.logDebug)('engine universalConnect ==>>openOKXLink:', openOKXLink);\n                    }\n                    const openMethod = () => sessionConfig.useMini ? (0, url_1.openOKXTMAWalletlinkWithFallback)(openOKXLink) :\n                        (0, utils_1.useShortLink)() ? (0, utils_1.openOKXUniversalLink)(openOKXLink) : (0, utils_1.openOKXDeeplinkWithFallback)(openOKXLink);\n                    (0, log_1.logDebug)('engine universalConnect ==>>openOKXLink:', openOKXLink);\n                    const isIOS = (0, utils_2.isIos)();\n                    if (isIOS && openUniversalLink) {\n                        (0, log_1.logDebug)(`engine universalConnect ==>>isIOS: ${isIOS}   openUniversalLink: ${openUniversalLink}`);\n                        openMethod();\n                    }\n                    yield ((_d = this.connectionManager) === null || _d === void 0 ? void 0 : _d.disconnect(false));\n                    this.bindRequestForPromise(requestId, (response) => {\n                        var _a, _b, _c, _d;\n                        try {\n                            let connectResponse = response;\n                            if (connectResponse.method == \"connect\") {\n                                (0, log_1.logDebug)(\"engin  universalConnect success connectResponse:>>>\", JSON.stringify(connectResponse));\n                                let namespaces = (0, sessionUtils_1.buildNameSpacesByConnectResponse)(connectResponse);\n                                if (namespaces) {\n                                    let walletName = undefined;\n                                    if (((_b = (_a = connectResponse.payload) === null || _a === void 0 ? void 0 : _a.responses) === null || _b === void 0 ? void 0 : _b[0]) && \"walletName\" in connectResponse.payload.responses[0]) {\n                                        walletName = connectResponse.payload.responses[0]['walletName'];\n                                    }\n                                    let session = {\n                                        topic: connectInfo.channelId,\n                                        sessionConfig: sessionConfig,\n                                        namespaces: namespaces,\n                                        wallet: Object.assign(Object.assign({}, (_c = connectResponse.payload) === null || _c === void 0 ? void 0 : _c.wallet), { walletName: walletName }),\n                                    };\n                                    let methodsResponse = connectResponse.payload.responses.find(item => item.name === 'requestAccounts');\n                                    if (methodsResponse && methodsResponse.connectRequestMethods) {\n                                        session.signResponse = methodsResponse.connectRequestMethods;\n                                    }\n                                    (0, log_1.logDebug)(\"engin  universalConnect success session:>>>\", JSON.stringify(session));\n                                    resolve(session);\n                                }\n                                else {\n                                    throw new protocol_1.OKXConnectError(protocol_1.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR);\n                                }\n                            }\n                            else if (connectResponse.method == \"connect_error\" && ((_d = connectResponse.payload) === null || _d === void 0 ? void 0 : _d.code)) {\n                                throw new protocol_1.OKXConnectError(connectResponse.payload.code);\n                            }\n                        }\n                        catch (e) {\n                            reject(e);\n                        }\n                    });\n                    try {\n                        yield this.connectionManager.connect();\n                    }\n                    catch (e) {\n                        (0, log_1.logDebug)('Engine universalConnect error', e);\n                        throw e;\n                    }\n                    if (!isIOS && openUniversalLink) {\n                        openMethod();\n                    }\n                    (0, log_1.logDebug)('engin  universalConnect ==>> connectInfoAndUrl:', connectInfoAndUrl);\n                    this.sendSession(base64Encoded);\n                    if (connectInfoAndUrl) {\n                        const info = {\n                            connectRequest: universalConnectRequest,\n                            redirect: sessionConfig.redirect,\n                            tmaReturnUrl: sessionConfig.tmaReturnUrl,\n                        };\n                        (0, log_1.logDebug)(\"universalConnect connectInfoAndUrl info :\", JSON.stringify(info));\n                        connectInfoAndUrl(info);\n                    }\n                }\n                catch (error) {\n                    (0, log_1.logDebug)(\"Engine universalConnect catch error\", error);\n                    reject(error);\n                }\n            }));\n        });\n    }\n}\nexports.Engine = Engine;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 5513, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5518, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/connect/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Storage = exports.Engine = exports.WalletConnectionManager = exports.ConnectionManager = exports.OKXWalletConnector = void 0;\nvar connect_1 = require(\"./connect\");\nObject.defineProperty(exports, \"OKXWalletConnector\", { enumerable: true, get: function () { return connect_1.OKXWalletConnector; } });\nvar connectionManager_1 = require(\"./connectionManager\");\nObject.defineProperty(exports, \"ConnectionManager\", { enumerable: true, get: function () { return connectionManager_1.ConnectionManager; } });\nvar walletConnectionManager_1 = require(\"./walletConnectionManager\");\nObject.defineProperty(exports, \"WalletConnectionManager\", { enumerable: true, get: function () { return walletConnectionManager_1.WalletConnectionManager; } });\nvar engine_1 = require(\"./engine\");\nObject.defineProperty(exports, \"Engine\", { enumerable: true, get: function () { return engine_1.Engine; } });\nvar storage_1 = require(\"./storage\");\nObject.defineProperty(exports, \"Storage\", { enumerable: true, get: function () { return storage_1.Storage; } });\n"],"names":[],"mappings":"AAAA;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,QAAQ,OAAO,GAAG,QAAQ,MAAM,GAAG,QAAQ,uBAAuB,GAAG,QAAQ,iBAAiB,GAAG,QAAQ,kBAAkB,GAAG,KAAK;AACnI,IAAI;AACJ,OAAO,cAAc,CAAC,SAAS,sBAAsB;IAAE,YAAY;IAAM,KAAK;QAAc,OAAO,UAAU,kBAAkB;IAAE;AAAE;AACnI,IAAI;AACJ,OAAO,cAAc,CAAC,SAAS,qBAAqB;IAAE,YAAY;IAAM,KAAK;QAAc,OAAO,oBAAoB,iBAAiB;IAAE;AAAE;AAC3I,IAAI;AACJ,OAAO,cAAc,CAAC,SAAS,2BAA2B;IAAE,YAAY;IAAM,KAAK;QAAc,OAAO,0BAA0B,uBAAuB;IAAE;AAAE;AAC7J,IAAI;AACJ,OAAO,cAAc,CAAC,SAAS,UAAU;IAAE,YAAY;IAAM,KAAK;QAAc,OAAO,SAAS,MAAM;IAAE;AAAE;AAC1G,IAAI;AACJ,OAAO,cAAc,CAAC,SAAS,WAAW;IAAE,YAAY;IAAM,KAAK;QAAc,OAAO,UAAU,OAAO;IAAE;AAAE","ignoreList":[0]}},
    {"offset": {"line": 5558, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5563, "column": 0}, "map": {"version":3,"sources":["file:///home/dreamer/Desktop/nextjs_project/event_management/node_modules/%40okxconnect/core/src/index.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./connect\"), exports);\n__exportStar(require(\"./protocol\"), exports);\n__exportStar(require(\"./utils\"), exports);\n"],"names":[],"mappings":"AAAA;AACA,IAAI,kBAAkB,AAAC,IAAI,IAAI,IAAI,CAAC,eAAe,IAAK,CAAC,OAAO,MAAM,GAAI,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE;IAC1F,IAAI,OAAO,WAAW,KAAK;IAC3B,IAAI,OAAO,OAAO,wBAAwB,CAAC,GAAG;IAC9C,IAAI,CAAC,QAAQ,CAAC,SAAS,OAAO,CAAC,EAAE,UAAU,GAAG,KAAK,QAAQ,IAAI,KAAK,YAAY,GAAG;QACjF,OAAO;YAAE,YAAY;YAAM,KAAK;gBAAa,OAAO,CAAC,CAAC,EAAE;YAAE;QAAE;IAC9D;IACA,OAAO,cAAc,CAAC,GAAG,IAAI;AACjC,IAAM,SAAS,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE;IACtB,IAAI,OAAO,WAAW,KAAK;IAC3B,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE;AAChB,CAAE;AACF,IAAI,eAAe,AAAC,IAAI,IAAI,IAAI,CAAC,YAAY,IAAK,SAAS,CAAC,EAAE,QAAO;IACjE,IAAK,IAAI,KAAK,EAAG,IAAI,MAAM,aAAa,CAAC,OAAO,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,UAAS,IAAI,gBAAgB,UAAS,GAAG;AAC3H;AACA,OAAO,cAAc,CAAC,SAAS,cAAc;IAAE,OAAO;AAAK;AAC3D,2HAAmC;AACnC,4HAAoC;AACpC,yHAAiC","ignoreList":[0]}},
    {"offset": {"line": 5589, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}